
<!DOCTYPE html>
<html lang="zh-cn" data-figures=""  class="page"   >

<head>
<title>tcp 协议小结 | BUF1024</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">





<meta property="og:locale" content="zh-cn" />

<meta property="og:type" content="article">
<meta name="description" content="tcp协议是一个比较复杂的协议，对tcp协议深入理解的，真的非常少非常少；对tcp协议误理解或理解片面的，真的非常多非常多。当然这也包括自己" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="">
<meta name="twitter:title" content="tcp 协议小结" />
<meta name="twitter:image" content="https://luoguochun.cn/"/>
<meta property="og:url" content="https://luoguochun.cn/post/2016-09-23-tcp-fuck/" />
<meta property="og:title" content="tcp 协议小结" />
<meta property="og:description" content="tcp协议是一个比较复杂的协议，对tcp协议深入理解的，真的非常少非常少；对tcp协议误理解或理解片面的，真的非常多非常多。当然这也包括自己" />
<meta property="og:image" content="https://luoguochun.cn/" />
  <meta name="keywords" content="blog,computer,luoguochun" />

<link rel="apple-touch-icon" sizes="180x180" href="https://luoguochun.cn/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://luoguochun.cn/icons/favicon-32x32.png">
<link rel="manifest" href="https://luoguochun.cn/icons/site.webmanifest">

<link rel="canonical" href="https://luoguochun.cn/post/2016-09-23-tcp-fuck/">



<link rel="preload" href="https://luoguochun.cn/css/styles.42e2c5f6d8cf9c52872666f8d8b2678ad0c426978b9d78aff3c33b7a1e7f6f97f54bcdaf0518a25fb0fe26367d04f8b07c683b3b38b331cb098daadee06b1f3e.css" integrity = "sha512-QuLF9tjPnFKHJmb42LJnitDEJpeLnXiv88M7eh5/b5f1S82vBRiiX7D&#43;JjZ9BPiwfGg7OzizMcsJjare4GsfPg==" as="style" crossorigin="anonymous">



<link rel="preload" href="https://luoguochun.cn/zh-cn/js/bundle.d217df71f645eebea3db936c88283492d0217a45ec5ae8851eab518badc972cc35c99c079be4db983592b8f42fffe7850e623d855d22d0cdd5548500ac6d9558.js" as="script" integrity=
"sha512-0hffcfZF7r6j25NsiCg0ktAhekXsWuiFHqtRi63Jcsw1yZwHm&#43;TbmDWSuPQv/&#43;eFDmI9hV0i0M3VVIUArG2VWA==" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="https://luoguochun.cn/css/styles.42e2c5f6d8cf9c52872666f8d8b2678ad0c426978b9d78aff3c33b7a1e7f6f97f54bcdaf0518a25fb0fe26367d04f8b07c683b3b38b331cb098daadee06b1f3e.css" integrity="sha512-QuLF9tjPnFKHJmb42LJnitDEJpeLnXiv88M7eh5/b5f1S82vBRiiX7D&#43;JjZ9BPiwfGg7OzizMcsJjare4GsfPg==" crossorigin="anonymous">

</head>

<body data-code="100" data-lines="false" id="documentTop"
  data-lang="zh-cn">

<header class="nav_header" >
  <nav class="nav"><a href='https://luoguochun.cn/' class="nav_brand nav_item" title="BUF1024">BUF1024
  <div class="nav_close">
    <div><svg class="icon">
  <title>open-menu</title>
  <use xlink:href="#open-menu"></use>
</svg>
<svg class="icon">
  <title>closeme</title>
  <use xlink:href="#closeme"></use>
</svg>
</div>
  </div>
</a>

    <div class='nav_body nav_body_left'>
      
      
      
        

  <div class="nav_parent">
    <a href="https://luoguochun.cn/" class="nav_item" title="主页">主页 </a>
  </div>
  <div class="nav_parent">
    <a href="https://luoguochun.cn/" class="nav_item" title="链接">链接 <img src='https://luoguochun.cn/icons/caret-icon.svg' alt="icon" class="nav_icon"></a>
    <div class="nav_sub">
      <span class="nav_child"></span>
        <a href="https://luoguochun.cn/talib-doc/" class="nav_child nav_item" title="TA 技术分析库">TA 技术分析库</a>
        <a href="https://luoguochun.cn/hiqradio" class="nav_child nav_item" title="hiqadio网络收音机">hiqadio网络收音机</a>
    </div>
  </div>
  <div class="nav_parent">
    <a href="https://luoguochun.cn/about/" class="nav_item" title="关于">关于 </a>
  </div>
      
<div class='follow'>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

  <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content">
    <h1 class="post_title">tcp 协议小结</h1>
  <div class="post_meta">
    <span><svg class="icon">
  <title>calendar</title>
  <use xlink:href="#calendar"></use>
</svg>
</span>
    <span class="post_date">
      Sep 23, 2016</span>
    <span class="post_time"> · 18 min read</span><span>&nbsp;· <a href='https://luoguochun.cn/tags/tcp/' title="TCP" class="post_tag button button_translucent">TCP
        </a>
    </span>
    <span class="page_only">&nbsp;·
  <div class="post_share">
    分享到:
    <a href="https://twitter.com/intent/tweet?text=tcp%20%e5%8d%8f%e8%ae%ae%e5%b0%8f%e7%bb%93&url=https%3a%2f%2fluoguochun.cn%2fpost%2f2016-09-23-tcp-fuck%2f&tw_p=tweetbutton" class="twitter" title="分享到 Twitter" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>twitter</title>
  <use xlink:href="#twitter"></use>
</svg>

    </a>
    <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fluoguochun.cn%2fpost%2f2016-09-23-tcp-fuck%2f&t=tcp%20%e5%8d%8f%e8%ae%ae%e5%b0%8f%e7%bb%93" class="facebook" title="分享到 Facebook" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>facebook</title>
  <use xlink:href="#facebook"></use>
</svg>

    </a>
    <a href="#linkedinshare" id = "linkedinshare" class="linkedin" title="分享到 LinkedIn" rel="nofollow">
      <svg class="icon">
  <title>linkedin</title>
  <use xlink:href="#linkedin"></use>
</svg>

    </a>
    <a href="https://luoguochun.cn/post/2016-09-23-tcp-fuck/" title="Copy Link" class="link link_yank">
      <svg class="icon">
  <title>copy</title>
  <use xlink:href="#copy"></use>
</svg>

    </a>
  </div>
  </span>
  </div>

    <div class="post_body"><p>tcp协议是一个比较复杂的协议，对tcp协议深入理解的，真的非常少非常少；对tcp协议误理解或理解片面的，真的非常多非常多。当然这也包括自己在内，当然也可能包括这篇小结在内。
P.S.: 《TCP/IP详解卷1:协议》是介绍TCP/IP协议栈最经典的著作(神级已故人物<a href="http://baike.baidu.com/link?url=5f_wcdexs92JUD0PxwyKhGPSi6a1sOHhrKWHUewqy5-0RQJtyAfHtCDLJ5L7gOaXr6efGrfxv3FR9C2Xkb5jda">W.Richard Stevens</a>经典书籍之一)，然而个人觉得这个“详解”对于tcp的介绍有点简略或者理解起来印象非深，读了一次，一次又一次，还是概念模糊。当然这也与中文译本烂得一塌糊涂有关。同时这本经典书籍也有了它的更新版，不同的是作者已经不是原来的神级人物，相同的是译文继续烂。</p>
<h2 id="tcp协议头">tcp协议头</h2>
<p><figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="tcp协议头"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-header2.png"
      
      
    />

    </picture>
</figure>

tcp基本协议头占用20个字节，协议中<code>Header Length(4bits)</code>中标明协议头的长度，含义是多少个32bit数据，该字段占用4位，所有整个tcp头最多可以占用60字节。当tcp建立时，主机会生成一个初始的序列号(ISN, Initial Sequence Number)，在tcpdump程序抓取的报文中可以看到该初始Sequence，Sequence的生成方式有一定的算法，一般tcp分析很少关注。如果tcpdump查看报文，可以发现，第一个<code>SYN</code>包收到<code>ACK</code>后，后续的SEQ都变成了ISN的偏移量。如果是用大鲨鱼wireshark查看报文，则可以发现，seq总是从0开始，并提示这个值是相对值，大鲨鱼已经处理好这些细节。如：
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="tcpdump seq"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-tcpdump-isn.png"
      
      
    />

    </picture>
</figure>

<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="wireshark seq"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-wireshark-isn.png"
      
      
    />

    </picture>
</figure>
</p>
<p>tcp报文<code>SYN ACK</code>的计算如下：</p>
<pre><code>     A -&gt; B SYN J ACK K LEN L
     B -&gt; A SYN K ACK J+L LEN M
     A -&gt; B SYN J+L ACK K+M
</code></pre>
<p>需要注意到的是，注意，对于<code>DATA LEN</code>为0的，发送的<code>SYN</code>包和<code>FIN</code>包，需要消耗一个序号。为了提高传送的效率，<code>ACK</code>是支持累计的，也就是说没必要对每个<code>SYN</code>进行<code>ACK</code>。如：发送端连续发送3个报文，那么接收端收到3个报文后，可以直接应答一个<code>ACK</code>。</p>
<h3 id="tcp标志位">tcp标志位</h3>
<ol>
<li>
<p><strong>CWR</strong>(Congestion Window Reduced) &amp; <strong>ECN</strong>（ECN-Echo, Explicit Congestion Notification）
<strong>CWR</strong> 阻塞窗口已减少，意思是告诉对端我已经按照你的要求，进行阻塞窗口减少了，并启动阻塞算法来控制我的发包速度； <strong>ECN</strong> 显式阻塞窗口通知，意思通知发送方，我接收的报文出现了阻塞，请控制发包速度。也就是说，<strong>CWR</strong> 和 <strong>ECN</strong> 必须配合使用，<strong>CWR</strong> 是收到 <strong>ECN</strong> 的应答。此外，在tcp三次握手时，这两个标志表明tcp端是否支持<strong>ECN</strong>。如果建立连接一方支持，则在发送的<code>SYN</code>包，将 <strong>ECN</strong> 标志置为1，如果服务端也支持，则在<code>ACK</code>包只设置<strong>ECN</strong>。缘由：tcp建立连接后，报文经过经过路由或网关等网络设备后，在路由器或网关等网络设备出现阻塞时，路由器或网关等设备设置<strong>IP</strong>层的某个标志表明出现阻塞，这样接收可以明确知道报文出现了阻塞。然而，需要知道阻塞进行阻塞控制的是报文发送方而非接收方。所以接收方会在<code>ACK</code>报文中设置<strong>ECN</strong>标志，同时发送方在<code>ACK</code>中设置<strong>CWR</strong>标志，表明已经收到<strong>ECN</strong>，并进行了减少阻塞窗口操作和启用阻塞算法。</p>
</li>
<li>
<p><strong>URG</strong>(Urgent)
这就是传说中的带外数据。因为tcp是没有消息边界的，假如有一种情况，你已经发送了一些数据，但是此时，你要发送一些数据优先处理，就可以设置这些标志。同时如果设置了这个标志，紧急指针(报文头中, <code>Urgent Pointer(16Bit)</code>部分)也会设置为相应的偏移。当接受方收到<strong>URG</strong>数据时，不缓存在接收窗口，直接往上传给上层。具体的使用带外数据大体的方法，就是，调用<code>send</code>和<code>recv</code>是要加上<code>MSG_OOB</code>参数。同时接收方要处理<code>SIGURG</code>信号。使用<code>MSG_OOB</code>是需要注意：</p>
</li>
</ol>
<ol>
<li>紧急指针只能标示一个字节数据，所以如果发送带外数据多于一个字节，其他数据将当成是正常的数据。</li>
<li>接收端需要调用<code>fcntl(sockfd,F_SETOWN, getpid());</code>，对socket描述符号进行宿主设置，否则无法捕获<code>SIGURG</code>信号。</li>
<li>如果设置选项<code>SO_OOBINLINE</code>，那么将不能使用<code>MSG_OOB</code>参数接收的报文(调用报错)，紧急指针的字符将被正常读出来，如果需要判断是否紧急数据，则需要提前判断：<code>ioctl (fd,SIOCATMARK,&amp;flag);if (flag) {read(sockfd,&amp;ch,1);</code>。
不过，据说这个带外数据在实际上，用得很少。</li>
</ol>
<ol start="3">
<li>
<p><strong>PSH</strong>（Push）
tcp报文的流动，先是发送方塞进发送方的缓存再发送；同样接收方是先塞到接收方的缓存再投递到应用。<strong>PSH</strong>标志的意思是，无论接收或发送方，都不用缓存报文，直接接收投递给上层应用或直接发送。<strong>PSH</strong>标志可以提供报文发送的实时性。如果设置了<code>SO_NODELAY</code>选项(也就是关闭<code>Nagle</code>算法)，可以强制设置这个标志。</p>
</li>
<li>
<p><strong>SYN</strong>(Synchronize), <strong>ACK</strong>(Acknowledgement), <strong>FIN</strong>（Finish）和 <strong>RST</strong>(Reset)
这几个标记比较容易理解。<strong>SYN</strong>, Synchronize sequence numbers。<strong>ACK</strong>, <code>Acknowledgement Number</code>有效，应答标记。<strong>FIN</strong>,发送端结束发送。<strong>RST</strong>连接不可达。</p>
</li>
</ol>
<h3 id="tcp-选项不完全">tcp 选项(不完全)</h3>
<p>tcp 除了20字节基本数据外，后面还包括了最多40个字节的tcp的选项。tcp选项一般存储为<code>kind/type(1byte) length(1byte) value</code>的格式式，不同的选项具体格式有所不同。这里简单罗列一些常见的tcp选项并做简单介绍。</p>
<ol>
<li>
<p><strong>MSS</strong>(Maximum Segment Size)
tcp报文最大传输长读，tcp在三次握手建立阶段，在<code>SYN</code>报文交互该值，注意的是，这个数值并非协商出来的，而是由网络设备属性得出。<strong>MSS</strong>一个常见的值是1460(<strong>MTU</strong>1500 - <strong>IP</strong>头部 - <strong>TCP</strong>头部)。</p>
</li>
<li>
<p><strong>SACK</strong>(Selective Acknowledgements)
选择ACK，用于处理segment不连续的情况，这样可以减少报文重传。比如： A 向B发送4个segment，B收到了1,2,4个segment，网络丢失了3这个segment。B收到1,2segment后，回应<code>ACK</code> 3，表示1,2这两个<code>ACK</code>已经收到，同时在选项字段里面，包括4这个段，表示4这个segment也收到了。于是A就重传3这个segment，不必重传4这个segment。B收到3这个segment后，直接<code>ACK</code> 5，表明3,4都收到了。</p>
</li>
<li>
<p><strong>WS</strong>(Window Scale)
在tcp头部，<code>Window Size(16Bit)</code>表面接收窗口大小，但是对于现代网络而言，这个值太小了。所以tcp通过选项来增加这个窗口的值。<strong>WS</strong>值的范围0～14，表示<code>Window Size(16Bit)</code>数值先向左移动的位数。这样实际上窗口的大小可达31位。在程序网络设计时，有个<code>SO_RECVBUF</code>，表示设置接收缓冲的大小，然而需要注意的是，这个值和接收窗口的大小不完全相等，但是这个数值和接收窗口存在一定的关系，在内核配置的范围内，大小比较接近。</p>
</li>
<li>
<p><strong>TS</strong>(Timestamps)
Timestamps在tcp选项中包括两个32位的timestamp: <strong>TSval</strong>(Timestamp value)和<strong>TSecr</strong>(Timestamp Echo Reply)。如果设置了<strong>TS</strong>这个选项，发送方发送时，将当前时间填入<strong>TSval</strong>，接收方回应时，将发送方的<strong>TSval</strong>填入<strong>TSecr</strong>即可(注意发送或接收都有设置<strong>TSval</strong>和<strong>TSecr</strong> )。<strong>TS</strong> 选项的存在有两个重要作用：一是可以更加精确计算RTT(Round-Trip-Time)，只需要在回应报文里面用当前时间减去<strong>TSecr</strong>即可；二是PAWS(Protection Against Wrapped Sequence number, 防止sequence回绕)，什么意思呢？比如说，发送大量的数据：0-10G，假设segment比较大为1G而且sequence比较小为5G，接收端接收1,3,4,5数据段正常接收，收到的发送时间分别1,3,4,5，第2 segment丢失了，由于<strong>SACK</strong>，导致2被重传，在接收6时，sequence由于回绕变成了1，这时收到的发送时间为6，然后又收到迷途的2，seq为2，发送时间为2，这个时间比6小，是不合法的，tcp直接丢弃这个迷途的报文。</p>
</li>
<li>
<p><strong>UTO</strong>(User Timeout)
<strong>UTO</strong>指的是发送<code>SYN</code>，收到<code>ACK</code>的超时时间，如果在<strong>UTO</strong>内没有收到，则认为对端已挂。
在网络程序设计的时候，为了探测对端是否存活，经常涉及心跳报文，通过tcp的keepalive和<strong>UTO</strong>机制也可以实现，两者的区别是，前者可以通过心跳报文实时知道对端是否存活，二后者只有等待下次调用发送或接收函数才可以断定：</p>
</li>
</ol>
<ol>
<li>
<p><code>SO_KEEPALIVE</code>相关选项
设置<code>SO_KEEPALIVE</code> 选项，打开keepalive机制。
设置<code>TCP_KEEPIDLE</code> 选项，空闲时间间隔启动keepalive机制，默认为2小时。
设置<code>TCP_KEEPINTVL</code>选项，keepalive机制启动后，每隔多长时间发送一个keepalive报文。默认为75秒。
设置<code>TCP_KEEPCNT</code>选项，设置发送多少个keepalive数据包都没有正常响应，则断定对端已经崩溃。默认为9。
由于tcp有超时重传机制，如果对于<code>ACK</code>丢失的情况，keepalive机制将有可能失效。</p>
</li>
<li>
<p><code>TCP_USER_TIMEOUT</code>相关选项
<code>TCP_USER_TIMEOUT</code>选项的函义是多久没有收到<code>ACK</code>则认为对端已经挂了。</p>
</li>
</ol>
<p>配合<code>SO_KEEPALIVE</code>和<code>TCP_USER_TIMEOUT</code>选项，可以利用tcp机制实现探测对端存活。</p>
<h2 id="tcp-建立和终止">tcp 建立和终止</h2>
<p>正常情况下，tcp的建立需要进行3次握手，tcp断开需要进行4次挥手。抓包看下建立连接和断开过程，通过抓取22端口报文，用telnent远程连接22端口测试，测试命令如下：</p>
<pre><code>    heidong@HEIDONGVM:~$ sudo tcpdump -i eth0 port 22 -s 0 -w tcpdump-est-fin.cap
    
    heidong@HEIDONGVM:~$ telnet 192.168.1.101 22
    Trying 192.168.1.101...
    Connected to 192.168.1.101.
    Escape character is '^]'.
    SSH-2.0-OpenSSH_6.1
   ^]
   
    telnet&gt; quit
    Connection closed.
    heidong@HEIDONGVM:~$
</code></pre>
<p><figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="wireshark tcp 报文"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-tcpdump-est-fin.png"
      
      
    />

    </picture>
</figure>
</p>
<ol>
<li>TCP3次握手的过程是帧1到3</li>
</ol>
<ul>
<li>
<p>第1帧，发送SYN J:</p>
<pre><code>   36600→22 [SYN] Seq=0 Win=29200 Len=0 MSS=1460 SACK_PERM=1 TSval=1488865 TSecr=0 WS=128
</code></pre>
<p>从主机10.0.2.15:36600 -&gt; 192.168.1.101:22报文，<code>MSS=1460</code>， <code>Win=29200</code>，由于后面有<code>WS=128</code>选项，所以<code>Window=29200*128</code>。<code>SACK_PERM=1</code>表明10.0.2.15这台主机支持 <strong>SACK</strong>。<code>TSval</code>和<code>TSecr</code>为 <strong>TS</strong>的两个数值。</p>
</li>
<li>
<p>第2帧，发送SYN K， ACK J+1:</p>
<pre><code>  22→36600 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=1460
</code></pre>
<p>从主机192.168.1.101:22 -&gt; 10.0.2.15:36600报文，<code>SYN</code>报文将消耗一个字节，所以这里<code>ACK</code>为1。192.168.1.101这太主机的<code>MSS=1460</code>, <code>win=65535</code>没有<strong>WS</strong>。</p>
</li>
<li>
<p>第3帧，发送ACK K+1:</p>
<pre><code>  36600→22 [ACK] Seq=1 Ack=1 Win=29200 Len=0 
</code></pre>
<p>这是建立TCP连接的第3次握手，是主机10.0.2.15对第二帧的应答，这时<code>win=29200</code>，意思是，接收窗口的大小。</p>
</li>
</ul>
<p>当这3次交互完成后，连接真正建立，就可以接收和发送数据了。</p>
<ol start="2">
<li>TCP终止连接的4次挥手过程是帧6到9</li>
</ol>
<ul>
<li>
<p>第6帧，发送FIN J, ACK K:</p>
<pre><code>  36600→22 [FIN, ACK] Seq=1 Ack=22 Win=29200 Len=0
</code></pre>
<p>主机10.0.2.15：36600主动关闭连接，发送<code>FIN</code>，和上个报文的<code>ACK</code>，这是第一次交换。</p>
</li>
<li>
<p>第7帧，发送ACK J+1:</p>
<pre><code>   22→36600 [ACK] Seq=22 Ack=2 Win=65535 Len=0
</code></pre>
<p>主机192.168.1.101:22，回应第6帧<code>FIN</code>。</p>
</li>
<li>
<p>第8帧，FIN K, ACK J+1:</p>
<pre><code>   22→36600 [FIN, ACK] Seq=22 Ack=2 Win=65535 Len=0
</code></pre>
<p>主机192.168.1.101:22关闭socket，发送<code>FIN</code>。</p>
</li>
<li>
<p>第9帧，ACK K+1:</p>
<pre><code>   36600→22 [ACK] Seq=2 Ack=23 Win=29200 Len=0
</code></pre>
<p>主机10.0.2.15:36600，回应第5帧<code>FIN</code>。</p>
<p>至此，tcp进行了正常的关闭，10.0.2.15：36600进入了<code>TIME_WAIT</code>状态。此次交互是非常理想的4次挥手过程，现实中，4次挥手的每一次交互的过程中都有可能携带额外的数据。
另外，tcp在结束连接时，例如它断开发送能力时，却依然希望能够接收数据。这属于tcp的半关闭功能。在程序实现时，不是调用<code>close</code>函数，而是调用<code>shutdown</code>函数，<code>shutdown</code>函数有个参数指明怎么关闭连接。</p>
</li>
</ul>
<h3 id="异常情况">异常情况</h3>
<ol>
<li>
<p>建立连接异常
1.1 建立连接端口不存在
如果对端的端口不存在，那么在报文中回应<code>RST</code>标志，表示连接不可达。事实上发送端在需要重复一次<code>SYN</code>报文，对端才会响应<code>RST</code>。如:</p>
<pre><code> heidong@HEIDONGVM:~$ telnet 192.168.1.101 9900
 Trying 192.168.1.101...
 telnet: Unable to connect to remote host: Connection refused
 heidong@HEIDONGVM:~$ 

 heidong@HEIDONGVM:~$ sudo tcpdump -i eth0 host 192.168.1.101
 [sudo] password for heidong: 
 tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
 listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
 21:19:36.424426 IP 10.0.2.15.52519 &gt; 192.168.1.101.9900: Flags [S], seq 4012293140, win 29200, options [mss 1460,sackOK,TS val 5302548 ecr 0,nop,wscale 7], length 0
 21:19:37.424498 IP 10.0.2.15.52519 &gt; 192.168.1.101.9900: Flags [S], seq 4012293140, win 29200, options [mss 1460,sackOK,TS val 5302798 ecr 0,nop,wscale 7], length 0
 21:19:37.516340 IP 192.168.1.101.9900 &gt; 10.0.2.15.52519: Flags [R.], seq 0, ack 4012293141, win 0, length 0
 ^C
 3 packets captured
 3 packets received by filter
 0 packets dropped by kernel
 heidong@HEIDONGVM:~$ 
</code></pre>
</li>
</ol>
<p>1.2 建立连接主机不存在
如果连接的主机不存在，那么tcp 会重发报文<code>SYN</code>。重发的次数在内核参数了<code>net.ipv4.tcp_syn_retries</code>配置，如:</p>
<pre><code>    heidong@HEIDONGVM:~$ cat /proc/sys/net/ipv4/tcp_syn_retries 
    6
</code></pre>
<p>重连重试的是时间分别是。2^X-1秒。如:</p>
<pre><code>    heidong@HEIDONGVM:~$ telnet 192.168.1.101 9900
    Trying 192.168.1.101...
    telnet: Unable to connect to remote host: Connection refused
    heidong@HEIDONGVM:~$ telnet 192.168.1.156 9900
    Trying 192.168.1.156...
    telnet: Unable to connect to remote host: Connection timed out
    heidong@HEIDONGVM:~$

    heidong@HEIDONGVM:~$ sudo tcpdump -i eth0 host 192.168.1.156
    tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
    listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
    21:39:58.109141 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5607969 ecr 0,nop,wscale 7], length 0
    21:39:59.109694 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5608219 ecr 0,nop,wscale 7], length 0
    21:40:01.112512 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5608720 ecr 0,nop,wscale 7], length 0
    21:40:05.119962 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5609722 ecr 0,nop,wscale 7], length 0
    21:40:13.146103 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5611728 ecr 0,nop,wscale 7], length 0
    21:40:29.176601 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5615736 ecr 0,nop,wscale 7], length 0
    21:41:01.208154 IP 10.0.2.15.38610 &gt; 192.168.1.156.9900: Flags [S], seq 1424720904, win 29200, options [mss 1460,sackOK,TS val 5623744 ecr 0,nop,wscale 7], length 0
    ^C
    7 packets captured
    7 packets received by filter
    0 packets dropped by kernel
    heidong@HEIDONGVM:~$ 
</code></pre>
<ol start="2">
<li>
<p>断开连接异常
对于没有正常收到<code>FIN</code>异常终止连接的情况，tcp回应<code>RST</code>。
另外，<code>SO_LINGER</code>选项提供异常终止的能力：
默认的情况下，使用<code>close</code>函数关闭一个连接，tcp默认的行为是，1) 如果发送缓冲没有数据，发送<code>FIN</code>并直接返回 2) 如果缓冲存在数据，tcp将尽力把数据发送出去，然后发送<code>FIN</code>并返回。<code>SO_LINGER</code>选项可以改变这默认行为，相关数据结构</p>
<pre><code> struct linger {
     int l_onoff; /* 0=off, nozero=on */
     int l_linger; /* linger time, POSIX specifies units as seconds*/
 }
</code></pre>
</li>
</ol>
<ol>
<li><code>l_onoff</code> = 0，<code>l_linger</code>被忽略，同默认行为</li>
<li><code>l_onoff</code> 非0，<code>l_linger</code>为0，<code>close</code>清空发送缓冲，并发送<code>RST</code>，然后返回，这中情况下，可以避免<code>TIME_WAIT</code>状态的产生。</li>
<li><code>l_onoff</code>非0，<code>l_linger</code>大于0，<code>close</code>将使内核推延一段时间。如果缓冲有数据，进程将进入睡眠状态，直到数据发送完毕并收到对方的<code>ACK</code>或者滞留超时(<code>close</code>返回<code>EWOULDBLOCK</code>)，缓冲去数据丢失。(如果是非阻塞，则直接返回<code>EWOULDBLOCK</code>)
<code>shutdown</code>使用可以避免关闭时还有数据的处理。</li>
</ol>
<h2 id="tcp状态机">tcp状态机</h2>
<p>tcp在每个时刻都存在于一个特定的状态(<strong>CLOSED</strong>状态为假想状态)，这里的状态和<code>netstat</code>显示的状态是一致的，各个状态以及状态转换如下：
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="TCP状态机"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-state.png"
      
      
    />

    </picture>
</figure>

<strong>TIME_WAIT</strong>也称为<strong>2MSL</strong>(Maximum Segment Lifetime)状态，它可以保证对端发送最后的<code>FIN</code>(重发的)，能够响应<code>ACK</code>，另外一个含是，保证端口在<strong>2MSL</strong>端口不被重发使用。在服务端编程的时候，我们通常会使用<code>SO_REUSEADDR</code>这个选项，这样可以避免如果服务端进入<strong>TIME_WAIT</strong>状态后，可以及时重启。
<strong>FIN_WAIT_2</strong>状态是在发送<code>FIN</code>，接收到<code>ACK</code>时，进入的状态，如果对端没有发送<code>FIN</code>那么，将无法进入<strong>TIME_WAIT</strong>状态，这时对端一直是<strong>CLOSE_WAIT</strong>状态，当服务器出现大量的<strong>FIN_WAIT_2</strong> 或 <strong>CLOSE_WAIT</strong>状态时，一般都是被动关闭那端忘记了调用<code>close</code>函数关闭socket。</p>
<h2 id="tcp数据传输">TCP数据传输</h2>
<ol>
<li>滑动窗口
在tcp头部，窗口大小占用16位，再加上<strong>WS</strong>选项，实际上可以达31位。已经建立连接的<strong>TCP</strong>双方，都维护两个窗口，分别为接收窗口和接收窗口。</li>
</ol>
<p>1.1 发送方窗口
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="发送方窗口"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-sliding-window-snd.png"
      
      
    />

    </picture>
</figure>

如图示，在任意一时刻，发送方的发送窗口数据可分4大类：1) 已经发送并收到<code>ACK</code>的，2) 已经发送并未收到<code>ACK</code>的，3) 准备发送的，4) 未发送的。第1和第2类数据之间的边界称为<strong>左边界</strong>；第3和第4类之间的数据称之为<strong>右边界</strong>。第2和第3类数据之间的窗口称之为<code>Offered Window</code>，是接收方通告的窗口大小。<strong>左边界</strong>向做右移动，称为窗口合拢；<strong>右边界</strong>向右移动，称为窗口张开；<strong>右边界</strong>向左移动，称为窗口的收缩(实际tcp实现不一定有)。如果<strong>左边界</strong>到达<strong>右边界</strong>，那么窗口为0，不能发送任何数据。当窗口变为0时，这里存在一个问题：因为接收方的窗口大小是通过<code>ACK</code>告知的，如果窗口为0了，那么哪里来的<code>ACK</code>呢？解决的办法是，发送方会发送<code>ZWP(Zero Windonw Probe)</code>的报文给接收端，让接收端应答<code>ACK</code>告知窗口大小，当发送方发送3次<code>ZWP</code>后(一般设置3次，每次给30~60秒)，如果窗口依然是0，那么有些tcp实现将关闭连接。在当发送方收到发送数据的<code>ACK</code>时，<strong>左边界</strong>向右合拢或窗口向右移动。注意到，只有收到<code>ACK</code>时，<strong>左边界</strong>才会右移。</p>
<p>1.2 接收方窗口
<figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="接收方窗口"
      
        class="image_figure image_internal image_unprocessed"
        src="/img/tcp/tcp-sliding-window-rcv.png"
      
      
    />

    </picture>
</figure>

如图示，类似发送方窗口，接收方窗口分为3大类，1) 已经接收并发送<code>ACK</code>的，2) 将接收存储的，3) 不能接收的。第1和2类之间的边界称为<strong>左边界</strong>，第2和第3类数据之间的边界称之为<strong>右边界</strong>。当接收方收到报文的<strong>SEQ</strong>小与<strong>左边界</strong>，则当做是重发报文直接丢弃；当接收的报文的<strong>SEQ</strong>大于<strong>右边界</strong>，则认为是溢出也直接丢弃，只有报文在<strong>左边界</strong>和<strong>右边界</strong> 之间的报文才允许接收。如果在<strong>左边界</strong>和<strong>右边界</strong> 之间收到的非连续的报文(由于<strong>SACK</strong>，报文将缓存)，那么<strong>左边界</strong>并不会向右移动，等待重传数据连续后，才移动。</p>
<p>由于滑动窗口的这些特性，接收方可以进行窗口的控制，通过告知对方窗口大大小，让发送方进行控制调整，从而具备流量控制功能。</p>
<ol start="2">
<li>
<p>糊涂窗口综合症(<code>SWS</code>)
如果建立连接的双方，当发送方产生的数据速度很慢，或者接收发消耗的数据很慢或者两者都有，这样会导致发送方向接收方发送极少量的数据，接收方回应很小的窗口。这样就会导致网络上存在大量的小数据包，tcp头部至少占20字节，加上<strong>IP</strong>头部的20字节，这个传输一个小包，耗费这么大的网络资源，这样是很不经济的，出现的这种情况称之为糊涂窗口综合症<code>Silly Window Syndrome(SWS)</code>，<code>SWS</code>导致网络利用的低效率。<code>SWS</code>可由发送方或接收方造成，解决方法：
2.1 发送方<strong>Nagle算法</strong>
<strong>Nagle算法</strong>最多允许有一个为确认的未完成小分组(小于<strong>MSS</strong>)，在该分组的<strong>ACK</strong>到达之前，不能发送其他小分组。也就是说，如果对端<code>ACK</code>回应的很快的话，<strong>Nagle算法</strong>并不会合并多少数据包(也就是说并不会启用)，在“低速”网络环境里面才会出现更多的小分组合并发送。tcp协议默认是打开 <strong>Nagle算法</strong>的，发送报文条件是：</p>
<ol>
<li>如果包长度达到<strong>MSS</strong>，则允许发送；</li>
<li>如果该包含有<code>FIN</code>，则允许发送；</li>
<li>所有发出去的小数据包（包长度小于<strong>MSS</strong>）均被确认，则允许发送；</li>
<li>上述条件都未满足，但发生了超时（一般设置延迟<code>ACK</code>，一般为200ms），则立即发送。</li>
</ol>
<p><code>TCP_NODELAY</code>选项可以关闭<strong>Nagle算法</strong>。关闭后，只要有数据就立刻进行发送。</p>
</li>
</ol>
<p>2.2 接收方<strong>Cork算法</strong>或延长<code>ACK</code>
如果接收方处理比较慢，<code>ACK</code>的窗口很小，这样接收端就引起<code>SWS</code>。<strong>Cork算法</strong>就是只要有数据达到，就回应，但是回应的窗口大小为0，直到空闲窗口已经可以放入<strong>MSS</strong>的报文长度，或者窗口的空间一半已经变为可用，这时才回应真实的可用窗口。<code>TCP_CORK</code>选项可以启用这个算法。另外的一种机制是延迟确认，接收端收到报文时，并不立刻进行确认，等到有足够的窗口空间，才进行确认。延迟确认会引入另外一个问题，就是会导致tcp发送方进行报文重发，现在延迟确认的数据定义为500毫秒。<code>TCP_QUICKACK</code>选项可以关闭延迟<code>ACK</code>，然而这个选项并非是永久的，需要每次接收数据后，重新设置一次。</p>
<h2 id="tcp阻塞控制">TCP阻塞控制</h2>
<p>在复杂和经常变化的网络环境中，当网络程序阻塞时，tcp不是一味的发送数据加塞网络，而是进行自我调整。传统的阻塞控制算法有4种：慢启动(Slow Start)，阻塞避免(Congestion Avoidance)，快速重传(Fast Retransmit)，快速恢复(Fast Recovery)。</p>
<ol>
<li>慢启动
<strong>慢启动</strong>算法启动发生在建立tcp连接后，或者报文重传超时(Retransmit Timeout, RTO)后，也有可能是tcp空闲某段时间后。慢启动为<strong>TCP</strong>增加了一个阻塞窗口(Congestion Window, cwnd)，<strong>cwnd</strong>以<strong>MSS</strong> 为单位，发送时，取 <strong>cwnd</strong>和通告的窗口大小最小值为发送上限。慢启动算法:</li>
</ol>
<ol>
<li><strong>cwnd</strong>通常初始化为1个<strong>MSS</strong>(Linux 3.0或以上，设置为10<strong>MSS</strong>)</li>
<li>在没有出现丢包的情况下，每收到一个<code>ACK</code>，<strong>cwnd</strong> = <strong>cwnd</strong> * 2</li>
<li>当<strong>cwnd</strong>增长的一个阈值，(slow start threshold, ssthresh)，即<strong>cwnd</strong> &gt;= <strong>ssthresh</strong>，tcp 进入避免阻塞算法</li>
</ol>
<p>当<strong>RTO</strong>时，ssthresh = <strong>cwnd</strong> / 2，<strong>cwnd</strong> = 1，重启慢启动算法。</p>
<p>由上可知，当 <code>ACK</code> 很快时，慢启动算法的增长速率是很快的。如果存在延迟确认，那么增长速率并不快，所以在建立连接的慢启动算法启动期间，延迟确认是关闭的。</p>
<ol start="2">
<li>阻塞避免
当<strong>cwnd</strong> &gt;= <strong>ssthresh</strong>时，就会启用避免阻塞算法，算法如下：</li>
</ol>
<ol>
<li>每收到一个非重复的<code>ACK</code>，<strong>cwnd</strong> = <strong>cwnd</strong> + 1/<strong>cwnd</strong>
避免阻塞算法，避免了慢启动那种指数级别的快速增长，而变成了缓慢的线性增长，慢慢调整到网络最佳值。</li>
</ol>
<ol start="3">
<li>
<p>快速重传
当收到一连串3个或以上的重复<code>ACK</code>时，则可以认为有报文段丢失了，这个时候，不需要得等<strong>RTO</strong>，直接重传丢失的报文。这就是快速重传算法。但启用快速重传算法后，tcp并不启用慢启动算法，因为接收端已经在高速接收数据了，tcp不想突然减速，而是启动另个一个算法，快速恢复。</p>
</li>
<li>
<p>快速恢复
当收到3个或以上重发<code>ACK</code>，快速恢复算法启动，算法如下：</p>
</li>
</ol>
<ol>
<li><strong>ssthresh</strong> = <strong>cwnd</strong> / 2</li>
<li>每次收到重复的<code>ACK</code>， <strong>cwnd</strong> = <strong>cwnd</strong> + 1</li>
<li>收到新数据<code>ACK</code>，<strong>cwnd</strong> = <strong>ssthresh</strong></li>
</ol>
<p>由上，网络出现阻塞时，快速恢复算法将发送速率降低了。</p>
<h2 id="小结">小结</h2>
<p>这里小结只是tcp的很小一部分，没有涉及到tcp的方方面面，也没有涉及到内核调优，编程技巧等方方面面。另外tcp目前还是发展中的协议，随着时间推移，有很多新的功能特性添加进来，这里也没有涉及到。对于tcp的熟悉，必须通过抓包实践才能进行一步了解，停留在读书计理论，永远无法理解。期待以后有更全面的认识！</p>
<p>tcpdump 使用参考： <a href="https://luoguochun.cn/2015/07/25/tcpdump-usage/">https://luoguochun.cn/2015/07/25/tcpdump-usage/</a>
完。</p>
<p>一些参考：
<a href="https://www.cnblogs.com/KevinT/p/3810824.html">TCP_DEFER_ACCEPT</a>
<a href="http://blog.51cto.com/davidbj/1426220">TFO&ndash;TCP Fast Open</a> &ndash; 由于存在安全隐患而没有广泛使用。</p>

    </div>
<div class="post_comments">
  
  
  
</div>




    <hr>

<div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2016-09-23 21:20:10 \u002b0000 UTC',
        title: 'tcp 协议小结',
        clientID: '72786bf87c19beec6abe',
        clientSecret: '93ce647699b49ea6434332d36b0122a4ad8281ad',
        repo: 'buf1024.github.io',
        owner: 'buf1024',
        admin: ['buf1024'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    <br>
    


    
    
    <h2 class="mt-4">最新文章</h2>
    <ul class="flex-column">
      <li>
        <a href="https://luoguochun.cn/post/2024-01-13-rust-sqlx-sqlbuilder/" class="nav-link" title="Rust sqlx SQLBuilder">Rust sqlx SQLBuilder</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2024-01-13-rust-sqlx-sqlbuilder2/" class="nav-link" title="Rust sqlx SQLBuilder">Rust sqlx SQLBuilder</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2024-01-08-vite-engineering-config/" class="nav-link" title="前端工程化配置保姆级教程">前端工程化配置保姆级教程</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2023-12-26-rust-proc-macro/" class="nav-link" title="rust 过程宏">rust 过程宏</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2023-09-21-rust-panic/" class="nav-link" title="一行代码让 rustc panic">一行代码让 rustc panic</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2023-07-19-flutter-muti-window/" class="nav-link" title="Flutter 桌面端多窗口支持">Flutter 桌面端多窗口支持</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2023-07-04-hiqradio/" class="nav-link" title="hiqradio 一个简单的收音机软件">hiqradio 一个简单的收音机软件</a>
      </li>
      <li>
        <a href="https://luoguochun.cn/post/2023-03-21-android-https/" class="nav-link" title="android https 抓包">android https 抓包</a>
      </li>
    </ul>
    <div>
      <h2 class="mt-4 taxonomy" id="categories-section">分类</h2>
      <nav class="tags_nav">
        <a href='https://luoguochun.cn/categories/misc/' class="post_tag button button_translucent" title="misc">
          MISC
          <span class="button_tally">11</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/linux/' class="post_tag button button_translucent" title="linux">
          LINUX
          <span class="button_tally">8</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/rust/' class="post_tag button button_translucent" title="rust">
          RUST
          <span class="button_tally">8</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/tcp/' class="post_tag button button_translucent" title="tcp">
          TCP
          <span class="button_tally">8</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/c/' class="post_tag button button_translucent" title="c">
          C
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/flutter/' class="post_tag button button_translucent" title="flutter">
          FLUTTER
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/python/' class="post_tag button button_translucent" title="python">
          PYTHON
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/c&#43;&#43;/' class="post_tag button button_translucent" title="c&#43;&#43;">
          C&#43;&#43;
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/web/' class="post_tag button button_translucent" title="web">
          WEB
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/gcc/' class="post_tag button button_translucent" title="gcc">
          GCC
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/git/' class="post_tag button button_translucent" title="git">
          GIT
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/reactjs/' class="post_tag button button_translucent" title="reactjs">
          REACTJS
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/unittest/' class="post_tag button button_translucent" title="unittest">
          UNITTEST
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/vim/' class="post_tag button button_translucent" title="vim">
          VIM
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/%E6%9E%84%E6%9E%B6/' class="post_tag button button_translucent" title="构架">
          构架
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/asm/' class="post_tag button button_translucent" title="asm">
          ASM
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/docker/' class="post_tag button button_translucent" title="docker">
          DOCKER
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/categories/go/' class="post_tag button button_translucent" title="go">
          GO
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
    <div>
      <h2 class="mt-4 taxonomy" id="tags-section">标签</h2>
      <nav class="tags_nav">
        <a href='https://luoguochun.cn/tags/c/' class="post_tag button button_translucent" title="c">
          C
          <span class="button_tally">21</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/linux/' class="post_tag button button_translucent" title="linux">
          LINUX
          <span class="button_tally">16</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/c&#43;&#43;/' class="post_tag button button_translucent" title="c&#43;&#43;">
          C&#43;&#43;
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/python/' class="post_tag button button_translucent" title="python">
          PYTHON
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/tcp/' class="post_tag button button_translucent" title="tcp">
          TCP
          <span class="button_tally">7</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/dart/' class="post_tag button button_translucent" title="dart">
          DART
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/flutter/' class="post_tag button button_translucent" title="flutter">
          FLUTTER
          <span class="button_tally">6</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/rust/' class="post_tag button button_translucent" title="rust">
          RUST
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/tdd/' class="post_tag button button_translucent" title="tdd">
          TDD
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/android/' class="post_tag button button_translucent" title="android">
          ANDROID
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/git/' class="post_tag button button_translucent" title="git">
          GIT
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/gtest/' class="post_tag button button_translucent" title="gtest">
          GTEST
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/js/' class="post_tag button button_translucent" title="js">
          JS
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/rust-lib/' class="post_tag button button_translucent" title="rust-lib">
          RUST-LIB
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/vcs/' class="post_tag button button_translucent" title="vcs">
          VCS
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/vim/' class="post_tag button button_translucent" title="vim">
          VIM
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/asm/' class="post_tag button button_translucent" title="asm">
          ASM
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/css/' class="post_tag button button_translucent" title="css">
          CSS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/database/' class="post_tag button button_translucent" title="database">
          DATABASE
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/gas/' class="post_tag button button_translucent" title="gas">
          GAS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/gcc/' class="post_tag button button_translucent" title="gcc">
          GCC
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/http/' class="post_tag button button_translucent" title="http">
          HTTP
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/libevent/' class="post_tag button button_translucent" title="libevent">
          LIBEVENT
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/macos/' class="post_tag button button_translucent" title="macos">
          MACOS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/react-native/' class="post_tag button button_translucent" title="react-native">
          REACT-NATIVE
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/redis/' class="post_tag button button_translucent" title="redis">
          REDIS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/%E6%9E%84%E6%9E%B6/' class="post_tag button button_translucent" title="构架">
          构架
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/api/' class="post_tag button button_translucent" title="api">
          API
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/bt/' class="post_tag button button_translucent" title="bt">
          BT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/c&#43;/' class="post_tag button button_translucent" title="c&#43;">
          C&#43;
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/coroutine/' class="post_tag button button_translucent" title="coroutine">
          COROUTINE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/docker/' class="post_tag button button_translucent" title="docker">
          DOCKER
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/endian/' class="post_tag button button_translucent" title="endian">
          ENDIAN
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/frontend/' class="post_tag button button_translucent" title="frontend">
          FRONTEND
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/gdb/' class="post_tag button button_translucent" title="gdb">
          GDB
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/go/' class="post_tag button button_translucent" title="go">
          GO
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/html/' class="post_tag button button_translucent" title="html">
          HTML
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/https/' class="post_tag button button_translucent" title="https">
          HTTPS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/jquery/' class="post_tag button button_translucent" title="jquery">
          JQUERY
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/ld/' class="post_tag button button_translucent" title="ld">
          LD
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/logger/' class="post_tag button button_translucent" title="logger">
          LOGGER
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/makefile/' class="post_tag button button_translucent" title="makefile">
          MAKEFILE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/misc/' class="post_tag button button_translucent" title="misc">
          MISC
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/orm/' class="post_tag button button_translucent" title="orm">
          ORM
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/os/' class="post_tag button button_translucent" title="os">
          OS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/process/' class="post_tag button button_translucent" title="process">
          PROCESS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/react/' class="post_tag button button_translucent" title="react">
          REACT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/rpm/' class="post_tag button button_translucent" title="rpm">
          RPM
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/rsa/' class="post_tag button button_translucent" title="rsa">
          RSA
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/server/' class="post_tag button button_translucent" title="server">
          SERVER
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/sqlalchemy/' class="post_tag button button_translucent" title="sqlalchemy">
          SQLALCHEMY
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/ssh/' class="post_tag button button_translucent" title="ssh">
          SSH
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/ssl/tls/' class="post_tag button button_translucent" title="ssl/tls">
          SSL/TLS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/vc/' class="post_tag button button_translucent" title="vc">
          VC
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/vite/' class="post_tag button button_translucent" title="vite">
          VITE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/vue/' class="post_tag button button_translucent" title="vue">
          VUE
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/webui/' class="post_tag button button_translucent" title="webui">
          WEBUI
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/wechat/' class="post_tag button button_translucent" title="wechat">
          WECHAT
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/win32/' class="post_tag button button_translucent" title="win32">
          WIN32
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/windows/' class="post_tag button button_translucent" title="windows">
          WINDOWS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/wireshark/' class="post_tag button button_translucent" title="wireshark">
          WIRESHARK
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://luoguochun.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/' class="post_tag button button_translucent" title="微服务">
          微服务
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
  </section>
</aside>

  
</div>
  </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing">
    <path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon">
    <path
    fill="#ffffff"
    d="m 15.054695,9.8859583 c -0.22611,1.1632697 -2.02517,2.4363497 -4.09138,2.6830797 -1.0774504,0.12856 -2.1382704,0.24673 -3.2694704,0.19484 -1.84996,-0.0848 -3.30971,-0.44157 -3.30971,-0.44157 0,0.1801 0.0111,0.35157 0.0333,0.51194 0.24051,1.82571 1.81034,1.93508 3.29737,1.98607 1.50088,0.0514 2.8373104,-0.37004 2.8373104,-0.37004 l 0.0617,1.35686 c 0,0 -1.0498104,0.56374 -2.9199404,0.66742 -1.03124,0.0567 -2.3117,-0.0259 -3.80308,-0.42069 -3.23454998,-0.85613 -3.79081998,-4.304 -3.87592998,-7.8024197 -0.026,-1.03871 -0.01,-2.01815 -0.01,-2.83732 0,-3.57732 2.34385998,-4.62587996 2.34385998,-4.62587996 1.18184,-0.54277 3.20976,-0.77101 5.318,-0.7882499985409 h 0.0518 C 9.8267646,0.01719834 11.856025,0.24547834 13.037775,0.78824834 c 0,0 2.34377,1.04855996 2.34377,4.62587996 0,0 0.0294,2.63937 -0.32687,4.47183"/>
 <path
    fill="#000000"
    d="m 12.616925,5.6916583 v 4.3315297 h -1.71607 V 5.8189683 c 0,-0.88624 -0.37289,-1.33607 -1.1187604,-1.33607 -0.82467,0 -1.23799,0.53361 -1.23799,1.58875 v 2.30122 h -1.70594 v -2.30122 c 0,-1.05514 -0.4134,-1.58875 -1.23808,-1.58875 -0.74587,0 -1.11876,0.44983 -1.11876,1.33607 v 4.2042197 h -1.71607 V 5.6916583 c 0,-0.88527 0.22541,-1.58876 0.67817,-2.10922 0.46689,-0.52047 1.07833,-0.78727 1.83735,-0.78727 0.87816,0 1.54317,0.33752 1.98288,1.01267 l 0.42744,0.71655 0.42753,-0.71655 c 0.43961,-0.67515 1.10463,-1.01267 1.9828704,-1.01267 0.75893,0 1.37037,0.2668 1.83735,0.78727 0.45268,0.52046 0.67808,1.22395 0.67808,2.10922"/>
  </symbol>
</svg>

<footer class="footer">
  <div class="footer_inner wrap pale">
    <img src='https://luoguochun.cn/icons/apple-touch-icon.png' class="icon icon_2 transparent" alt="BUF1024">
    <p>Copyright&nbsp;2011-&nbsp;<span class="year"></span>&nbsp;BUF1024. All Rights Reserved</p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <title>to-top</title>
  <use xlink:href="#to-top"></use>
</svg>

</a>

  </div>
</footer>

<script type="text/javascript" src="https://luoguochun.cn/zh-cn/js/bundle.d217df71f645eebea3db936c88283492d0217a45ec5ae8851eab518badc972cc35c99c079be4db983592b8f42fffe7850e623d855d22d0cdd5548500ac6d9558.js" integrity="sha512-0hffcfZF7r6j25NsiCg0ktAhekXsWuiFHqtRi63Jcsw1yZwHm&#43;TbmDWSuPQv/&#43;eFDmI9hV0i0M3VVIUArG2VWA==" crossorigin="anonymous"></script>
</body>

</html>