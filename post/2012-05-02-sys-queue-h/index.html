<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">




<title>sys/queue.h | BUF1024!!!</title>
<link rel="canonical" href="https://luoguochun.cn/post/2012-05-02-sys-queue-h/">
<meta name="description" content="概述 🔗sys/queue.h是LINUX/UNIX系统下面的一个标准头文件，用一系列的数据结构定义了一队列。包括singly-lined list, list," />
<meta property="og:type" content="article" />
<meta property="og:title" content="sys/queue.h | BUF1024!!!" />
<meta property="og:url" content="https://luoguochun.cn/post/2012-05-02-sys-queue-h/" />
<meta property="og:description" content="概述 🔗sys/queue.h是LINUX/UNIX系统下面的一个标准头文件，用一系列的数据结构定义了一队列。包括singly-lined list, list," />








<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

</head>

<body>
    <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="https://luoguochun.cn">BUF1024!!!</a>

        <nav class="menu">
            
                <div class="menu-item">
                    
                        <a href="/">主页</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/post/">文章</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/tags/">标签</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/categories/">分类</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/about/">关于</a>
                    
                </div>
            
        </nav>
    </div>
</header>

    <main class="main-wrapper">

        <div class="main">
            <div style="display: flex; flex-direction: column;"></div>
                

<section class="single">
    <h1 class="title">sys/queue.h</h1>

    <div class="tip">
        <time datetime="2012-05-02 21:08:14 &#43;0000 UTC">2012/05/02</time>
        <span class="split">·</span>
        <span> 2761 words </span>
        <span class="split">·</span>
        <span>
            6 minutes to read
        </span>
    </div>

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/linux">linux</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/c">c</a>
                
                    <a href="/tags/linux">linux</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <h3 id="概述">概述 <a href="#%e6%a6%82%e8%bf%b0" class="anchor">🔗</a></h3><p>sys/queue.h是LINUX/UNIX系统下面的一个标准头文件，用一系列的数据结构定义了一队列。包括singly-lined list, list, simple queue(Singly-linked Tail queue), tail queue, circle queue五种。</p>
<p>引用此头文件对这五种数据结构的描述：</p>
<blockquote>
<p>A singly-linked list is headed by a single forward pointer. The
elements are singly linked for minimum space and pointer manipulation
overhead at the expense of O(n) removal for arbitrary elements. New
elements can be added to the list after an existing element or at the
head of the list.  Elements being removed from the head of the list
should use the explicit macro for this purpose for optimum
efficiency. A singly-linked list may only be traversed in the forward
direction.  Singly-linked lists are ideal for applications with large
datasets and few or no removals or for implementing a LIFO queue.</p>
</blockquote>
<p>A list is headed by a single forward pointer (or an array of forward
pointers for a hash table header). The elements are doubly linked
so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before
or after an existing element or at the head of the list. A list
may only be traversed in the forward direction.</p>
<blockquote>
</blockquote>
<p>A simple queue is headed by a pair of pointers, one the head of the
list and the other to the tail of the list. The elements are singly
linked to save space, so elements can only be removed from the
head of the list. New elements can be added to the list after
an existing element, at the head of the list, or at the end of the
list. A simple queue may only be traversed in the forward direction.</p>
<blockquote>
</blockquote>
<p>A tail queue is headed by a pair of pointers, one to the head of the
list and the other to the tail of the list. The elements are doubly
linked so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before or
after an existing element, at the head of the list, or at the end of
the list. A tail queue may be traversed in either direction.</p>
<blockquote>
</blockquote>
<p>A circle queue is headed by a pair of pointers, one to the head of the
list and the other to the tail of the list. The elements are doubly
linked so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before or after
an existing element, at the head of the list, or at the end of the list.
A circle queue may be traversed in either direction, but has a more
complex end of list detection.</p>
<p>简单来说，即是单链表，双链表，单链队列，双向队列（尾队列）和双向循环队列。</p>
<p>虽然这是LINUX/UNIX里面的文件，但此文件本身没有用到LINUX/UNIX的系统特性，因而可以跨平台使用。</p>
<p>下面对各数据结构简单描述之。</p>
<h3 id="单链表singly-linked-list">单链表(singly-linked list) <a href="#%e5%8d%95%e9%93%be%e8%a1%a8singly-linked-list" class="anchor">🔗</a></h3><p>singly-linked list就是一单链表。</p>
<p>singly-linked list相关的定义：</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SLIST_HEAD(name, type)</td>
<td style="text-align:left">定义表头结点。 <!-- raw HTML omitted -->name: 表头结点名。<!-- raw HTML omitted -->type: 结点类型。</td>
</tr>
<tr>
<td>SLIST_HEAD_INITIALIZER(head)</td>
<td style="text-align:left">初始化头结点。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>SLIST_ENTRY(type)</td>
<td style="text-align:left">定义链表的链域。<!-- raw HTML omitted -->type: 结点类型。</td>
</tr>
</tbody>
</table>
<p>singly-linked list函数：</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SLIST_INIT(head)</td>
<td style="text-align:left">初始化头结点。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>SLIST_INSERT_AFTER(slistelm, elm, field)</td>
<td style="text-align:left">将结点elm插入到结点slistelm后面。 <!-- raw HTML omitted -->slistelm：链表中某结点。 <!-- raw HTML omitted -->elm:要插入的结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>SLIST_INSERT_HEAD(head, elm, field)</td>
<td style="text-align:left">将结点elm插入到头结点head后面。 <!-- raw HTML omitted -->head: 表头结点。<!-- raw HTML omitted -->elm:要插入的结点。<!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>SLIST_REMOVE_HEAD(head, field)</td>
<td style="text-align:left">移除将表头结点下面一个结点。 <!-- raw HTML omitted -->head: 表头结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>SLIST_REMOVE(head, elm, type, field)</td>
<td style="text-align:left">移除将elm结点，elm结点一定要是链表中一结点。 <!-- raw HTML omitted -->head: 表头结点。 <!-- raw HTML omitted -->elm:某结点。 <!-- raw HTML omitted -->type: 结点类型。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>SLIST_FOREACH(var, head, field)</td>
<td style="text-align:left">遍历链表，相当于for循环。 <!-- raw HTML omitted -->var: 结点类型的变量名称。 <!-- raw HTML omitted -->head: 表头结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
</tbody>
</table>
<p>singly-linked list 访问方法：</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SLIST_EMPTY(head)</td>
<td style="text-align:left">判断链表是否为空。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>SLIST_FIRST(head)</td>
<td style="text-align:left">访问链表里的第一个元素。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>SLIST_NEXT(elm, field)</td>
<td style="text-align:left">访问elm结点后一个元素。 <!-- raw HTML omitted -->elm:某结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
</tbody>
</table>
<p>简单例子：</p>
<pre><code>    struct SListItem
    {
        int data;
        SLIST_ENTRY(SListItem) entry;
    };
    /*
     struct SListItem
     {
        int data;
        struct {
            struct SListItem* sle_next;
        } entry;
     }
     */
    void slist_demo()
    {
        struct SListItem* item = NULL;
        SLIST_HEAD(SListHead, SListItem) shead;
        /*
         struct SListHead {
             struct SListItem* slh_first;
         } shead;
         */
        SLIST_INIT(&amp;shead);
    
        item = (struct SListItem*)malloc(sizeof(struct SListItem));
        item-&gt;data = 1;
    
        SLIST_INSERT_HEAD(&amp;shead, item, entry);
        /*
         item-&gt;entry.sle_next = (&amp;shead)-&gt;slh_first;
         (&amp;shead)-&gt;slh_first = item;
         */
    
        item = (struct SListItem*)malloc(sizeof(struct SListItem));
        item-&gt;data = 2;
    
        SLIST_INSERT_HEAD(&amp;shead, item, entry);
        /*
         item-&gt;entry.sle_next = (&amp;shead)-&gt;slh_first;
         (&amp;shead)-&gt;slh_first = item;
         */
    
        SLIST_FOREACH(item, &amp;shead, entry){
            printf(&quot;%d &quot;, item-&gt;data);
        }
        /*
         for(item = (&amp;shead)-&gt;slh_first; item; item = item-&gt;entry.sle_next){
            ...
         }
         */
        printf(&quot;\n&quot;);
    
        while(!SLIST_EMPTY(&amp;shead)){
            item = SLIST_FIRST(&amp;shead);
            printf(&quot;remove %d\n&quot;, item-&gt;data);
            SLIST_REMOVE(&amp;shead, item, SListItem, entry);
            free(item);
        }
        /*
         while(!((&amp;shead)-&gt;slh_first == NULL)){
             item = (&amp;shead)-&gt;slh_first;
             ...
             (&amp;shead)-&gt;slh_first = (&amp;shead)-&gt;slh_first-&gt;entry.sle_next;
             ...
         }
         */
    }
    /*结果
    2 1
    remove 2
    remove 1
    */
</code></pre>
<h3 id="双向链表list">双向链表(list) <a href="#%e5%8f%8c%e5%90%91%e9%93%be%e8%a1%a8list" class="anchor">🔗</a></h3><p>list就是双向链表，不过链域有点古怪，指向前一个结点是指针的指针。<br>
list 相关定义</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>LIST_HEAD(name, type)</td>
<td style="text-align:left">定义表头结点。 <!-- raw HTML omitted -->name: 表头结点名。 <!-- raw HTML omitted -->type: 结点类型。</td>
</tr>
<tr>
<td>LIST_HEAD_INITIALIZER(head)</td>
<td style="text-align:left">初始化头结点。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>LIST_ENTRY(type)</td>
<td style="text-align:left">定义链表的链域。 <!-- raw HTML omitted -->type: 结点类型。</td>
</tr>
</tbody>
</table>
<p>list函数</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>LIST_INIT(head)</td>
<td style="text-align:left">初始化头结点。 <!-- raw HTML omitted -->head: 表头结点</td>
</tr>
<tr>
<td>LIST_INSERT_AFTER(listelm, elm, field)</td>
<td style="text-align:left">将结点elm插入到结点listelm后面。 <!-- raw HTML omitted -->listelm：链表中某结点。 <!-- raw HTML omitted -->elm:要插入的结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>LIST_INSERT_BEFORE(listelm, elm, field)</td>
<td style="text-align:left">将结点elm插入到结点listelm前面。 <!-- raw HTML omitted -->listelm：链表中某结点。 <!-- raw HTML omitted -->elm:要插入的结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>LIST_INSERT_HEAD(head, elm, field)</td>
<td style="text-align:left">将结点elm插入到头结点head后面。 <!-- raw HTML omitted -->head: 表头结点。 <!-- raw HTML omitted -->elm:要插入的结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>LIST_REMOVE(elm, field)</td>
<td style="text-align:left">移除将elm结点。 <!-- raw HTML omitted -->elm:某结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
<tr>
<td>LIST_FOREACH(var, head, field)</td>
<td style="text-align:left">遍历链表，相当于for循环。 <!-- raw HTML omitted -->var: 结点类型的变量名称。 <!-- raw HTML omitted -->head: 表头结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
</tbody>
</table>
<p>list访问方法</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>LIST_EMPTY(head)</td>
<td style="text-align:left">判断链表是否为空。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>LIST_FIRST(head)</td>
<td style="text-align:left">访问链表里的第一个元素。 <!-- raw HTML omitted -->head: 表头结点。</td>
</tr>
<tr>
<td>LIST_NEXT(elm, field)</td>
<td style="text-align:left">访问elm结点后一个元素。 <!-- raw HTML omitted -->elm:某结点。 <!-- raw HTML omitted -->field:链表中链域的名称。</td>
</tr>
</tbody>
</table>
<p><em><strong>注意</strong></em>，因为list是双向链表，但在访问方法里没有写出访问前一个元素的宏。因而可以这样写一个，参数含义和LIST_NEXT一样：</p>
<pre><code>   #define LIST_PRE(elm, field) \
   (((elm)-&gt;field.le_pre) != &amp;elm ? *((elm)-&gt;field.le_pre) : NULL)  
</code></pre>
<p>简单例子:</p>
<pre><code>   struct ListItem
   {
       int data;
       LIST_ENTRY(ListItem) entry;
   };
   /*
   struct ListItem
   {
       int data;
       struct{
           struct ListItem* le_next;
           struct ListItem** le_prev;
       } entry;
   };
   */
   void list_demo()
   {
       struct ListItem* item = NULL;
       
       LIST_HEAD(ListHead, ListItem) lhead;
       /*
       struct ListHead {
           struct ListItem* lh_first;
       } lhead;
       */
       LIST_INIT(&amp;lhead);
       /*
       do{
            (&amp;lhead)-&gt;lh_first = NULL;
       }while(0);
       */
   
       item = (struct ListItem*)malloc(sizeof(struct ListItem));
       item-&gt;data = 1;
   
       LIST_INSERT_HEAD(&amp;lhead, item, entry);
       
       item = (struct ListItem*)malloc(sizeof(struct ListItem));
       item-&gt;data = 2;
       
       LIST_INSERT_HEAD(&amp;lhead, item, entry);
       /*
       do{
           if(((item)-&gt;entry.le_next = (&amp;lhead)-&gt;lh_first) != NULL)
               (&amp;lhead)-&gt;lh_first-&gt;entry.le_pre = &amp;(elm)-&gt;entry.le_next;
           (&amp;lhead)-&gt;lh_first = (item);
           (item)-&gt;entry.le_prev = &amp;(&amp;lhead)-&gt;lh_first;
       }while(0);
       */
       LIST_FOREACH(item, &amp;lhead, entry){
           printf(&quot;%d &quot;, item-&gt;data);
       }
       /*
       for ((item) = ((&amp;lhead)-&gt;lh_first);
           (item);
           (item) = ((item)-&gt;entry.le_next)){
           ...
       }    
       */
       printf(&quot;\n&quot;);
   
       while(!LIST_EMPTY(&amp;lhead)){
           item = LIST_FIRST(&amp;lhead);
           printf(&quot;remove %d\n&quot;, item-&gt;data);
           LIST_REMOVE(item, entry);
           free(item);
       }
       /*
       while(!((&amp;lhead)-&gt;lh_first == NULL)){
           item = ((&amp;lhead)-&gt;lh_first);
           ...
           do{
             if ((item)-&gt;entry.le_next != NULL)                \
               (item)-&gt;entry.le_next-&gt;entry.le_prev =             \
                   (item)-&gt;entry.le_prev;                \
             *(item)-&gt;entry.le_prev = (item)-&gt;entry.le_next;            \
           } while (0);
           ...
       }
       */
   }
   /*
   结果
   2 1
   remove 2
   remove 1
   */
</code></pre>
<h3 id="简单队列simple-queue">简单队列(simple queue) <a href="#%e7%ae%80%e5%8d%95%e9%98%9f%e5%88%97simple-queue" class="anchor">🔗</a></h3><p>简单来说，就是表对有两个链域，分别指向头和尾。<br>
simple queue 定义（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SIMPLEQ_HEAD(name, type)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_HEAD_INITIALIZER(head)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_ENTRY(type)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>simple queue函数（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SIMPLEQ_INIT(head)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_INSERT_HEAD(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_INSERT_TAIL(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_INSERT_AFTER(head, listelm, elm, field)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_REMOVE_HEAD(head, field)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_REMOVE(head, elm, type, field)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_FOREACH(var, head, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>simple queue方法（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SIMPLEQ_EMPTY(head)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_FIRST(head)</td>
<td></td>
</tr>
<tr>
<td>SIMPLEQ_NEXT(elm, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>简单例子：<br>
用法与list用法类似，不再重复。</p>
<h3 id="单链尾队列singled-linked-tail-queue">单链尾队列(singled-linked tail queue) <a href="#%e5%8d%95%e9%93%be%e5%b0%be%e9%98%9f%e5%88%97singled-linked-tail-queue" class="anchor">🔗</a></h3><p>这个和Simple queue是一样的，参考simple queue<br>
singled-linked tail queue定义(具体说明不再写，可以参考list的，或者就直接展开宏)</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>STAILQ_HEAD(name, type)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_HEAD_INITIALIZER(head)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_ENTRY(type)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>tail queue 函数（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>STAILQ_INIT(head)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_INSERT_HEAD(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_INSERT_TAIL(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_INSERT_AFTER(head, listelm, elm, field)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_REMOVE_HEAD(head, field)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_REMOVE(head, elm, type, field)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_FOREACH(var, head, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>tail queue方法（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>STAILQ_EMPTY(head)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_FIRST(head)</td>
<td></td>
</tr>
<tr>
<td>STAILQ_NEXT(elm, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>简单例子：<br>
用法与list用法类似，不再重复。</p>
<h3 id="循环队列circle-queue">循环队列(circle queue) <a href="#%e5%be%aa%e7%8e%af%e9%98%9f%e5%88%97circle-queue" class="anchor">🔗</a></h3><p>循环队列。<br>
circle queue定义（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CIRCLEQ_HEAD(name, type)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_HEAD_INITIALIZER(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_ENTRY(type)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>circle queue函数（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CIRCLEQ_INIT(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_INSERT_AFTER(head, listelm, elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_INSERT_BEFORE(head, listelm, elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_INSERT_HEAD(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_INSERT_TAIL(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_REMOVE(head, elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_REPLACE(head, elm, elm2, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>circle queue访问方法（具体说明不再写，可以参考list的，或者就直接展开宏）</p>
<table>
<thead>
<tr>
<th>宏定义</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CIRCLEQ_FIRST(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_LAST(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_END(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_NEXT(elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_PREV(elm, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_EMPTY(head)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_FOREACH(var, head, field)</td>
<td></td>
</tr>
<tr>
<td>CIRCLEQ_FOREACH_REVERSE(var, head, field)</td>
<td style="text-align:left"><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<p>简单例子：<br>
用法与list用法类似，不再重复。</p>
<h2 id="小结">小结 <a href="#%e5%b0%8f%e7%bb%93" class="anchor">🔗</a></h2><p>&amp;emsp虽然这是linux/unix实现的经过长时间考验的成熟的数据结构，但是如果不是很熟悉的话，第一次用起来还是感觉挺不习惯的。但是好在各个数据结构的定义和方法都非常类似，接口比较统一，如果用多的了，熟悉了，感觉就不错了。</p>

    </div>

    
</section>


                <hr>
                

<div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2012-05-02 21:08:14 \u002b0000 UTC',
        title: 'sys\/queue.h',
        clientID: '72786bf87c19beec6abe',
        clientSecret: '93ce647699b49ea6434332d36b0122a4ad8281ad',
        repo: 'buf1024.github.io',
        owner: 'buf1024',
        admin: ['buf1024'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

            </div>
        </div>

        <div class="side">
            
            <div class="side-recent">
    <h2 class="side-title">
        <a href="/post/">Recent Post</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/post/2024-01-08-%E5%89%8D%E7%AB%AF%E4%BF%9D%E5%A7%86%E7%BA%A7%E9%85%8D%E7%BD%AE/">前端保姆级配置</a>
            </li>
        
            <li>
                <a href="/post/2023-12-26-rust-proc-macro/">rust 过程宏</a>
            </li>
        
            <li>
                <a href="/post/2023-09-21-rust-panic/">一行代码让 rustc panic</a>
            </li>
        
            <li>
                <a href="/post/2023-07-19-flutter-muti-window/">Flutter 桌面端多窗口支持</a>
            </li>
        
            <li>
                <a href="/post/2023-07-04-hiqradio/">hiqradio 一个简单的收音机软件</a>
            </li>
        
    </ul>
</div>

            
            <div class="side-recent">
    <h2 class="side-title">
        <a href="/talib-doc/">Recent Talib doc</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/talib-doc/func_groups/math_operators/">16 数学运算符(Math Operator Functions )</a>
            </li>
        
            <li>
                <a href="/talib-doc/func_groups/math_transform/">15 数学变换(Math Transform Functions)</a>
            </li>
        
            <li>
                <a href="/talib-doc/func_groups/statistic_functions/">14 统计功能(Statistic Functions)</a>
            </li>
        
            <li>
                <a href="/talib-doc/func_groups/pattern_recognition/">13 形态识别(Pattern Recognition Functions)</a>
            </li>
        
            <li>
                <a href="/talib-doc/func_groups/cycle_indicators/">12 周期指标(Cycle Indicator Functions)</a>
            </li>
        
    </ul>
</div>

            
            <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/android">android(1)</a>
            </li>
        
            <li>
                <a href="/categories/app">app(1)</a>
            </li>
        
            <li>
                <a href="/categories/asm">asm(2)</a>
            </li>
        
            <li>
                <a href="/categories/c">c(6)</a>
            </li>
        
            <li>
                <a href="/categories/django">django(1)</a>
            </li>
        
            <li>
                <a href="/categories/flutter">flutter(7)</a>
            </li>
        
            <li>
                <a href="/categories/frontend">frontend(1)</a>
            </li>
        
            <li>
                <a href="/categories/gcc">gcc(2)</a>
            </li>
        
            <li>
                <a href="/categories/gdb">gdb(1)</a>
            </li>
        
            <li>
                <a href="/categories/git">git(2)</a>
            </li>
        
            <li>
                <a href="/categories/go">go(1)</a>
            </li>
        
            <li>
                <a href="/categories/http">http(1)</a>
            </li>
        
            <li>
                <a href="/categories/https">https(1)</a>
            </li>
        
            <li>
                <a href="/categories/linux">linux(7)</a>
            </li>
        
            <li>
                <a href="/categories/mac">mac(1)</a>
            </li>
        
            <li>
                <a href="/categories/misc">misc(9)</a>
            </li>
        
            <li>
                <a href="/categories/multi_window">multi_window(1)</a>
            </li>
        
            <li>
                <a href="/categories/orm">orm(1)</a>
            </li>
        
            <li>
                <a href="/categories/os">os(2)</a>
            </li>
        
            <li>
                <a href="/categories/python">python(4)</a>
            </li>
        
            <li>
                <a href="/categories/reactjs">reactjs(3)</a>
            </li>
        
            <li>
                <a href="/categories/rust">rust(6)</a>
            </li>
        
            <li>
                <a href="/categories/ssh">ssh(1)</a>
            </li>
        
            <li>
                <a href="/categories/tcp">tcp(6)</a>
            </li>
        
            <li>
                <a href="/categories/tdd">tdd(1)</a>
            </li>
        
            <li>
                <a href="/categories/unittest">unittest(2)</a>
            </li>
        
            <li>
                <a href="/categories/vcs">vcs(1)</a>
            </li>
        
            <li>
                <a href="/categories/vim">vim(3)</a>
            </li>
        
            <li>
                <a href="/categories/web">web(2)</a>
            </li>
        
            <li>
                <a href="/categories/webui">webui(1)</a>
            </li>
        
            <li>
                <a href="/categories/windows">windows(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%94%B6%E9%9F%B3%E6%9C%BA">收音机(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%9E%84%E6%9E%B6">构架(3)</a>
            </li>
        
            <li>
                <a href="/categories/%E9%87%8F%E5%8C%96">量化(2)</a>
            </li>
        
    </ul>
</div>

            <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/android">android (3)</a>
            </li>
        
            <li>
                <a href="/tags/asm">asm (2)</a>
            </li>
        
            <li>
                <a href="/tags/bt">bt (1)</a>
            </li>
        
            <li>
                <a href="/tags/c">c (20)</a>
            </li>
        
            <li>
                <a href="/tags/c&#43;&#43;">c&#43;&#43; (1)</a>
            </li>
        
            <li>
                <a href="/tags/coroutine">coroutine (1)</a>
            </li>
        
            <li>
                <a href="/tags/css">css (2)</a>
            </li>
        
            <li>
                <a href="/tags/django">django (1)</a>
            </li>
        
            <li>
                <a href="/tags/flutter">flutter (6)</a>
            </li>
        
            <li>
                <a href="/tags/frontend">frontend (1)</a>
            </li>
        
            <li>
                <a href="/tags/gas">gas (2)</a>
            </li>
        
            <li>
                <a href="/tags/gcc">gcc (2)</a>
            </li>
        
            <li>
                <a href="/tags/gdb">gdb (1)</a>
            </li>
        
            <li>
                <a href="/tags/git">git (3)</a>
            </li>
        
            <li>
                <a href="/tags/go">go (1)</a>
            </li>
        
            <li>
                <a href="/tags/gtest">gtest (3)</a>
            </li>
        
            <li>
                <a href="/tags/html">html (1)</a>
            </li>
        
            <li>
                <a href="/tags/http">http (2)</a>
            </li>
        
            <li>
                <a href="/tags/https">https (1)</a>
            </li>
        
            <li>
                <a href="/tags/javascript">javascript (1)</a>
            </li>
        
            <li>
                <a href="/tags/jquery">jquery (1)</a>
            </li>
        
            <li>
                <a href="/tags/js">js (2)</a>
            </li>
        
            <li>
                <a href="/tags/libevent">libevent (1)</a>
            </li>
        
            <li>
                <a href="/tags/linux">linux (10)</a>
            </li>
        
            <li>
                <a href="/tags/mac">mac (1)</a>
            </li>
        
            <li>
                <a href="/tags/makefile">makefile (1)</a>
            </li>
        
            <li>
                <a href="/tags/minix3">minix3 (2)</a>
            </li>
        
            <li>
                <a href="/tags/misc">misc (1)</a>
            </li>
        
            <li>
                <a href="/tags/orm">orm (1)</a>
            </li>
        
            <li>
                <a href="/tags/os">os (2)</a>
            </li>
        
            <li>
                <a href="/tags/proc">proc (1)</a>
            </li>
        
            <li>
                <a href="/tags/python">python (7)</a>
            </li>
        
            <li>
                <a href="/tags/react-native">react-native (2)</a>
            </li>
        
            <li>
                <a href="/tags/redis">redis (2)</a>
            </li>
        
            <li>
                <a href="/tags/rpm">rpm (1)</a>
            </li>
        
            <li>
                <a href="/tags/rsa">rsa (1)</a>
            </li>
        
            <li>
                <a href="/tags/rust">rust (3)</a>
            </li>
        
            <li>
                <a href="/tags/rust-lib">rust-lib (3)</a>
            </li>
        
            <li>
                <a href="/tags/server">server (1)</a>
            </li>
        
            <li>
                <a href="/tags/sqlalchemy">sqlalchemy (1)</a>
            </li>
        
            <li>
                <a href="/tags/ssh">ssh (1)</a>
            </li>
        
            <li>
                <a href="/tags/ssl/tls">ssl/tls (1)</a>
            </li>
        
            <li>
                <a href="/tags/tcp">tcp (7)</a>
            </li>
        
            <li>
                <a href="/tags/tcp-optition">tcp-optition (1)</a>
            </li>
        
            <li>
                <a href="/tags/tcpdump">tcpdump (1)</a>
            </li>
        
            <li>
                <a href="/tags/tdd">tdd (2)</a>
            </li>
        
            <li>
                <a href="/tags/tidbit">tidbit (1)</a>
            </li>
        
            <li>
                <a href="/tags/vc">vc (1)</a>
            </li>
        
            <li>
                <a href="/tags/vcs">vcs (3)</a>
            </li>
        
            <li>
                <a href="/tags/vim">vim (3)</a>
            </li>
        
            <li>
                <a href="/tags/vite">vite (1)</a>
            </li>
        
            <li>
                <a href="/tags/webui">webui (1)</a>
            </li>
        
            <li>
                <a href="/tags/win32">win32 (1)</a>
            </li>
        
            <li>
                <a href="/tags/wireshark">wireshark (1)</a>
            </li>
        
            <li>
                <a href="/tags/%E6%9E%84%E6%9E%B6">构架 (2)</a>
            </li>
        
            <li>
                <a href="/tags/%E9%87%8F%E5%8C%96">量化 (2)</a>
            </li>
        
            <li>
                <a href="/tags/%E6%94%B6%E9%9F%B3%E6%9C%BA">收音机 (1)</a>
            </li>
        
            <li>
                <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1">微服务 (1)</a>
            </li>
        
            <li>
                <a href="/tags/%E5%BE%AE%E4%BF%A1">微信 (1)</a>
            </li>
        
    </ul>
</div>

        </div>
    </main>
    <div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        id: '2012-05-02 21:08:14 \u002b0000 UTC',
        title: 'sys\/queue.h',
        clientID: '72786bf87c19beec6abe',
        clientSecret: '93ce647699b49ea6434332d36b0122a4ad8281ad',
        repo: 'buf1024.github.io',
        owner: 'buf1024',
        admin: ['buf1024'],
        body: decodeURI(location.href)
    });
    gitalk.render('gitalk-container');
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by
        gitalk.</a></noscript>

    

    
</body>

</html>