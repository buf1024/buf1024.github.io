<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>c on BUF1024!!!</title>
    <link>https://luoguochun.cn/tags/c/</link>
    <description>Recent content in c on BUF1024!!!</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 03 Jun 2017 11:19:25 +0800</lastBuildDate><atom:link href="https://luoguochun.cn/tags/c/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>çº¿ç¨‹åŒæ­¥ä¸åŸå­å˜é‡</title>
      <link>https://luoguochun.cn/post/2017-06-03-synchronize-atomic-variable/</link>
      <pubDate>Sat, 03 Jun 2017 11:19:25 +0800</pubDate>
      
      <guid>https://luoguochun.cn/post/2017-06-03-synchronize-atomic-variable/</guid>
      <description>&lt;p&gt;æ— è®ºæ˜¯åŸºäºå¤šçº¿ç¨‹è¿˜æ˜¯å¤šè¿›ç¨‹å¹¶å‘çš„ç¨‹åºï¼ŒåŒæ­¥æ§åˆ¶æ€»æ˜¯ä¸å¯é¿å…çš„ã€‚æŒ‰ç…§è‡ªå·±çš„æ€ç»´å’Œä½¿ç”¨ä¹ æƒ¯ï¼Œè‡ªç„¶ä¼šæƒ³åˆ°çš„æ˜¯äº’æ–¥é‡(mutext)å’Œè‡ªæ—‹é”(spin lock)ï¼Œå½“ç„¶åŒæ­¥çš„æ–¹å¼ä¸åªè¿™ä¸¤ç§ã€‚gccæä¾›äº†ï¼Œ&lt;code&gt;__sync_*&lt;/code&gt;ç³»åˆ—çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå¯¹&lt;strong&gt;åŸºæœ¬æ•°æ®ç±»å‹&lt;/strong&gt;çš„åŸå­æ“ä½œã€‚&lt;code&gt;__sync_*&lt;/code&gt;é’ˆå¯¹çš„æ˜¯c/c++çš„&lt;strong&gt;åŸºæœ¬æ•°æ®ç±»å‹&lt;/strong&gt;ï¼Œè€Œäº’æ–¥é‡å’Œè‡ªæ—‹é”å¯ä»¥ç”¨äºä»£ç å—çš„åŒæ­¥ï¼Œå½“ç„¶ï¼Œä¹Ÿä¸æ˜¯è¯´&lt;code&gt;__sync_*&lt;/code&gt;ä¸èƒ½ç”¨äºä»£ç å—çš„åŒæ­¥æ§åˆ¶ï¼Œåªéœ€è¦ä¸€ç‚¹ç‚¹çš„æŠ€å·§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ’¸&lt;code&gt;__sync_*&lt;/code&gt;ç³»åˆ—å‡½æ•°ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ä¸€ä¸¢ä¸¢å¹¶å‘ç¨‹åºæ˜“å¿½ç•¥çš„æŠ€å·§ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬å¸Œæœ›çº¿ç¨‹çš„è°ƒåº¦çº§åˆ«å’Œç³»ç»Ÿæ™®é€šè¿›ç¨‹çš„è°ƒåº¦çº§åˆ«ä¸€æ ·çš„ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨cpuçš„cacheç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›æ¯æ¬¡ç³»ç»Ÿè°ƒåº¦æ—¶éƒ½ç»‘å®šåˆ°åŒä¸€ä¸ªcpuä¸­æ‰§è¡Œã€‚å‰è€…ï¼Œå·²ç»ä½¿ç”¨è¿‡äº†ï¼š&lt;code&gt;pthread_attr_setscope(&amp;amp;attr, PTHREAD_SCOPE_SYSTEM)&lt;/code&gt;ï¼Œåè€…ï¼Œå«cpuäº²å’Œæ€§ï¼ˆä¹Ÿæœ‰å«äº²ç¼˜æ€§ï¼Œè‹±æ–‡ï¼šaffinityï¼‰ï¼Œç”¨åˆ°çš„apiä¸»è¦æœ‰ï¼š&lt;code&gt;sched_setaffinity&lt;/code&gt; å’Œ &lt;code&gt;sched_getaffinity&lt;/code&gt;ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯æŒºç®€å•çš„ï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// çº¿ç¨‹/è¿›ç¨‹èµ·æ¥å
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nf&#34;&gt;CPU_ZERO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;CPU_SET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;proc_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;sched_setaffinity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;gettid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;cpu_set_t&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å†çœ‹çœ‹ä¹ æƒ¯æ€ç»´çš„åŒæ­¥å·¥å…·ï¼Œäº’æ–¥é”ï¼ˆmutextï¼‰å’Œè‡ªæ—‹é”(spin lock)çš„åŒºåˆ«ã€‚äº’æ–¥é”æ˜¯sleep-waitingç±»å‹çš„é”ï¼Œä¾‹å¦‚ï¼Œåœ¨å¤šæ ¸çš„ç¯å¢ƒä¸­ï¼ŒAçº¿ç¨‹å¦‚æœå°è¯•å¯¹Bçº¿ç¨‹è¿›è¡ŒåŠ äº’æ–¥é”ï¼Œå¦‚æœäº’æ–¥é”å·²ç»è¢«Bçº¿ç¨‹å ç”¨ï¼Œé‚£ä¹ˆAçº¿ç¨‹å°±ä¼šè¿›å…¥ç­‰ç­‰çŠ¶æ€ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šå¯¹Açº¿ç¨‹è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢(conext switch)ï¼Œè®©å‡ºCPUä½¿ç”¨æƒï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢(conext switch)æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œçš„ã€‚è€Œè‡ªæ—‹é”çš„å¤„ç†æ–¹å¼åˆ™ä¸ä¼šè¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè€Œæ˜¯è®©cpuä¸æ–­çš„è½®è¯¢çš„è·å–é”ã€‚è‡ªæ—‹é”çš„CPUè½®è¯¢å’Œäº’æ–¥é”çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åŒæ ·æ˜¯è€—æ€§èƒ½çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ‰é™æ—¶é—´å†…çš„CPUè½®è¯¢æ¯”äº’æ–¥é”çš„ä¸Šä¸‹æ–‡åˆ‡æ¢è½»é‡å¤ªå¤šäº†ã€‚é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨äº’æ–¥é”ï¼ˆmutextï¼‰å’Œè‡ªæ—‹é”(spin lock)å‘¢ï¼Œæœ‰äººæ€»ç»“è¯´ï¼Œå°½ç®¡äº’æ–¥é”æ¶ˆè€—çš„èµ„æºç›¸å¯¹å¤šï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ï¼Œä½†äº’æ–¥é”æ˜¯é€‚ç”¨æƒ…å†µè¿˜æ˜¯æ¯”è¾ƒå¹¿ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æ˜¯é€‰æ‹©äº’æ–¥é”ï¼Œåœ¨éœ€è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–/æˆ–è€…çŸ¥é“é”ä»£ç å—è¿è¡Œæ—¶é—´çš„æƒ…å†µä¸‹ï¼Œæ‰è€ƒè™‘è‡ªæ—‹é”ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–æåŠä¸€ä¸‹ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡ã€‚è¿™ä¸ªåœ¨å…¶ä»–è¯­è¨€æ˜¯æœ‰è¿™ä¸ªæ¦‚å¿µçš„ï¼ŒC/C++ä¹Ÿæ˜¯æœ‰ï¼Œä½†æ˜¯ç»å¸¸å®¹æ˜“å¿½ç•¥ã€‚çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œä½¿ç”¨&lt;code&gt;__thread&lt;/code&gt;ä¿®é¥°ï¼Œä½¿ç”¨æ—¶æœ‰å±€é™æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__thread&lt;/code&gt;å¯ä»¥ä¿®é¥°å…¨å±€å˜é‡ã€å‡½æ•°çš„é™æ€å˜é‡ï¼Œä½†æ˜¯æ— æ³•ä¿®é¥°å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;è¢«&lt;code&gt;__thread&lt;/code&gt;ä¿®é¥°çš„å˜é‡åªèƒ½åœ¨ç¼–è¯‘æœŸåˆå§‹åŒ–ï¼Œä¸”åªèƒ½é€šè¿‡å¸¸é‡è¡¨è¾¾å¼æ¥åˆå§‹åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬æ­£å¼çœ‹ä¸€ä¸‹gccæä¾›çš„åŸå­æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_add&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_sub&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_or&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_and&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_xor&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_fetch_and_nand&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_add_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_sub_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_or_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_and_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_xor_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_nand_and_fetch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_bool_compare_and_swap&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldval&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_val_compare_and_swap&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;oldval&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;__sync_synchronize&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_lock_test_and_set&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_lock_release&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;__sync_*&lt;/code&gt;ç³»åˆ—å‡½æ•°æ“ä½œçš„æ•°æ®éƒ½æ˜¯åŸå§‹çš„æ•°æ®ç±»å‹ï¼Œä»åå­—çœ‹ï¼Œå¾ˆå®¹æ˜“çŒœå‡ºå®ƒä»¬çš„ç”¨é€”ã€‚æœ€åä¸‰ä¸ªä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œæ˜¯å†…å­˜å£å’çš„å«ä¹‰ï¼Œç°ä»£CPUéƒ½æ˜¯ä¹±åºæ‰§è¡Œçš„ï¼Œæœ‰äº›æƒ…å†µä¸‹ä¹±åºæ‰§è¡Œä¼šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦é¡ºåºæ‰§è¡Œï¼Œè¿™å°±æ˜¯è¿™ä¸‰ä¸ªå‡½æ•°çš„ç”¨å¤„ã€‚æœ€å¼€å§‹è¯´è¿‡ï¼Œ&lt;code&gt;__sync_*&lt;/code&gt;ç”¨äºä»£ç å—çš„åŒæ­¥æ§åˆ¶ï¼Œéœ€è¦ä¸€ä¸¢ä¸¢çš„æŠ€å·§ã€‚æ¯”å¦‚ç”¨äºä»£ç å—çš„å°è£…:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define trylock(lock)  (*(lock) == 0 &amp;amp;&amp;amp; __sync_bool_compare_and_swap(lock, 0, 1))
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define unlock(lock)    *(lock) = 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;trylock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šé¢è¯´è‡ªæ—‹é”é”è¢«å ç”¨æ—¶ï¼Œç©ºè€—CPUï¼Œä½¿ç”¨åŸå­å˜é‡ï¼Œå¯ä»¥è¿›è¡Œä¸€å®šç¨‹åº¦çš„ä¼˜åŒ–ï¼Œå’ŒåŸæ¥çš„è‡ªæ—‹é”çš„ä¼˜åŒ–æ˜¯ï¼Œè‡ªæ—‹ä¸€å®šæ¬¡æ•°åï¼Œä¸»åŠ¨äº¤å‡ºCPUçš„æ§åˆ¶æƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;spinlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;spin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;ngx_uint_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_bool_compare_and_swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ncpu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// ncpu CPUä¸ªæ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;spin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;c1&#34;&gt;// cpu_pause(); ç©ºè½¬
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__sync_bool_compare_and_swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;sched_yield&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// åªæ—‹ä¸€ä¸ªå‘¨æœŸï¼Œæ²¡æœ‰è·å–åˆ°é”ï¼Œé€€å‡ºCPUæ§åˆ¶æƒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­£å¸¸çš„åº”ç”¨ä¸šåŠ¡æˆ–è®¸ä¸ä¼šç”¨åˆ°&lt;code&gt;__sync_*&lt;/code&gt;ç³»åˆ—å‡½æ•°ï¼Œä½†å¦‚æœä½¿ç”¨äº†æ— ç–‘å¯ä»¥è¿›ä¸€æ­¥æé«˜å•ä¸ªåº”ç”¨çš„æ€§èƒ½ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>GCCä¸å¸¸è§ï¼Œä½†æœ‰ç”¨ç‰¹åˆ«é€‰é¡¹</title>
      <link>https://luoguochun.cn/post/2017-05-01-gcc-missing/</link>
      <pubDate>Mon, 01 May 2017 22:10:31 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2017-05-01-gcc-missing/</guid>
      <description>&lt;p&gt;-isystem dir&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Search dir for header files, after all directories specified by -I but before the

       standard system directories.  Mark it as a system directory, so that it gets the same

       special treatment as is applied to the standard system directories.  If dir begins

       with &amp;quot;=&amp;quot;, then the &amp;quot;=&amp;quot; will be replaced by the sysroot prefix; see --sysroot and

       -isysroot.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ ‡è®° DIR ä¸ºç³»ç»ŸDIRï¼Œæœç´¢å¤´æ–‡ä»¶é¡ºåºï¼š 1. -Iè·¯å¾„ 2. -isystem DIR 3. ç³»ç»Ÿè·¯å¾„&lt;/p&gt;
&lt;p&gt;&amp;ndash;sysroot=dir&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Use dir as the logical root directory for headers and libraries.  For example, if the

       compiler normally searches for headers in /usr/include and libraries in /usr/lib, it

       instead searches dir/usr/include and dir/usr/lib.

       If you use both this option and the -isysroot option, then the --sysroot option

       applies to libraries, but the -isysroot option applies to header files.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ ‡è®°DIRä¸ºå¤´æ–‡ä»¶çš„æ ¹ç›®å½•&lt;/p&gt;
&lt;p&gt;-static&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       On systems that support dynamic linking, this prevents linking with the shared libraries.

       On other systems, this option has no effect.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é“¾æ¥é™æ€åº“&lt;/p&gt;
&lt;p&gt;-M&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;      Instead of outputting the result of preprocessing, output a rule suitable for make describing the dependencies of the main source file.

      The preprocessor outputs one make rule containing the object file name for that source file, a colon, and the names of all the included files,

      including those coming from -include or -imacros command line options.

      Unless specified explicitly (with -MT or -MQ), the object file name consists of the name of the source file with any suffix replaced with object

      file suffix and with any leading directory parts  removed.  If there are many included files then the rule is split into several lines using \-newline.

      The rule has no commands.

      This option does not suppress the preprocessor&#39;s debug output, such as -dM.  To avoid mixing such debug output with the dependency

      rules you should explicitly specify the dependency output file

       with -MF, or use an environment variable like DEPENDENCIES_OUTPUT.  Debug output will still be sent to the regular output stream as normal.

       Passing -M to the driver implies -E, and suppresses warnings with an implicit -w.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç”Ÿä¾èµ–æ–‡ä»¶ï¼Œ-E ä¸ºé¢„ç¼–è¯‘ï¼Œå’Œ-MF â€œæ–‡ä»¶â€ï¼Œç”Ÿäº§ä¾èµ–åˆ°æ–‡ä»¶ï¼Œ-MDç”Ÿäº§ä¾èµ–åˆ°ï¼ŒXXX.dæ–‡ä»¶ï¼Œä»¥ä¸Šæ‰€æè¿°å‡ ä¸ªï¼Œå‡ä¸ºåŠ å¿«ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;-O&lt;/p&gt;
&lt;p&gt;-O1 Optimize.  Optimizing compilation takes somewhat more time, and a lot more memory for&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       a large function.

       With -O, the compiler tries to reduce code size and execution time, without performing

       any optimizations that take a great deal of compilation time.

       -O turns on the following optimization flags:

       -fauto-inc-dec -fcompare-elim -fcprop-registers -fdce -fdefer-pop -fdelayed-branch

       -fdse -fguess-branch-probability -fif-conversion2 -fif-conversion -fipa-pure-const

       -fipa-profile -fipa-reference -fmerge-constants -fsplit-wide-types -ftree-bit-ccp

       -ftree-builtin-call-dce -ftree-ccp -ftree-ch -ftree-copyrename -ftree-dce

       -ftree-dominator-opts -ftree-dse -ftree-forwprop -ftree-fre -ftree-phiprop -ftree-slsr

       -ftree-sra -ftree-pta -ftree-ter -funit-at-a-time

       -O also turns on -fomit-frame-pointer on machines where doing so does not interfere

       with debugging.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-O2 Optimize even more.  GCC performs nearly all supported optimizations that do not&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       involve a space-speed tradeoff.  As compared to -O, this option increases both

       compilation time and the performance of the generated code.

       -O2 turns on all optimization flags specified by -O.  It also turns on the following

       optimization flags: -fthread-jumps -falign-functions  -falign-jumps -falign-loops

       -falign-labels -fcaller-saves -fcrossjumping -fcse-follow-jumps  -fcse-skip-blocks

       -fdelete-null-pointer-checks -fdevirtualize -fexpensive-optimizations -fgcse

       -fgcse-lm -fhoist-adjacent-loads -finline-small-functions -findirect-inlining

       -fipa-sra -foptimize-sibling-calls -fpartial-inlining -fpeephole2 -fregmove

       -freorder-blocks  -freorder-functions -frerun-cse-after-loop -fsched-interblock

       -fsched-spec -fschedule-insns  -fschedule-insns2 -fstrict-aliasing -fstrict-overflow

       -ftree-switch-conversion -ftree-tail-merge -ftree-pre -ftree-vrp

       Please note the warning under -fgcse about invoking -O2 on programs that use computed

       gotos.

       NOTE: In Ubuntu 8.10 and later versions, -D_FORTIFY_SOURCE=2 is set by default, and is

       activated when -O is set to 2 or higher.  This enables additional compile-time and

       run-time checks for several libc functions.  To disable, specify either

       -U_FORTIFY_SOURCE or -D_FORTIFY_SOURCE=0.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-O3 Optimize yet more.  -O3 turns on all optimizations specified by -O2 and also turns on&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       the -finline-functions, -funswitch-loops, -fpredictive-commoning, -fgcse-after-reload,

       -ftree-vectorize, -fvect-cost-model, -ftree-partial-pre and -fipa-cp-clone options.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-O0 Reduce compilation time and make debugging produce the expected results.  This is the&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       default.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-Os Optimize for size.  -Os enables all -O2 optimizations that do not typically increase&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       code size.  It also performs further optimizations designed to reduce code size.

       -Os disables the following optimization flags: -falign-functions  -falign-jumps

       -falign-loops -falign-labels  -freorder-blocks  -freorder-blocks-and-partition

       -fprefetch-loop-arrays  -ftree-vect-loop-version
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-Ofast&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Disregard strict standards compliance.  -Ofast enables all -O3 optimizations.  It also

       enables optimizations that are not valid for all standard-compliant programs.  It

       turns on -ffast-math and the Fortran-specific -fno-protect-parens and -fstack-arrays.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-Og Optimize debugging experience.  -Og enables optimizations that do not interfere with&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       debugging. It should be the optimization level of choice for the standard edit-

       compile-debug cycle, offering a reasonable level of optimization while maintaining

       fast compilation and a good debugging experience.

       If you use multiple -O options, with or without level numbers, the last such option is

       the one that is effective.

      ä¼˜åŒ–ç­‰çº§
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-fstack-protector&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Emit extra code to check for buffer overflows, such as stack smashing attacks.  This

       is done by adding a guard variable to functions with vulnerable objects.  This

       includes functions that call &amp;quot;alloca&amp;quot;, and functions with buffers larger than 8 bytes.

       The guards are initialized when a function is entered and then checked when the

       function exits.  If a guard check fails, an error message is printed and the program

       exits

       æ£€æŸ¥æ ˆæº¢å‡ºï¼Œç›¸åçš„      -fno-stack-protector
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-nostdinc&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Do not search the standard system directories for header files.  Only the directories

       you have specified with -I options (and the directory of the current file, if

       appropriate) are searched.

       ä¸ä½¿ç”¨æ ‡å‡†Cå¤´æ–‡ä»¶
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-nostdinc++&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Do not search for header files in the C++-specific standard directories, but do still

       search the other standard directories.  (This option is used when building the C++

       library.)

      ä¸ä½¿ç”¨æ ‡å‡†C++å¤´æ–‡ä»¶
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-Wall&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       This enables all the warnings about constructions that some users consider

       questionable, and that are easy to avoid (or modify to prevent the warning), even in

       conjunction with macros.  This also enables some language-specific warnings described

       in C++ Dialect Options and Objective-C and Objective-C++ Dialect Options.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ‰“å¼€è­¦å‘Šï¼ˆå¹¶éæ‰€æœ‰ï¼‰ï¼Œæ‰“å¼€ç»å¤§éƒ¨åˆ†ï¼Œè¿˜è¦åŠ -Wextral&lt;/p&gt;
&lt;p&gt;-Wextra&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       This enables some extra warning flags that are not enabled by -Wall. (This option used

       to be called -W.  The older name is still supported, but the newer name is more

       descriptive.)

       æ‰“å¼€é¢å¤–çš„è­¦å‘Šï¼ŒåŒ-Wï¼ˆæ—§åï¼‰
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;-Werror&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Make all warnings into hard errors.  Source code which triggers warnings will be

       rejected.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è­¦å‘Šå³æŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;-w  Suppress all warnings, including those which GNU CPP issues by default.&lt;/p&gt;
&lt;p&gt;å…³é—­æ‰€æœ‰çš„é”™è¯¯è­¦å‘Š&lt;/p&gt;
&lt;p&gt;-Wa,option&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;       Pass option as an option to the assembler.  If option contains commas, it is split

       into multiple options at the commas
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¼ é€‰é¡¹ç»™æ±‡ç¼–å™¨&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>lwan http æœåŠ¡å™¨</title>
      <link>https://luoguochun.cn/post/2017-04-28-lwan-http-server/</link>
      <pubDate>Fri, 28 Apr 2017 22:10:32 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2017-04-28-lwan-http-server/</guid>
      <description>&lt;h3 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹ &lt;a href=&#34;#%e7%ae%80%e4%bb%8b&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;æœåŠ¡å™¨ç«¯ç¨‹åºçš„è®¾è®¡æ¨¡å¼ä¸€èˆ¬æ¯”è¾ƒå›ºå®šï¼Œç›®å‰ä¸»è¦æœ‰ä¸¤ç§ä¸»è¦çš„è§£å†³æ–¹å¼ï¼Œä¸€ç§å¤šè¿›ç¨‹æ–¹å¼(è¿›ç¨‹æ± )ï¼Œå¦å¤–ä¸€ç§å¤šçº¿ç¨‹çš„æ–¹å¼(çº¿ç¨‹æ± )(P.S:è¯·å¿˜æ‰ä¸€ä¸ªè¿æ¥æˆ–ä¸€ä¸ªä¸šåŠ¡forkä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ–èµ·ä¸€ä¸ªçº¿ç¨‹çš„æ–¹å¼ï¼Œç³»ç»Ÿå¼€é”€å¤ªå¤§)ï¼Œä¸¤ç§æ–¹å¼éƒ½é‡‡ç”¨äº†éé˜»å¡ioï¼Œå¤šè·¯å¤ç”¨(P.S:linuxå¹³å°ä¸ºæœ€é«˜æ•ˆçš„&lt;code&gt;epoll&lt;/code&gt;ï¼Œæ–°å‹apiï¼Œå¦‚&lt;code&gt;signalfd&lt;/code&gt;, &lt;code&gt;timerfd&lt;/code&gt;, &lt;code&gt;eventfd&lt;/code&gt;ç­‰ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œ&lt;code&gt;epoll&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤šè¿›ç¨‹çš„æ¨¡å¼ï¼Œæœ‰äº›å®ç°æ˜¯ï¼Œèµ·ä¸€ä¸ªä¸»è¿›ç¨‹è¿›è¡Œç›‘å¬å’Œç®¡ç†ï¼Œå†èµ·Nä¸ª(N=cpuä¸ªæ•°)ä¸šåŠ¡è¿›ç¨‹ï¼Œå½“ä¸»è¿›ç¨‹&lt;code&gt;accept&lt;/code&gt;æˆåŠŸåï¼Œæ ¹æ®ä¸€å®šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå°†fdå‘é€åˆ°ä¸šåŠ¡è¿›ç¨‹(P.S:å‘é€æ–¹å¼ç”¨&lt;code&gt;socketpair&lt;/code&gt;ï¼Œå‚è€ƒï¼š&lt;a href=&#34;https://github.com/buf1024/reinvent-wheel/blob/master/common/sock.c&#34;&gt;sock.c&lt;/a&gt; &lt;code&gt;unix_domain_send_fd&lt;/code&gt;å’Œ&lt;code&gt;unix_domain_recv_fd&lt;/code&gt;)ï¼Œä¸šåŠ¡è¿›ç¨‹å¯¹æ¥æ”¶åˆ°åˆ°fdè¿›è¡Œ&lt;code&gt;epoll&lt;/code&gt;ã€‚å¯¹äºå¤šè¿›ç¨‹ï¼Œå¦å¤–ä¸€äº›å®ç°æ˜¯ï¼Œèµ·Nä¸ª(N=cpuä¸ªæ•°)ä¸šåŠ¡è¿›ç¨‹ï¼ŒåŒæ—¶Nä¸ªè¿›è¡Œåœ°ä½åŒç­‰ï¼ŒåŒæ—¶è¿›è¡Œ&lt;code&gt;epoll&lt;/code&gt;ï¼Œ&lt;code&gt;listen&lt;/code&gt;ï¼Œ&lt;code&gt;accept&lt;/code&gt;ç­‰(P.S:å¤šè¿›è¡Œè¿›è¡Œç›‘å¬å°†å¼•èµ·ç¾¤æƒŠæ•ˆåº”ï¼Œä½†åªæœ‰ä¸€ä¸ªè¿›ç¨‹&lt;code&gt;accept&lt;/code&gt;æˆåŠŸ)ã€‚è€Œå¤šçº¿ç¨‹çš„æ¨¡å¼ï¼Œåˆ™å’Œå¤šè¿›ç¨‹æ¨¡å¼ç±»ä¼¼ï¼Œæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹è¿›è¡Œç›‘å¬å’Œç®¡ç†ï¼Œå†èµ·Nä¸ª(N=cpuä¸ªæ•°)ä¸šåŠ¡çº¿ç¨‹ï¼Œ&lt;strong&gt;å¹¶å°†ä¸šåŠ¡çº¿ç¨‹çš„è°ƒåº¦çº§åˆ«è®¾ç½®ä¸ºç³»ç»Ÿçº§åˆ«&lt;/strong&gt;ï¼Œè¿™ç‚¹éå¸¸é‡è¦ï¼Œå„ä¸ªä¸šåŠ¡çº¿ç¨‹ç¨‹è¿›è¡Œè¿›è¡Œ&lt;code&gt;epoll&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹å¹¶æ— æœ¬è´¨åŒºåˆ«ï¼Œå¤šçº¿ç¨‹çš„ä¼˜ç‚¹ä¸ªäººçœ‹æ¥ï¼Œæ•°æ®éƒ½åœ¨æ•´ä¸ªè¿›ç¨‹ç©ºé—´ï¼Œçº¿ç¨‹å†…æ•°æ®éƒ½å¯ä»¥å…±äº«ï¼Œéœ€è¦ç•™æ„å…±äº«æ•°æ®çš„äº’æ–¥è®¿é—®ï¼Œç¼ºç‚¹å°±æ˜¯è°ƒè¯•èµ·æ¥ç¨å¾®éº»çƒ¦ï¼Œè€Œå¤šè¿›ç¨‹çš„ä¼˜ç‚¹åœ¨äºä¸ªäººçœ‹æ¥ï¼Œè°ƒè¯•ç›¸å¯¹å¤šçº¿ç¨‹æ–¹ä¾¿ï¼Œç¼ºç‚¹å°±æ˜¯ä¸æ–¹ä¾¿è¿ç»´ã€‚(P.S:æ—§åŒäº‹å…¥èŒä¸€å®¶å¯¼èˆªçš„å…¬å¸ï¼Œä»–ä»¬çš„ç½‘ç»œæ¡†æ¶å°±æ˜¯å¤šçº¿ç¨‹æ¨¡å¼ï¼Œè€Œå…¬å¸çš„ï¼Œå¤šæ•°æ˜¯å¤šè¿›ç¨‹æ¨¡å¼ã€‚æ—§åŒäº‹æèµ·ï¼Œæ‰€ä»¥ç°åœ¨å†å›å¤´çœ‹çœ‹&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;, å½“æ—¶åªæ˜¯çœ‹ï¼Œæ²¡è®°å½•ä¸‹æ¥ï¼Œç°åœ¨é‡æ–°è®°å½•ä¸€ä¸‹)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;æ˜¯ä¸ªéå¸¸è½»é‡çº§çš„httpæœåŠ¡å™¨(P.S:æ£€éªŒä½ æ˜¯å¦æŒæ¡äº†Cè¯­è¨€çš„æ ‡å‡†ï¼Œæ˜¯å¦èƒ½å®Œæ•´çš„å®ç°ä¸€ä¸ªhttpæœåŠ¡å™¨)ï¼Œä»£ç é‡åªæœ‰2Wå¤šè¡Œï¼Œæ¯”èµ·æˆç†Ÿç¨³å®šçš„&lt;a href=&#34;http://nginx.org/&#34;&gt;nginx&lt;/a&gt;ä»£ç é‡å°‘å¤ªå¤šäº†ï¼Œå½“ç„¶åŠŸèƒ½ä¹Ÿå°‘å¾ˆå¤šã€‚&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;åœ¨16å¹´5æœˆä»½å·¦å³ä¸€æ®µæ—¶é—´åœ¨Cè¯­è¨€é¡¹ç›®æ’è¡Œæ¦œstarå¢åŠ æ•°æ’å‰åˆ—ã€‚ä¸ªäººè§‰å¾—ï¼Œ&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;ï¼Œå®ƒé‡‡ç”¨å¤šçº¿ç¨‹æ¨¡å¼ï¼Œéµå¾ªäº†é«˜å¹¶å‘æœåŠ¡è®¾è®¡çš„æœ€åŸºæœ¬æ¨¡å¼ï¼Œè‡ªå·±è®¾è®¡ä¸€ä¸ªæ¯”è¾ƒæœ‰ç‰¹è‰²çš„&lt;a href=&#34;http://baike.baidu.com/link?url=3ojcT0gOp_oV_uDCAr0IYmAl6AziaFrQNodhpkS1DPpB7euef3LideO12NpZYhJWhuHYIw-2JqSlUUw_pvP9pa&#34;&gt;trie&lt;/a&gt;æ ‘çš„å®ç°ï¼Œå¯æ‰©å±•çš„æ¨¡å—ç¼–å†™ï¼ŒåŒæ—¶åˆ›æ–°çš„ä½¿ç”¨äº†åç¨‹ï¼ˆåç¨‹ï¼Œè‡ªå·±åœ¨å¾ˆä¹…ä¹‹å‰ä¹Ÿå…³æ³¨è¿‡ï¼Œå‚è€ƒ: &lt;a href=&#34;https://luoguochun.cn/2014/08/21/coroutine/&#34;&gt;coroutineåç¨‹&lt;/a&gt;ï¼‰ï¼Œè¿™æ˜¯æœ€å¤§çš„ç‰¹ç‚¹ã€‚å½“ç„¶ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒè¿˜ä¸ç¨³å®šï¼Œä»è‡ªå·±å…³æ³¨æå‡ºçš„ç¬¬ä¸€ä¸ªissue, è¿˜æœ‰å¾ˆå¤šBUGï¼Œä»£ç æœ‰ä¸€äº›ä¸å¥½çš„é£æ ¼ï¼ˆå¦‚ç›¸å¯¹æ¯”è¾ƒå¤šçš„&lt;code&gt;goto&lt;/code&gt;è¯­å¥ï¼Œä¸€è¨€ä¸åˆå°±&lt;code&gt;abort&lt;/code&gt;ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„webæœåŠ¡å™¨ã€‚ä¸‹é¢ç®€å•ç²—ç•¥å›é¡¾ä¸‹&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;ï¼Œè¯¦ç»†äº†è§£çš„è¯ï¼Œå‚è€ƒä»£ç ï¼Œè‡ªå·±ä¹Ÿforkäº†ä¸€ä»½ï¼ŒåŠ äº†éƒ¨åˆ†æ³¨é‡Š&lt;a href=&#34;https://github.com/buf1024/lwan&#34;&gt;lwan&lt;/a&gt;ã€‚(P.S:è‡ªå·±å«åˆ«äººå»å­¦ä¹ ï¼Œæ²¡ç†ç”±è‡ªå·±å¿˜è®°äº†)&lt;/p&gt;
&lt;h3 id=&#34;å¤§è‡´å·¥ä½œæµç¨‹&#34;&gt;å¤§è‡´å·¥ä½œæµç¨‹ &lt;a href=&#34;#%e5%a4%a7%e8%87%b4%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/bu24/lwan&#34;&gt;lwan&lt;/a&gt;çš„å·¥ä½œæ¨¡å¼æ˜¯éå¸¸å…¸å‹çš„å¤šçº¿ç¨‹æ¨¡å‹ï¼Œç²—ç•¥ç”»ä¸€ä¸‹å®ƒçš„å·¥ä½œæµç¨‹ï¼š
&lt;img src=&#34;https://luoguochun.cn/img/lwan/workflow.png&#34; alt=&#34;lwanå·¥ä½œæµç¨‹&#34;&gt;
&lt;a href=&#34;https://github.com/bu24/lwan&#34;&gt;lwan&lt;/a&gt;æ€»å…±åŒ…æ‹¬ï¼Œä¸€ä¸ªä½çº§åˆ«çš„jobçº¿ç¨‹ï¼Œä¸»è¦äºèµ„æºæ¸…ç†ï¼Œä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¸»è¦ç”¨äºæ¥æ”¶è¿æ¥å’Œåˆ†å‘è¿æ¥ï¼Œä»¥åŠN(Nå¯é…ç½®ï¼Œä¸€èˆ¬ç­‰äºCPUä¸ªæ•°)ä¸ªè°ƒåº¦çº§åˆ«ä¸ºè¿›ç¨‹çº§åˆ«çš„ä¸šåŠ¡å¤„ç†çº¿ç¨‹ã€‚&lt;a href=&#34;https://github.com/bu24/lwan&#34;&gt;lwan&lt;/a&gt;è¿›è¡Œçº¿ç¨‹åˆå§‹åŒ–æ˜¯ï¼Œä½¿ç”¨åˆ°äº†&lt;code&gt;pthread_barrier_*&lt;/code&gt;è¿™ç§æ•°æ®ç»“æ„ï¼Œ&lt;code&gt;pthread_barrier_*&lt;/code&gt;å…¶å®åªåšä¸”åªèƒ½åšä¸€ä»¶äº‹ï¼Œå°±æ˜¯å……å½“æ æ†ï¼ˆbarrieræ„ä¸ºæ æ†)ã€‚å½¢è±¡çš„è¯´å°±æ˜¯æŠŠå…ˆååˆ°è¾¾çš„å¤šä¸ªçº¿ç¨‹æŒ¡åœ¨åŒä¸€æ æ†å‰ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹åˆ°é½ï¼Œç„¶åæ’¤ä¸‹æ æ†åŒæ—¶æ”¾è¡Œã€‚1ï¼‰&lt;code&gt;init&lt;/code&gt;å‡½æ•°è´Ÿè´£æŒ‡å®šè¦ç­‰å¾…çš„çº¿ç¨‹ä¸ªæ•°ï¼›2ï¼‰ &lt;code&gt;wait&lt;/code&gt;å‡½æ•°ç”±æ¯ä¸ªçº¿ç¨‹ä¸»åŠ¨è°ƒç”¨ï¼Œå®ƒå‘Šè¯‰æ æ†â€œæˆ‘åˆ°èµ·è·‘çº¿å‰äº†â€ã€‚&lt;code&gt;wait&lt;/code&gt;æ‰§è¡Œæœ«å°¾æ æ†ä¼šæ£€æŸ¥æ˜¯å¦æ‰€æœ‰äººéƒ½åˆ°æ æ†å‰äº†ï¼Œå¦‚æœæ˜¯ï¼Œæ æ†å°±æ¶ˆå¤±æ‰€æœ‰çº¿ç¨‹ç»§ç»­æ‰§è¡Œä¸‹ä¸€å¥ä»£ç ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™æ‰€æœ‰å·²åˆ°&lt;code&gt;wait&lt;/code&gt;çš„çº¿ç¨‹åœåœ¨è¯¥å‡½æ•°ä¸åŠ¨ï¼Œå‰©ä¸‹æ²¡æ‰§è¡Œåˆ°wait()çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼›3ï¼‰&lt;code&gt;destroy&lt;/code&gt;å‡½æ•°é‡Šæ”¾initç”³è¯·çš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;jobçº¿ç¨‹åœ¨æ¯ä¸€æ¬¡å¾ªç¯è°ƒç”¨&lt;code&gt;sleep&lt;/code&gt;ç±»çš„å‡½æ•°ï¼Œè¿™ç±»å‡½æ•°æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯ä¸èƒ½å“åº”ä¿¡å·ï¼Œè¿™å°±æ˜¯å¯¼è‡´&lt;a href=&#34;https://github.com/bu24/lwan&#34;&gt;lwan&lt;/a&gt;é€€å‡ºéå¸¸æ…¢çš„åŸå› ã€‚ä½¿ç”¨&lt;code&gt;pthread_cond_wait&lt;/code&gt;å¯ä»¥é¿å…è¯¥é—®é¢˜ï¼Œå·²ç»ä¿®æ”¹ï¼Œå¹¶è¿›è¡Œäº†pull requestï¼š&lt;a href=&#34;https://github.com/lpereira/lwan/pull/199&#34;&gt;quick quit optimize&lt;/a&gt;ã€‚ä¸šåŠ¡å¤„ç†çº¿ç¨‹é‡Œé¢å…¨éƒ¨ä½¿ç”¨åç¨‹è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®ç»“æ„&#34;&gt;æ•°æ®ç»“æ„ &lt;a href=&#34;#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸€èˆ¬ç¨‹åºï¼Œä½¿ç”¨æ¯”è¾ƒå¤šçš„ä¸¤ä¸ªæ•°æ®ç»“æ„ä¸€ä¸ªæ˜¯&lt;code&gt;list&lt;/code&gt;é“¾è¡¨ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯&lt;code&gt;hashtable&lt;/code&gt;ã€‚&lt;code&gt;list&lt;/code&gt;æ²¡æœ‰å¤ªå¤šå¯è®²çš„ï¼Œè€Œ&lt;code&gt;hashtable&lt;/code&gt;çš„å®ç°ï¼Œåœ¨è¿™é‡Œå¯èƒ½ä¹Ÿä¸æ˜¯æœ€ä¼˜çš„ã€‚&lt;code&gt;hashtable&lt;/code&gt;æ¯”è¾ƒé«˜æ•ˆï¼Œè€Œä¸”ç»è¿‡å¤§é‡æ£€éªŒçš„æ˜¯redisçš„å®ç°æ–¹å¼ï¼Œæ¨èçœ‹è¿™ä¸ªï¼Œå…¬å¸å†…éƒ¨ä½¿ç”¨çš„åº“ä¹Ÿæ˜¯ä¿®æ”¹è¿™ä¸ªè€Œæ¥ã€‚ç½‘ä¸Šå¯¹&lt;a href=&#34;https://github.com/antirez/redis/blob/4.0/src/dict.c&#34;&gt;dict.c&lt;/a&gt;çš„åˆ†æå¾ˆå¤šï¼Œå¦‚ï¼š&lt;a href=&#34;http://huangz.iteye.com/blog/1455808&#34;&gt;Redis æºç åˆ†æï¼ˆ1ï¼‰ï¼šå­—å…¸å’Œå“ˆå¸Œè¡¨ï¼ˆdict.c å’Œ dict.hï¼‰&lt;/a&gt;ã€‚è¿™é‡Œä¸ç´¯èµ˜äº†ï¼Œå¤§ä½“æ¥è¯´ï¼šhash çš„å…¸å‹å®ç°æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ªå‡å¦‚é•¿åº¦ä¸ºlençš„æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„é‡Œé¢ä¸ºleafçš„èŠ‚ç‚¹ï¼ŒleafèŠ‚ç‚¹ä¸ºä¸€é“¾è¡¨ç»“æ„ã€‚æ’å…¥å’ŒæŸ¥è¯¢å°±æ˜¯ï¼Œå…ˆè®¡ç®—keyçš„hashï¼Œhashå€¼å–æ¨¡lenï¼Œå¾—å‡ºæ•°æ®æ‰€åœ¨çš„ä½ç½®ï¼Œæ·»åŠ åˆ°leafèŠ‚ç‚¹åï¼ˆæ’å…¥ï¼‰ï¼Œæˆ–è€…åœ¨ä»leafé“¾è¡¨é‡Œé¢éå†ï¼ˆæŸ¥è¯¢ï¼Œç”±äºhashå†²çªï¼‰ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚redisçš„&lt;code&gt;dict&lt;/code&gt;åŒ…æ‹¬ä¸¤ä¸ªè¿™ä¸ªæ ·çš„&lt;code&gt;hashtable&lt;/code&gt;ï¼Œé¦–å…ˆæ’å…¥æ•°æ®ä»0å·&lt;code&gt;hashtable&lt;/code&gt;æ’å…¥ï¼Œæ’å…¥æ—¶åˆ›å»ºï¼Œå½“0å·&lt;code&gt;hashtable&lt;/code&gt;å¢é•¿åˆ°ä¸€å®šçš„ç¨‹åº¦æˆ–æ¯”ä¾‹ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»º1å·&lt;code&gt;hashtable&lt;/code&gt;ï¼Œå¹¶å°†0å·&lt;code&gt;hashtable&lt;/code&gt;è¿ç§»åˆ°è¿™ä¸ª&lt;code&gt;hashtable&lt;/code&gt;ï¼Œå¦‚æœæ­£åœ¨å‘ç”Ÿè¿ç§»ï¼Œé‚£ä¹ˆæ–°æ’å…¥çš„æ•°æ®å°±ä¼šæ’å…¥1å·&lt;code&gt;hashtable&lt;/code&gt;ï¼Œ0å·åˆ°1å·&lt;code&gt;hashtable&lt;/code&gt;çš„è¿ç§»æ˜¯åˆ†æ‘Šåˆ°&lt;code&gt;dict&lt;/code&gt;çš„æ¯ä¸ªæ“ä½œä¹‹ä¸­çš„ï¼Œå¹¶éé‡‡ç”¨é›†ä¸­å¼çš„è¿ç§»ã€‚å½“0å·&lt;code&gt;hashtable&lt;/code&gt;å…¨éƒ¨è¿ç§»åˆ°1å·&lt;code&gt;hashtable&lt;/code&gt;æ—¶ï¼Œé‚£ä¹ˆå°†0å·&lt;code&gt;hashtable&lt;/code&gt;åˆ é™¤ï¼Œå¹¶å°†1å·&lt;code&gt;hashtable&lt;/code&gt;å˜ä¸º0å·&lt;code&gt;hashtable&lt;/code&gt;ï¼Œ1å·&lt;code&gt;hashtable&lt;/code&gt;å˜ä¸ºNULLã€‚ç„¶ååœ¨é‡å¤è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://baike.baidu.com/link?url=zKneAm7OsFA-2VblcQ21Grh7ZYBSnSkaycwjc9q1Z5IbMNU0tdaqi71hgVjx7ZrO81aKwVYdnOAqOGl3VbU3U_&#34;&gt;trie&lt;/a&gt;æ ‘æ˜¯è¿™é‡Œçš„å¦å¤–ä¸€ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼Œå¾ˆå¤šwebæ¡†æ¶éƒ½ä¸¥é‡ä¾èµ–è¿™ç§æ•°æ®ç»“æ„ï¼Œä¸ªäººè§‰å¾—ï¼Œè¿™é‡Œå®ç°çš„&lt;code&gt;trie&lt;/code&gt;è¿˜æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// trieæ•°æ®ç»“æ„å®šä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_node&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_leaf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;leaf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ref_count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_leaf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_leaf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_trie_node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;free_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//æŸ¥æ‰¾æˆ–æ’å…¥æ—¶ï¼Œå°±å·²ç»ç¡®è®¤ä½ç½®äº†    /* Traverse the trie, allocating nodes if necessary */
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;knode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;trie&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;knode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;GET_NODE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ¯”å¦‚ï¼Œ5ï¼Œ58,12,123,1234,12345åœ¨å†…å­˜çš„å­˜å‚¨æƒ…å†µï¼ˆç®€åŒ–ï¼Œå‡è®¾&lt;code&gt;struct lwan_trie_node *next[4]&lt;/code&gt;ï¼‰ï¼š
&lt;img src=&#34;https://luoguochun.cn/img/lwan/trie.png&#34; alt=&#34;trieå†…å­˜å­˜å‚¨&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;åç¨‹coro&#34;&gt;åç¨‹coro &lt;a href=&#34;#%e5%8d%8f%e7%a8%8bcoro&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä¸šåŠ¡å¤„ç†çº¿ç¨‹é‡Œé¢å…¨éƒ¨ä½¿ç”¨åç¨‹è¿›è¡Œå¤„ç†çš„ã€‚åç¨‹åº”è¯¥å±äº&lt;a href=&#34;https://github.com/bu24/lwan&#34;&gt;lwan&lt;/a&gt;çš„æ ¸å¿ƒäº†ã€‚åç¨‹å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://luoguochun.cn/2014/08/21/coroutine/&#34;&gt;coroutineåç¨‹&lt;/a&gt;ï¼Œé‡Œé¢æè¿°è¿™é‡Œçš„æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œä½†æœ¬è´¨ä¸Šéƒ½æ˜¯éƒ½å¯¹&lt;code&gt;context&lt;/code&gt;ä¸åŒç¨‹åº¦å°è£…ï¼Œæˆ–ç”¨æ±‡ç¼–ï¼Œæˆ–ç›´æ¥ç”¨ç³»ç»Ÿå‡½æ•°ã€‚è¿™é‡Œçš„coroå®šä¹‰äº†ä¸€ä¸ª&lt;code&gt;struct coro_defer_array defer;&lt;/code&gt;ï¼Œç”¨äº&lt;code&gt;connection&lt;/code&gt;è¶…æ—¶æˆ–åç¨‹è¢«æ¸…ç†æ—¶ï¼Œå†…éƒ¨èµ„æºçš„æ¸…ç†ã€‚å…·ä½“åç¨‹ä¸å†è¯¦è¿°ã€‚&lt;/p&gt;
&lt;p&gt;åç¨‹æœ¬èº«æ¦‚å¿µå¹¶ä¸éš¾å¤æ‚ï¼Œå¦‚æœç†Ÿæ‚‰è¿™ç§ç¼–ç¨‹æ¨¡å¼ï¼Œé‚£ä¹ˆéé˜»å¡ç¼–ç¨‹æ¨¡å¼å°†å¯ä»¥ç”¨é¡ºåºç¼–ç¨‹çš„æ–¹å¼æ¥æ€è€ƒï¼Œå¯¹ç¨‹åºå‘˜çš„æ€è€ƒçš„è§’åº¦å’Œä¸šåŠ¡é€»è¾‘çš„ç†è§£å°†æœ‰å¾ˆå¤§çš„æå‡(éé˜»å¡çš„æ–¹å¼æ—¶ï¼Œå½“ä¸šåŠ¡æµç¨‹éœ€è¦è¿›è¡Œé˜»å¡æ—¶ï¼Œæ¯”å¦‚éœ€è¦è¿æ¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿè¯·æ±‚æ•°æ®ï¼Œé‚£ä¹ˆä¸šåŠ¡å½“å‰çš„çŠ¶æ€å¯èƒ½éœ€è¦ä¿å­˜ä¸‹æ¥ï¼Œå½“ç¬¬ä¸‰æ–¹ç³»ç»Ÿåº”ç­”æ—¶ï¼Œå†æ¢å¤çŠ¶æ€ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ï¼Œè¿™æ ·ï¼Œä¸šåŠ¡æµç¨‹å°±å˜æˆä¸€æ®µä¸€æ®µçš„äº†)ã€‚ä½†æ˜¯åç¨‹å¹¶æ²¡æœ‰å¤§è§„æ¨¡çš„ä½¿ç”¨ï¼Œ&lt;a href=&#34;http://blog.codingnow.com/&#34;&gt;é£äº‘&lt;/a&gt;ä¹Ÿæ›¾ä»‹ç»è¿‡ï¼Œåœ¨æ¨å¹¿åæˆæ¦‚å¿µæ—¶ï¼Œé‡åˆ°äº†å¾ˆå¤šé—®é¢˜(å…·ä½“å‡ºå¤„å·²å¿˜è®°)ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨åç¨‹å¿…é¡»é€‚å½“è¯„ä¼°ç¨‹åº&lt;code&gt;STACK&lt;/code&gt;çš„å¤§å°ï¼Œ&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;é‡Œé¢æ˜¯å›ºå®šå®šä¹‰ä¸º&lt;code&gt;#define PTHREAD_STACK_MIN	16384&lt;/code&gt;ï¼Œåç¨‹åˆ†é…çš„&lt;code&gt;STACK&lt;/code&gt;ä¸º&lt;code&gt;((3 * (PTHREAD_STACK_MIN)) / 2)&lt;/code&gt;æˆ–&lt;code&gt;#define CORO_STACK_MIN         (5 * (PTHREAD_STACK_MIN))&lt;/code&gt;ï¼Œè¿™æ ·é‚£ä¹ˆå¦‚æœåœ¨åç¨‹åˆ‡æ¢å‡½æ•°é‡Œé¢å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ä¸´æ—¶å˜é‡ï¼Œå¦‚&lt;code&gt;char tmp[1024000]&lt;/code&gt;é‚£ä¹ˆç¨‹åºå¿…æŒ‚äº†ï¼Œå› ä¸ºæ ˆæº¢å‡ºäº†ã€‚æ‰€ä»¥ä½¿ç”¨åç¨‹éœ€è¦è€ƒè™‘&lt;code&gt;STACK&lt;/code&gt;æˆ–è€ƒè™‘åŠ¨æ€åˆ†é…å†…å­˜ï¼ŒåŠ¨æ€åˆ†é…å†…å­˜è¿˜éœ€è¦è€ƒè™‘é‡Šæ”¾é—®é¢˜(å‚è€ƒ lwan-coro.c &lt;code&gt;coro_defer&lt;/code&gt;)ã€‚å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œç¨‹åºcoredumpæ—¶ï¼Œç”¨gdbè¿›è¡Œè°ƒè¯•ï¼Œå‘ç°ç”¨&lt;code&gt;bt&lt;/code&gt;è¿›è¡Œè°ƒç”¨å †æ ˆæŸ¥çœ‹æ—¶ï¼Œæœ‰éƒ¨åˆ†æ˜¯ä¹±çš„ï¼Œä¸æ–¹ä¾¿é—®é¢˜å®šä½ã€‚æˆ‘æƒ³è¿™äº›æœ‰å¯èƒ½æ˜¯åç¨‹æ²¡æœ‰è¢«å¤§è§„æ¨¡æ¨å¹¿çš„åŸå› ä¹‹ä¸€å§ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;æ¨¡å—å¤„ç†&#34;&gt;æ¨¡å—å¤„ç† &lt;a href=&#34;#%e6%a8%a1%e5%9d%97%e5%a4%84%e7%90%86&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;é€šè¿‡æ¨¡å—è¿›è¡Œè‡ªèº«çš„æ‰©å±•ï¼Œè‡ªå·±æœ¬èº«ä¹Ÿå®ç°äº†ä¸€äº›æ¨¡å—ã€‚&lt;code&gt;lwan-mod&lt;/code&gt;å¼€å¤´çš„æ–‡ä»¶éƒ½æ˜¯å®ƒçš„æ¨¡å—ã€‚ä¸ªäººç¼–å†™æ¨¡å—ï¼Œåªæœ‰å®ç°ç›¸å…³çš„å‡½æ•°ï¼Œç›´æ¥ç¼–è¯‘æˆåŠ¨æ€åº“å³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æ¨¡å—éœ€å®ç°å‡½æ•°ï¼Œæ¨¡å—åå¯åœ¨é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œè¿”å›const struct lwan_module *ç»“æ„ä½“æŒ‡é’ˆ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_module&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;lwan_module_æ¨¡å—å&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/*lwan æ¨¡å—æ˜¯å‡½æ•°åä¸º lwan_module_æ¨¡å—åçš„å‡½æ•°ï¼Œå†…ç½®æ¨¡å—ä½¿ç”¨-rdynamicç¼–è¯‘è¿›å¯æ‰§è¡Œç¨‹åºå†…*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_module&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init_from_hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parse_conf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// http è¯·æ±‚å¤„ç†å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;lwan_http_status&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_request&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lwan_handler_flags&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// å¤„ç†æ ‡å¿—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è‡ªå·±å®ç°ä¸€ä¸ªhelloworldæ¨¡å—å¯å‚è€ƒï¼š&lt;a href=&#34;https://github.com/buf1024/lwan/blob/master/common/lwan-mod-helloworld.c&#34;&gt;helloworld&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®æ–‡ä»¶&#34;&gt;é…ç½®æ–‡ä»¶ &lt;a href=&#34;#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/lpereira/lwan&#34;&gt;lwan&lt;/a&gt;æä¾›çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶æ²¡æœ‰è¦†ç›–å…¨éƒ¨çš„é…ç½®ï¼Œä¸‹é¢ä»ä»£ç ä¸­æå–çš„é…ç½®æ–‡ä»¶ï¼Œä¾›å‚è€ƒä¸‹(è§å›½ä¸å°‘å¼€æºé¡¹ç›®é‡‡ç”¨è¿™ç§é…ç½®æ ¼å¼ï¼Œä½†è²Œä¼¼æ²¡æœ‰å…·ä½“å®šä¹‰è¿™æ˜¯é‚£ç§æ ¼å¼ï¼Œæ‰€æœ‰è‡ªå·±å«è¿™ç§æ ¼å¼ä¸º&lt;code&gt;tson&lt;/code&gt;ï¼Œå¹¶å†™äº†ä¸€ä¸ªç®€å•è§£æçš„ä»£ç ï¼Œå‚è€ƒ&lt;a href=&#34;https://github.com/buf1024/reinvent-wheel/blob/master/common/tson.c&#34;&gt;tson&lt;/a&gt;)ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#true on yes    ä»¥åŠé0æ•°å€¼ï¼Œè¢«è§£æä¸ºtrue
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#false off no   ä»¥åŠé0æ•°å€¼ï¼Œè¢«è§£æä¸ºfalse
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Timeout in seconds to keep a connection alive.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;keep_alive_timeout = 15
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Set to true to not print any debugging messages. (Only effective in
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# release builds.)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;quiet = false
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Set SO_REUSEPORT=1 in the master socket.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;reuse_port = true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Disable HAProxy&amp;#39;s PROXY protocol by default. Only enable if needed.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;proxy_protocol = false
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;allow_cors=false
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Value of &amp;#34;Expires&amp;#34; header. Default is 1 month and 1 week.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;expires = 1M 1w
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#error_template = error.html
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# post æ•°æ®å¤§å°ï¼Œæœ€å¤šä¸º128m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;max_post_data_size=40960000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;allow_temp_files=true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Number of I/O threads. Default (0) is number of online CPUs.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;threads = 0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#éœ€è¦rootç”¨æˆ·ï¼Œæˆ–è€…æœ‰rootæƒé™çš„ç”¨æˆ·æ‰§è¡Œï¼Œ è¯¥sectionå¿…é¡»åœ¨æ‰€ä»¥listenerä¹‹å‰
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#straitjacket {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#  # åˆ‡æ¢è¿è¡Œæ”¹ç¨‹åºçš„ç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#  user = heidong
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#  # ç¨‹åºè¿è¡Œçš„æ ¹ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#  chroot = /home/heidong
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# sectionè§£æ  ip:port
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;listener *:8080 {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    # é…ç½®ä¸‰ç§æ–¹å¼ 1. prefix è·¯å¾„ 1. &amp;amp;handler è·¯å¾„ 3. module è·¯å¾„ã€‚ åªæœ‰é…ç½®ä¸ºmoduleçš„ï¼Œæ–¹æœ‰å›è°ƒå‡½æ•°è¯»é‡Œé¢é…ç½®é¡¹ç›®
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #prefix / {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        #handlerå’Œmoduleåªèƒ½æ˜¯ä¸€ä¸ª, module ä¸ºå‡½æ•°åä¸º lwan_module_{module_name}çš„æ¨¡å—
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        module = module_name
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        #handler å‡½æ•°åŸå‹ lwan_http_status_t (*handler)(lwan_request_t *request, lwan_response_t *response, void *data);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        handler  = handler_symbol
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        authorization basic {     #ç›®å‰åªæ”¯æŒbasic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #            realm=value #é»˜è®¤Lwan
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #            passowrd_file=file #é»˜è®¤htpasswd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #        }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    # é…ç½®handler
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #&amp;amp;handler / {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    #}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    serve_files / {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            path = ./
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            # When requesting for file.ext, look for a smaller/newer file.ext.gz,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            # and serve that instead if `Accept-Encoding: gzip` is in the
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            # request headers.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            serve precompressed files = true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            # é…ç½®è¯¥sectionåï¼Œå¿…é¡»æˆæƒæ‰å¯è®¿é—®è¯¥url
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            authorization basic {     #ç›®å‰åªæ”¯æŒbasic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                realm=æµ‹è¯•æµ‹è¯• #é»˜è®¤Lwan
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                password_file=/home/heidong/privt/proj/lwan/htpasswd.conf #é»˜è®¤htpasswdï¼Œæ•°æ®æ ¼å¼ä¸ºï¼šç”¨æˆ·å=å¯†ç 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;å…¶ä»–&#34;&gt;å…¶ä»– &lt;a href=&#34;#%e5%85%b6%e4%bb%96&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¿™é‡Œåªæ˜¯ç®€å•è¿‡ä¸€äº›lwanæœ€åŸºæœ¬çš„ä¸œè¥¿ï¼Œæ²¡æœ‰è¯¦ç»†çš„è¿‡é‡Œé¢çš„å…¶ä»–æ–¹é¢ï¼Œä»”ç»†åˆ†æçš„è¯è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥å­¦ï¼Œè¿™é‡Œä¸å†ç½—åˆ—äº†ï¼Œæš‚æ—¶å…ˆè¿™æ ·ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ‚ä¹±è®°å¿†</title>
      <link>https://luoguochun.cn/post/2014-07-15-misc-memory/</link>
      <pubDate>Tue, 15 Jul 2014 11:10:13 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-07-15-misc-memory/</guid>
      <description>&lt;p&gt;è¿™é‡Œè®°å½•çš„æ˜¯ä¸€äº›å¸¸è§çš„é”™è¯¯æˆ–æŠ€å·§æˆ–ä¸€äº›æ³¨æ„äº‹é¡¹ç­‰ï¼Œä¸å®šæ—¶æ›´æ–°:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://hexo.io&#34;&gt;hexo&lt;/a&gt; å®‰è£…ï¼ˆå«æ’ä»¶ï¼‰&lt;br&gt;
hexo æ˜¯ç›¸å¯¹æ¯”è¾ƒå¥½çš„ä¸€ä¸ªé™æ€BLOGç”Ÿæˆå™¨ï¼Œè™½ç„¶æˆ‘åœ¨&lt;a href=&#34;http://www.raspberrypi.org&#34;&gt;æ ‘è“æ´¾&lt;/a&gt;ä¸Šé¢ç¼–è¯‘ä¸€ä¸ªnodejsè€—æ—¶6ä¸ªå¤šå°æ—¶ï¼Œæ¯æ¬¡hexo -gè€—æ—¶æ¥è¿‘15åˆ†é’Ÿï¼Œä½†è¿™ä¸å½±å“ä½¿ç”¨ã€‚å®‰è£…ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  npm install -g hexo    
  npm install hexo-generator-feed    
  npm install hexo-generator-sitemap    
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;python åå°æ“ä½œgit&lt;br&gt;
ç¨‹åºåˆ‡æ¢çš„gitç›®å½•å:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  git_cmd = [&amp;quot;git&amp;quot;, &amp;quot;add&amp;quot;, &amp;quot;./*&amp;quot;]
  ret = subprocess.call(git_cmd)

  git_cmd = [&amp;quot;git&amp;quot;, &amp;quot;commit&amp;quot;, &amp;quot;-m&amp;quot;, &amp;quot;&#39;auto commit&#39;&amp;quot;, &amp;quot;-a&amp;quot;]
  ret = subprocess.call(git_cmd)

  git_cmd = [&amp;quot;git&amp;quot;, &amp;quot;push&amp;quot;]
  ret = subprocess.call(git_cmd)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ï¼Œå› ä¸ºæäº¤äº†åå°ï¼Œä½¿ç”¨çš„ä¸æ˜¯git cloneä»“åº“çš„é‚£ä¸ªç”¨æˆ·ï¼Œéœ€è¦åœ¨ä¸ºå…·ä½“çš„gitç›®å½•æ·»åŠ gitä¿¡æ¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    git config user.email &amp;quot;xxx@xx.xx&amp;quot;
    git config user.name  &amp;quot;xxx&amp;quot;
    git config push.default simple
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åŒæ—¶éœ€è¦åœ¨è¿è¡Œè¿™ä¸ªç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹æ·»åŠ .sshä¿¡æ¯ã€‚å¦åˆ™æäº¤ä¸æˆåŠŸ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è·¯ç”±å™¨ç™»é™†&lt;br&gt;
TP-linkè·¯ç”±å™¨çš„ç™»é™†ä½¿ç”¨çš„æ˜¯http basic authã€‚å…·ä½“æ˜¯æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½å¿…é¡»åœ¨httpå¤´è¾“å…¥httpè®¤è¯ä¿¡æ¯ã€‚httpè®¤è¯æ–¹å¼å¯å‚è€ƒï¼š&lt;a href=&#34;http://blog.csdn.net/hotnet522/article/details/5824716&#34;&gt;HTTPè®¤è¯æ–¹å¼&lt;/a&gt;ã€‚python ä»£ç :&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  req = urllib2.Request(url)
  req.add_header(&amp;quot;Authorization&amp;quot;, &amp;quot;Basic aGVsbG86d29ybGQ=&amp;quot;)
  rsp = urllib2.urlopen(req)
  rsp.close()
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/buf1024/mysch&#34;&gt;mysch&lt;/a&gt; ç¨‹åºéœ€å…¨è·¯å¾„&lt;br&gt;
myschæ˜¯è°ƒåº¦ç›‘æ§ç¨‹åºï¼Œç›®å‰æ²¡æœ‰æµé‡æ§åˆ¶ï¼Œåªæœ‰æ—¶é—´æ§åˆ¶ï¼Œè°ƒç”¨çš„ç¨‹åºåéœ€è¦å…¨è·¯å¾„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://code.google.com/p/openerdns/&#34;&gt;openerdns&lt;/a&gt;å’Œ&lt;a href=&#34;http://www.opendns.com&#34;&gt;Opendns&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  OpenerDNSå¯å®ç°æœ€ç®€å•çš„ç¿»å¢™ï¼Œæœ‰æ—¶ä¸å¯ç”¨ã€‚
  åœ°å€: 42.120.21.30  
  OpenDNSä¸èƒ½ç¿»å¢™ã€‚
  åœ°å€ï¼š  
  208.67.222.222  
  208.67.220.220  
  208.67.222.220  
  208.67.220.222  
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>è®¾ç½®è¿›ç¨‹çš„åç§°</title>
      <link>https://luoguochun.cn/post/2014-07-04-set-proccess-title/</link>
      <pubDate>Fri, 04 Jul 2014 10:27:47 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-07-04-set-proccess-title/</guid>
      <description>&lt;p&gt;###å¦‚ä½•å¼€æ
æˆ‘ä»¬å¹³æ—¶psè¿›ç¨‹æ—¶ï¼Œæ˜¾ç¤ºçš„è¿›ç¨‹æ ‡é¢˜æ˜¯æˆ‘ä»¬è¾“å…¥çš„ç¨‹åºåä»¥åŠä¸€äº›å‚æ•°ã€‚è¿™ç§æ˜¾ç¤ºæ–¹å¼å¹¶ééå¸¸ç›´è§‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼å¯ä»¥è®¾ç½®ç¨‹åºçš„æ ‡é¢˜ï¼Œä¸€çœ¼å°±çŸ¥é“è¯¥è¿›ç¨‹æ—¶ä»€ä¹ˆé¸Ÿã€‚å¦‚redisæˆ–nginx:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root      8527     1  0 10:30 ?        00:00:00 nginx: master process nginx    
nginx     8528  8527  0 10:30 ?        00:00:00 nginx: worker process    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®ç°çš„åŸç†éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹argv[0],è¯´æŒ‡å‘çš„é‚£æ®µå†…å­˜ç©ºé—´çš„å†…å®¹å³å¯ã€‚ä½†æ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ­£å¸¸é€»è¾‘ä¸å—å½±å“ï¼Œäº‹å…ˆè¦æŠŠåŸç†çš„å†…å®¹ä¿å­˜èµ·æ¥ï¼Œå¹¶é€šè¿‡åŸæ¥çš„æ–¹å¼å¯ä»¥è®¿é—®ã€‚&lt;br&gt;
argv[0]æ‰€æŒ‡å‘çš„çš„ç©ºé—´æ˜¯å’ŒÂ·enviornÂ·æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œåœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿå·²ç»è®¾ç½®å¥½è¿™äº›ç©ºé—´äº†ã€‚å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://privt-share.qiniudn.com/@/redis/setproctitle.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œ1. æˆ‘ä»¬åªéœ€è¦é‡æ–°åˆ†é…ç©ºé—´ï¼ˆä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼‰æ¥å­˜å‚¨è¿™äº›å†…å®¹ï¼Œå°†åœ°å€åˆ†åˆ«å¤åˆ¶ç»™&lt;code&gt;argv&lt;/code&gt;æˆ–&lt;code&gt;environ&lt;/code&gt;æ•°ç»„ï¼Œè¿™æ ·åŸæ¥ç¨‹åºçš„æµç¨‹ä¸å—å½±å“ã€‚2. æˆ‘ä»¬å¯ä»¥åœ¨åŸ&lt;code&gt;agv&lt;/code&gt;æœ€å¼€å§‹çš„åœ°æ–¹å’Œ&lt;code&gt;environ&lt;/code&gt;æœ€ç»“å°¾çš„åœ°æ–¹ï¼Œéšä¾¿è®¾ç½®ä½ æ˜¾ç¤ºçš„å†…å®¹å³å¯ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­&lt;code&gt;./exe&lt;/code&gt;å¼€å§‹çš„åœ°æ–¹å’Œ&lt;code&gt;Env5=val5&lt;/code&gt;æœ€åä¸€ä¸ª0ç»“å°¾å¤çš„åœ°æ–¹ã€‚åªéœ€è¦æ³¨æ„åˆ°ï¼Œè®¾ç½®çš„å†…å®¹å¿…é¡»ä¸0ç»“å°¾ï¼Œè€Œä¸”ä¸èƒ½è¶…è¿‡è¯¥å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;###rediså¦‚ä½•å®ç°
redisçš„å®ç°åœ¨&lt;a href=&#34;https://github.com/antirez/redis/blob/2.8.12/src/setproctitle.c&#34;&gt;setproctitle&lt;/a&gt;é‡Œé¢ã€‚åªæ˜¯å®ç°æœ‰ç‚¹ç–‘æƒ‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;argcä¸ªæ•°å°‘äºargvæ•°ç»„æ•°ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; for (i = 0; i &amp;lt; argc || (i &amp;gt;= argc &amp;amp;&amp;amp; argv[i]); i++) {    
     if (!argv[i] || argv[i] &amp;lt; end)
 	    continue;

     end = argv[i] + strlen(argv[i]) + 1;
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æŒ‰ç…§æˆ‘ä»¬ä¸€ç›´ä»¥æ¥çš„å¸¸è¯†ï¼Œæ˜¯é€šè¿‡argcä»argvé‡Œé¢å–å‡ºæ•°æ®æ¥çš„ï¼Œè€Œä»–è¿™é‡Œ&lt;code&gt;i &amp;lt; argc || (i &amp;gt;= argc &amp;amp;&amp;amp; argv[i])&lt;/code&gt;è¿™ä¸ªæ¡ä»¶æ˜æ˜¾å°±æ˜¯argcå¯èƒ½ä¼šå°‘äºargvä¸ªæ•°ã€‚ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿ&lt;br&gt;
2. SPT.nulè²Œä¼¼æ²¡æœ‰ç”¨&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;	if (nul &amp;lt; SPT.nul) {
	    *SPT.nul = &#39;.&#39;;
    } else if (nul == SPT.nul &amp;amp;&amp;amp; &amp;amp;nul[1] &amp;lt; SPT.end) {
	    *SPT.nul = &#39; &#39;;
	    *++nul = &#39;\0&#39;;
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯&lt;code&gt;setproctitle&lt;/code&gt;é‡Œé¢çš„ä¸€ä¸ªå¥‡æ€ªçš„é€»è¾‘ï¼Œæ›´æœ¬æ²¡æƒ³åˆ°ä»–æ˜¯å¹²å˜›ç”¨çš„ã€‚è€Œä¸”è²Œä¼¼SPT.nulåœ¨set proc titleé‡Œé¢æ²¡æœ‰ä»€ä¹ˆä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;###ç®€å•åæ§½
è™½ç„¶rediséå¸¸å‡ºåï¼Œä½†æ˜¯redisçš„ä»£ç è²Œä¼¼ä¸æ˜¯å¾ˆè§„èŒƒâ€¦â€¦æˆ–è€…æ˜¯æˆ‘ä»¬ä¸€ç›´æ¥è§¦çš„å°±ä¸è§„èŒƒï¼Œå“ˆâ€¦â€¦&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æµ®åŠ¨æ•°ä¸0æ¯”è¾ƒ</title>
      <link>https://luoguochun.cn/post/2014-06-28-infinite/</link>
      <pubDate>Sat, 28 Jun 2014 21:40:50 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-06-28-infinite/</guid>
      <description>&lt;p&gt;###æ— é™å¤§å°
Cè¯­è¨€å¦‚ä½•è¡¨ç¤ºæ— é™å¤§å°ï¼ŒNANï¼Ÿredisé‡Œé¢è¿™ä¹ˆæçš„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static double R_Zero, R_PosInf, R_NegInf, R_Nan;    
/* Double constants initialization */    
R_Zero = 0.0;    
R_PosInf = 1.0/R_Zero;    
R_NegInf = -1.0/R_Zero;    
R_Nan = R_Zero/R_Zero;    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç®€å•æµ‹è¯•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;    
    
int main()    
{    
    static double R_Zero, R_PosInf, R_NegInf, R_Nan;    
    /* Double constants initialization */    
    R_Zero = 0.0;    
    R_PosInf = 1.0/R_Zero;    
    R_NegInf = -1.0/R_Zero;    
    R_Nan = R_Zero/R_Zero;   
    
    printf(&amp;quot;R_Zero  : %lf\n&amp;quot;
           &amp;quot;R_PosInf: %lf\n&amp;quot;
           &amp;quot;R_NegInf: %lf\n&amp;quot;
           &amp;quot;R_Nan   : %lf\n&amp;quot;,
           R_Zero, R_PosInf, R_NegInf, R_Nan);

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[heidong@HEIDONGVM tmp]$ ./z 
R_Zero  : 0.000000
R_PosInf: inf
R_NegInf: -inf
R_Nan   : -nan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœç„¶ç¥å¥‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµ®åŠ¨æ•°ä¸0æ¯”è¾ƒ&#34;&gt;æµ®åŠ¨æ•°ä¸0æ¯”è¾ƒ &lt;a href=&#34;#%e6%b5%ae%e5%8a%a8%e6%95%b0%e4%b8%8e0%e6%af%94%e8%be%83&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¤§å­¦æ—¶å€™ï¼Œè€å¸ˆæ•™å¯¼æˆ‘ä»¬ï¼Œæµ®åŠ¨æ•°ä¸è¦ä¸0æ¯”è¾ƒï¼Œå› ä¸ºæµ®ç‚¹æ•°åœ¨è®¡ç®—æœºé‡Œé¢è¡¨ç¤ºçš„æ˜¯è¿‘ä¼¼å€¼ã€‚æ‰€ä»¥å¦‚æœæµ®åŠ¨æ•°è¦ä¸0åšæ¯”è¾ƒå°±ç”¨Â·&amp;lt; 0.000001Â·è¿™ç§é¾Œè¹‰çš„æ–¹å¼ï¼Œæ˜æ˜æ˜¯0ï¼Œå´è¦æä¸ªç¥é©¬0.000001å‡ºæ¥ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæ¥ç¨¿äº†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;    
    
int main()    
{    
    static double R_Zero, R_PosInf, R_NegInf, R_Nan;    
    /* Double constants initialization */    
    R_Zero = 0.0;    
    R_PosInf = 1.0/R_Zero;    
    R_NegInf = -1.0/R_Zero;    
    R_Nan = R_Zero/R_Zero;   
    
    printf(&amp;quot;R_Zero  : %lf\n&amp;quot;
           &amp;quot;R_PosInf: %lf\n&amp;quot;
           &amp;quot;R_NegInf: %lf\n&amp;quot;
           &amp;quot;R_Nan   : %lf\n&amp;quot;,
           R_Zero, R_PosInf, R_NegInf, R_Nan);

    double a = 1.0;
    double b = 1.0;

    if(a-b == R_NegInf) {
            printf(&amp;quot;%lf - %lf != 0\n&amp;quot;, a, b);
    }else{
            printf(&amp;quot;%lf - %lf == 0\n&amp;quot;, a, b);
    }
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[heidong@HEIDONGVM tmp]$ ./z 
R_Zero  : 0.000000
R_PosInf: inf
R_NegInf: -inf
R_Nan   : -nan
1.000000 - 1.000000 == 0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥åå°±å¯ä»¥ç”¨R_NegInfè¿™ç§æ–¹å¼å’Œ0æ¯”è¾ƒäº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>cæ„é€ å‡½æ•°</title>
      <link>https://luoguochun.cn/post/2014-06-25-c-constructor/</link>
      <pubDate>Wed, 25 Jun 2014 13:00:43 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-06-25-c-constructor/</guid>
      <description>&lt;h3 id=&#34;æ„é€ å‡½æ•°&#34;&gt;æ„é€ å‡½æ•° &lt;a href=&#34;#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä»»ä½•ä¸€ä»¬é¢å‘å¯¹è±¡è¯­è¨€é‡Œéƒ½ä¼šæ¶‰åŠæ„é€ å‡½æ•°è¿™ä¸€æ¦‚å¿µï¼Œåªæ˜¯å®ç°çš„æ–¹å¼å„æœ‰å·®å¼‚ã€‚éœ€è¦è¿™mainå‡½æ•°ä¹‹å‰æ‰§è¡Œä¸€æ®µä»£ç æ˜¯éå¸¸å®¹æ˜“çš„äº‹æƒ…ï¼Œåªéœ€è¦å£°æ˜ä¸€å¯¹è±¡çš„å…¨å±€å˜é‡ï¼Œåœ¨æ„é€ å‡½æ•°å¯ä»¥ä¸º&lt;em&gt;æ‰€æ¬²ä¸º&lt;/em&gt;å¹²ä½ æƒ³å¹²çš„äº‹æƒ…ã€‚ç„¶è€Œï¼Œå¯¹äºé¢å‘è¿‡ç¨‹çš„è¯­è¨€æ¯”å¦‚Cï¼Œéœ€è¦å®ç°å…¨å±€çš„æ„é€ å‡½æ•°å°±æ¯”è¾ƒå¥‡è‘©ã€‚å½“ç„¶gccä¼šæœ‰å¾ˆä¼˜é›…çš„è§£å†³æ–¹å¼ï¼ŒVCåˆ™çŒ¥çç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä½•éœ€è¦è¿™ä¸ª&#34;&gt;ä¸ºä½•éœ€è¦è¿™ä¸ª &lt;a href=&#34;#%e4%b8%ba%e4%bd%95%e9%9c%80%e8%a6%81%e8%bf%99%e4%b8%aa&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å…¶å®åœ¨mainå‡½æ•°é‡Œé¢è°ƒç”¨ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œæ˜¯çš„ï¼Œè¿™æ ·æ˜¯å¯ä»¥ï¼Œä½†æ˜¯å¯¹äºæ¡†æ¶çš„å®ç°æ¥è¯´ï¼Œè¿™å´æ˜¯ä¸å¤ªå¥½çš„ï¼Œå®¢æˆ·ä½¿ç”¨èµ·æ¥ä¸è‡ªç”±ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è¯´ï¼Œæˆ‘æ˜¯å±Œä¸ï¼Œæˆ‘å¯ä»¥è£…é€¼ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•å®ç°&#34;&gt;å¦‚ä½•å®ç° &lt;a href=&#34;#%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;gccå®ç°&lt;br&gt;
gcc å®ç°æ˜¯éå¸¸ç®€å•çš„äº‹æƒ…ã€‚åœ¨å…¨å±€æ„é€ å‡½æ•°å‰å«ä»¥ä¸‹ç¼–è¯‘å™¨å±æ€§å³å¯ï¼š&lt;br&gt;
&lt;strong&gt;attribute&lt;/strong&gt;((constructor))&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;vcå®ç°
vcçš„å®ç°æ¯”è¾ƒå¥‡è‘©ï¼ŒVCæœ¬èº«æ²¡æœ‰ç±»ä¼¼Â·&lt;strong&gt;attribute&lt;/strong&gt;Â·è¿™æ ·çš„å±æ€§ï¼Œä½ éœ€è¦å°†å…¨å±€å‡½æ•°ç¼–è¯‘åˆ°æŸä¸ªç‰¹å®šçš„ä»£ç æ®µé‡Œé¢ã€‚MSDNå¯¹äºè¿™éƒ¨åˆ†æœ‰è¯¦ç»†çš„è¯´æ˜ï¼š&lt;a href=&#34;http://msdn.microsoft.com/en-us/library/bb918180.aspx&#34;&gt;CRT Initialization&lt;/a&gt;&lt;br&gt;
ç®€å•æ¥è¯´å°±æ˜¯å°†ä½ çš„å…¨å±€æ„é€ å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆç¼–è¯‘åˆ°Â·.CRT$XCUÂ·æ®µé‡Œé¢ã€‚å¦‚ä½•ç¼–è¯‘åˆ°Â·.CRT$XCUÂ·æ®µï¼ŸVCæœ‰VCçš„è¯­æ³•ã€‚&lt;/p&gt;
&lt;p&gt;// å£°æ˜åœ¨æ®µÂ·.CRT$XCUÂ·é‡Œé¢ç”Ÿæˆä»£ç  &lt;br&gt;
#pragma section(&amp;quot;.CRT$XCU&amp;quot;,read) &lt;br&gt;
// å£°æ˜éœ€è¦è°ƒç”¨çš„å‡½æ•° &lt;br&gt;
__declspec(allocate(&amp;quot;.CRT$XCU&amp;quot;)) void (__cdecl *a)(void) = func; &lt;br&gt;
// è°ƒç”¨çš„å‡½æ•°å®ç° &lt;br&gt;
void func(void){}&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šå®ç°å¯ä»¥ç”¨ä¸‹é¢å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#ifdef _MSC_VER    
#define __CCALL __cdecl    
#define __func__ __FUNCTION__    
#define snprintf _snprintf    
#pragma warning(disable:4996) // this is very violent    
#pragma section(&amp;quot;.CRT$XCU&amp;quot;,read)
#define __CONSTRCT(a, b)                                             \    
  void __CCALL __##a##__##b##__ ## 520hjm(void);                   \    
  __declspec(allocate(&amp;quot;.CRT$XCU&amp;quot;))                                 \    
  void (__CCALL * __ctor__##a##__##b##__ ## 520hjm)(void) =        \    
  __##a##__##b##__ ## 520hjm;    
#else    
#define __CCALL    
#define __CONSTRCT(a, b) __attribute__((constructor))    
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;é¢å¤–å‚è€ƒ&#34;&gt;é¢å¤–å‚è€ƒ &lt;a href=&#34;#%e9%a2%9d%e5%a4%96%e5%8f%82%e8%80%83&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ä»¿ç…§&lt;a href=&#34;https://code.google.com/p/googletest/&#34;&gt;gtest&lt;/a&gt;çš„ç®€æ˜“å•å…ƒæµ‹è¯•&lt;a href=&#34;https://github.com/buf1024/ctest&#34;&gt;ctest&lt;/a&gt;å°±æ˜¯ç”¨çš„è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>mschedule ç®€å•linuxè¿›ç¨‹ç®¡ç†ï¼ˆæ ‘è“æ´¾ï¼‰</title>
      <link>https://luoguochun.cn/post/2014-05-30-myschd/</link>
      <pubDate>Fri, 30 May 2014 23:28:16 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-05-30-myschd/</guid>
      <description>&lt;p&gt;æ ‘è“æ´¾æ˜¯ç¥å¥‡çš„æœºå™¨ï¼ŒCPUå’Œå†…å­˜éƒ½å°‘çš„å¯æ€œï¼Œä½†ä½“ç§¯å°åŠŸè€—ä½ï¼Œåœ¨ä¸Šé¢æäº›åŠ¨æäº›è¥¿å…¶å®ä¹ŸæŒºæœ‰æ„æ€ï¼ŒæŒºå¥½ç©çš„ã€‚è£…çš„æ˜¯pidaraï¼ŒåŸºæœ¬æœåŠ¡æ²¡æœ‰ç²¾ç®€å¤šå°‘ï¼Œå…ˆcatä¸€ä¸‹CPUå’ŒRAMã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [able@raspi ~]$ cat /proc/cpuinfo 
    Processor       : ARMv6-compatible processor rev 7 (v6l)
    BogoMIPS        : 464.48
    Features        : swp half thumb fastmult vfp edsp java tls 
    CPU implementer : 0x41
    CPU architecture: 7
    CPU variant     : 0x0
    CPU part        : 0xb76
    CPU revision    : 7
    
    Hardware        : BCM2708
    Revision        : 000e
    Serial          : 000000003123ffdc
    [able@raspi ~]$ cat /proc/meminfo 
    MemTotal:         446672 kB
    MemFree:          289976 kB
    Buffers:           16872 kB
    Cached:            65868 kB
    SwapCached:            0 kB
    Active:            88652 kB
    Inactive:          50360 kB
    Active(anon):      58692 kB
    Inactive(anon):      844 kB
    Active(file):      29960 kB
    Inactive(file):    49516 kB
    Unevictable:           0 kB
    Mlocked:               0 kB
    HighTotal:             0 kB
    HighFree:              0 kB
    LowTotal:         446672 kB
    LowFree:          289976 kB
    SwapTotal:        524284 kB
    SwapFree:         524284 kB
    Dirty:                16 kB
    Writeback:             0 kB
    AnonPages:         56284 kB
    Mapped:            16088 kB
    Shmem:              3268 kB
    Slab:               9684 kB
    SReclaimable:       5664 kB
    SUnreclaim:         4020 kB
    KernelStack:         656 kB
    PageTables:         1292 kB
    NFS_Unstable:          0 kB
    Bounce:                0 kB
    WritebackTmp:          0 kB
    CommitLimit:      747620 kB
    Committed_AS:     211148 kB
    VmallocTotal:     565248 kB
    VmallocUsed:        5024 kB
    VmallocChunk:     347144 kB
    [able@raspi ~]$ 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ ‘è“æ´¾å¯èƒ½æ˜¯ä¸ºäº†èŠ‚çœæˆæœ¬ï¼Œå¹¶æ²¡æœ‰å®‰è£…æ—¶é—´æ¨¡å—ï¼Œæ‰€ä»¥æ¯æ¬¡å¼€æœºæ—¶é—´éƒ½ä¼šè¢«é‡ç½®ã€‚å› ä¸ºå¾ˆä¹…æ²¡æœ‰åŠ¨è¿‡ç”µçƒ™é“äº†ï¼Œæ‰€ä»¥æ²¡æœ‰æƒ³è¿‡ç»™å®ƒè£…ä¸Šä¸ªç¡¬ä»¶æ¨¡å—ã€‚
æ‰€ä»¥æƒ³åˆ°çš„æ–¹æ³•æ˜¯åŒæ­¥ç½‘ç»œæ—¶é—´ã€‚å¼€å§‹çš„æ—¶å€™ï¼Œæä¸ªå¯åŠ¨è„šæœ¬ï¼Œå¼€æœºå¯åŠ¨åŒæ­¥æ—¶é—´ï¼Œå¯æ˜¯æ¯å½“æœºå™¨é‡å¯æ—¶ï¼ŒåŠä¸ªå°æ—¶éƒ½å¯åŠ¨ä¸äº†ï¼Œè€Œä¸”å°±ç®—å¯åŠ¨äº†ï¼Œä¹Ÿæ²¡æœ‰
åŒæ­¥æ—¶é—´ã€‚äºæ˜¯æƒ³ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œç”¨æ ¹ç”¨æˆ·çš„crontabï¼Œç»“æœä¸çŸ¥é“ä¸ºä½•ï¼Œæ²¡æœ‰åŒæ­¥ï¼Œcrontabæ‰§è¡Œå…¶ä»–ä»»åŠ¡æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ŒåŸå› è¿˜ä¸æ˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ ‘è“æ´¾æ˜¯é€šè¿‡ç½‘çº¿è¿æ¥TP-LINKè·¯ç”±çš„ï¼ŒåŒæ—¶æœ‰ä¸ªå°ç±³ç›’å­è¿ç€ã€‚å°ç±³ç›’å­æ˜¯ä¸ªç¥å¥‡çš„ä¸œè¥¿ï¼Œåªæœ‰ä½ è¿æ¥ä¸ŠTP-LINKçš„è·¯ç”±çš„ï¼Œå…¶ä»–
ç”µè„‘æˆ–æ‰‹æœºè®¾å¤‡å°±å¾ˆéš¾è¿æ¥è¿›å»ï¼Œå³ä½¿æ˜¯æ–­å¼€äº†å°ç±³ç›’å­ï¼ŒçŠ¶å†µä¾ç„¶æ— æ³•è§£å†³ã€‚æ‰€ä»¥ï¼Œè€å¦¹ä¸€çœ‹è¿æ¥ä¸ä¸Šï¼Œå°±æ‹”ç”µæºé‡å¯ã€‚å¯ä»¥å°†ä¸€äº›åº”ç”¨ç¨‹åºåšæˆè‡ªå¯åŠ¨ï¼Œ
å¯æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¨‹åºéƒ½åƒnginxä¸€æ ·å®Œå–„ï¼Œä¼šåˆ‡æ¢ç”¨æˆ·æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æœ‰äº›ç¨‹åºcoredumpï¼Œè®©å®ƒè‡ªåŠ¨é‡å¯ï¼Œç³»ç»Ÿé…ç½®è²Œä¼¼è¿˜åšä¸åˆ°ï¼ˆå¯èƒ½å¯ä»¥åšåˆ°ï¼‰ã€‚æˆ‘è¿˜æƒ³åœ¨æ ‘è“æ´¾ä¸Šé¢è·‘ä¸ªDHTçˆ¬è™«ï¼Œä½†DHTçˆ¬è™«å¤ªå 
ç½‘ç»œäº†ï¼Œå¦‚æœä¸€ç›´å¼€ç€çš„è¯ï¼Œç½‘ç»œå°±åŸºæœ¬åºŸäº†ã€‚æ‰€ä»¥æˆ‘æ˜¯æƒ³åœ¨å‘¨ä¸€åˆ°äº”å‡Œæ™¨æ‰å¼€å§‹è¿è¡Œï¼Œåˆ°17ç‚¹å°±åœäº†ï¼Œå¯ä»¥é…ç½®ä¹‹ç±»çš„ã€‚&lt;/p&gt;
&lt;p&gt;åŸºäºä¸Šé¢ç§ç§éœ€æ±‚ï¼Œè‡ªå·±æäº†ä¸ªéå¸¸ç®€å•ç®¡ç†è°ƒåº¦ç¨‹åºï¼Œç‰¹ç‚¹ï¼š&lt;br&gt;
1. å¯ä»¥ç®¡ç†ä¸‰ç±»ç¨‹åºï¼Œå¸¸é©»è¿›ç¨‹ï¼ˆæŒ‚æ‰ä¼šè‡ªåŠ¨é‡å¯ï¼‰ï¼Œä¸€æ¬¡è¿›ç¨‹ï¼ˆè´Ÿè´£å¯åŠ¨ï¼Œä¸ç®¡æ˜¯å¦æˆ  åŠŸï¼‰ï¼Œä¼˜å…ˆçš„ä¸€æ¬¡è¿›ç¨‹ï¼ˆè´Ÿè´£å¯åŠ¨ï¼Œä¸ç®¡æ˜¯å¦æˆåŠŸï¼Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥ç¨‹åºå¿…é¡»ç­‰åˆ°æ­¤ç±»ç¨‹åºé€€å‡ºåï¼Œæ–¹å¯åŠ¨å…¶ä»–ç¨‹åºï¼‰&lt;br&gt;
2. å¯ä»¥æŒ‡å®šè¿è¡Œçš„ç”¨æˆ·ï¼Œå¿…é¡»æœ‰ç›¸åº”çš„æƒé™&lt;br&gt;
3. å¸¸é©»è¿›ç¨‹å¯ä»¥é…ç½®è¿è¡Œæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼š&lt;br&gt;
1. æ²¡æœ‰ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¼˜å…ˆçº§&lt;br&gt;
2. æ²¡æœ‰è®¾è®¡æ²¡æœ‰è¿›ç¨‹çš„ä¾èµ–å…³ç³»&lt;/p&gt;
&lt;p&gt;ç›¸å…³é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [nginx@raspi bin]$ cat mysch.conf 
    #ç¨‹åºè¿è¡Œå‚æ•°
    #ç¨‹åºé…ç½®æ®µPROG_LISTé…ç½®
    #[NGINX]
    #ç¨‹åºå¯åŠ¨çš„å‘½ä»¤
    #RUN_COMMAND=/sbin/ntpdate 1.cn.pool.ntp.org
    #è¿è¡Œè¯¥ç¨‹åºçš„ç”¨æˆ·ç»„
    #RUN_GROUP=nginx
    #è¿è¡Œè¯¥ç¨‹åºçš„ç”¨æˆ·
    #RUN_USER=nginx
    #ç¨‹åºè¿è¡Œæ ‡å¿—
    # -1 ç¨‹åºå¯åŠ¨åå…ˆç­‰å¾…å…¶è¿è¡Œå®Œæ¯•æ–¹å¯è¿è¡Œå…¶å®ƒç¨‹åº
    #  0 ç¨‹åºå¯åŠ¨åä¸ç®¡å…¶è¿è¡ŒçŠ¶æ€
    #  1 ç¨‹åºæŒ‰ç…§RUN_TIMEé…ç½®æ—¶é—´ç‚¹è¿è¡Œï¼Œéè¯¥è¿è¡Œç‚¹è‡ªåŠ¨åœæ­¢é€šè¿‡killä¿¡å·
    #RUN_FLAG=1
    #RUN_FLAG=1æ—¶æœ‰æ•ˆï¼Œç¨‹åºè¿è¡Œæ—¶é—´æ®µï¼Œæ˜ŸæœŸ(1-7)ï¼Œæ—¶é—´æ ¼å¼(24å°æ—¶)ï¼Œå„æ¡ä»¶ä¹‹é—´æ˜¯æˆ–å…³ç³»
    #RUN_TIME=1-5,23:30-16:30|1-5,17:30-21:30|6-7,00:00-8:30
    
    [COMMON]
    #æ—¥å¿—è·¯å¾„
    LOG_PATH=/home/nginx/bin/log
    #æ—¥å¿—å¤´
    LOG_HEADER=schedule
    #æ–‡ä»¶æ—¥å¿—çº§åˆ«all,debug,info,warn,error,fatal,off
    LOG_LEVEL=debug
    #æ–‡ä»¶æ—¥å¿—ç¼“å­˜,byte
    LOG_BUFFER=102400
    #æ–‡ä»¶åˆ‡æ¢æ—¶é—´,ç§’æ•°
    LOG_SWITCH_TIME=86400
    
    #ç¡çœ æ—¶é—´
    SLEEP_TIME = 60
    #æ¨å‡ºæ—¶æ˜¯å¦é€€å‡ºå­ç¨‹åº
    KILL_CHILD_FLAG = 1
    #pidæ–‡ä»¶å,å°æ‰§è¡Œæ—¶æœ‰æ•ˆ
    PID_FILE=/home/nginx/bin/log/mysch.pid
    #è¿è¡Œçš„ç”¨æˆ·
    RUN_USER=root
    PROG_LIST=NTP|NGINX|BIGFALSE
    
    [NTP]
    RUN_COMMAND=/usr/sbin/ntpdate 1.cn.pool.ntp.org
    RUN_USER=root
    RUN_FLAG=-1
    
    [NGINX]
    RUN_COMMAND=/home/nginx/www/sbin/nginx
    RUN_USER=nginx
    RUN_FLAG=1
    RUN_TIME=1-7,00:00-24:00
    RUN_PID_FILE=/home/nginx/www/logs/nginx.pid
    
    [BIGFALSE]
    RUN_COMMAND=/usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    RUN_USER=nginx
    RUN_FLAG=1
    RUN_TIME=1-7,00:00-24:00
    RUN_PID_FILE=/home/nginx/tinytrue/log/django.pid
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŒ‰ç…§è¿™ä¸ªé…ç½®ï¼Œè¿è¡Œçš„ç¨‹åºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [nginx@raspi bin]$ p nginx
    root       233     1  0 14:41 ?        00:00:00 /home/nginx/bin/mysch -c /home/nginx/bin/mysch.conf
    nginx      304     1  0 14:42 ?        00:00:00 nginx: master process /home/nginx/www/sbin/nginx
    nginx      305   304  0 14:42 ?        00:00:00 nginx: worker process     
    nginx      307     1  0 14:42 ?        00:00:00 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    nginx      308   307  0 14:42 ?        00:00:00 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    nginx      309   307  0 14:42 ?        00:00:00 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    nginx      310   307  0 14:42 ?        00:00:04 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    nginx      311   307  0 14:42 ?        00:00:06 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
    nginx      312   307  0 14:42 ?        00:00:10 /usr/bin/python /home/nginx/tinytrue/manage.py runfcgi host=127.0.0.1 port=7856 daemonize=true pidfile=/home/nginx/tinytrue/log/django.pid outlog=/home/nginx/tinytrue/log/access.log errlog=/home/nginx/tinytrue/log/error.log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç›¸å…³ä»£ç ï¼š&lt;br&gt;
&lt;a href=&#34;https://github.com/buf1024/mysch&#34;&gt;https://github.com/buf1024/mysch&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>memcpyé€ æˆå…¶ä»–å˜é‡å€¼æ”¹å˜</title>
      <link>https://luoguochun.cn/post/2014-04-09-memcpy-error/</link>
      <pubDate>Wed, 09 Apr 2014 19:12:17 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-04-09-memcpy-error/</guid>
      <description>&lt;p&gt;ä»¥å‰C/C++é‡åˆ°è¿‡å¾ˆå¤šå¾ˆå¤šçš„é—®é¢˜ï¼Œæœ‰æ—¶å€™è´¹äº†å¾ˆä¹…å¾ˆä¹…æ—¶é—´ï¼Œå¾ˆå¤§å¾ˆå¤§çš„åŠªåŠ›æ‰è§£å†³ã€‚ä½†æ˜¯éƒ½æ²¡æœ‰è®°å½•ä¸‹æ¥ï¼Œç°åœ¨æƒ³æƒ³ä»¥å‰çš„é‡åˆ°çš„é—®é¢˜ï¼ŒåªçŸ¥é“è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿè¿‡ï¼Œè‡³äºæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä¸€ç‚¹å°è±¡éƒ½æ²¡æœ‰äº†ã€‚æ‰€ä»¥é‡åˆ°å¥‡æ€ªçš„é—®é¢˜ï¼Œè¿˜æ˜¯è®°å½•ä¸‹æ¥é è°±ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;èƒŒæ™¯ï¼š&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨OTLè®¿é—®ORACLEæ•°æ®åº“ï¼Œåœ¨POWER CPU 64ä½LINUXä¸Šé¢ç¨‹åºçœ‹èµ·æ¥è¿è¡Œæ²¡æœ‰ä»€ä¹ˆå¼‚å¸¸æƒ…å†µã€‚ç§»æ¤åˆ°X86æ„æ¶çš„CPU 64ä½LINUXä¸Šé¢ï¼Œå´å‘ç°æŸæ¡SQLæ— æ³•æ‰§è¡Œã€‚åˆæ­¥åˆ†æåï¼ˆåˆ†æé”™è¯¯ï¼‰ï¼Œå‘è§‰æ‰§è¡ŒæŸæ¡SQLåï¼ŒæŸå˜é‡å€¼è«åå…¶å¦™å˜äº†ã€‚å‘é‚®ä»¶é—®OTLä½œè€…ï¼Œä½œè€…çœ‹å¾—ä¹Ÿä¸æ˜¯å¾ˆä»”ç»†ï¼Œä¸€æ—¶ä¹Ÿå‘ç°ä¸äº†ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åç»§ç»­çœ‹å‡ æ¬¡ä»£ç ï¼Œå‘ç°è¿˜æ˜¯è‡ªå·±ç¨‹åºçš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;å…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// wrong:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;u_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_no&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;u_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;Â 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rcd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nl&#34;&gt;correct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;u_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_no&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;u_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;usr_no&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rcd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bank_acct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;info å’Œrcdä¸ºä¸¤ä¸ªç»“æ„ä½“ï¼Œå±€éƒ¨ä¸´æ—¶å˜é‡ã€‚ç”±äºä¸­é—´ä¸€ä¸ªmemcpyæ‹·è´é•¿åº¦é”™äº†ï¼Œé€ æˆå…¶ä»–å˜é‡å€¼æ”¹å˜ï¼Œå…·ä½“æ”¹å˜æƒ…å†µå’ŒCPUæ„æ¶å¤§å°ç«¯ç›¸å…³ï¼Œåœ¨POWER CPUä¸Šé¢ä¸å‡ºé—®é¢˜çº¯å±ä¾¥å¹¸ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>C ç®€å•å•å…ƒæµ‹è¯•æ¡†æ¶</title>
      <link>https://luoguochun.cn/post/2014-01-11-ctest/</link>
      <pubDate>Sat, 11 Jan 2014 23:48:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2014-01-11-ctest/</guid>
      <description>&lt;p&gt;å¤§çº¦2å¹´å‰ï¼Œä»¿ç…§GTESTå†™äº†ä¸ªç®€å•çš„C++å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://luoguochun.cn/2012/02/09/simple-c++-test-framework/&#34;&gt;https://luoguochun.cn/2012/02/09/simple-c++-test-framework/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åæ¥ç”¨Cå†™åå°ç¨‹åºæ¯”è¾ƒå¤šäº†ï¼ŒC++é‚£ä¸ªæ¡†æ¶å´ä¸æ€ä¹ˆå¥½ç”¨äº†ï¼Œäºæ˜¯åˆå†™äº†ä¸ªCçš„ã€‚&lt;/p&gt;
&lt;p&gt;åŠŸèƒ½å’Œä½œç”¨å’ŒC++çš„ä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶å°½é‡åšåˆ°ç”¨æ³•å’ŒC++çš„ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/buf1024/ctest&#34;&gt;https://github.com/buf1024/ctest&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>gcov ç®€è¿°</title>
      <link>https://luoguochun.cn/post/2013-05-31-linux-gcov/</link>
      <pubDate>Fri, 31 May 2013 17:08:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2013-05-31-linux-gcov/</guid>
      <description>&lt;p&gt;ä»£ç è¦†ç›–ç‡æ˜¯å•å…ƒæµ‹è¯•çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œé€šå¸¸è¦†ç›–ç‡è¶Šé«˜ï¼Œå•å…ƒæµ‹è¯•å°±åšå¾—æ›´å®Œå¤‡ã€‚ï¼ˆç„¶è€Œï¼Œè¦†ç›–ç‡æ˜¯ä¸æ˜¯å’Œè½¯ä»¶è´¨é‡æˆæ­£æ¯”å…³ç³»å‘¢ï¼Ÿï¼‰gcovæ˜¯GNUå·¥å…·é“¾ä¸­çš„ä¸€ä¸ªé‡è¦çš„å·¥å…·ï¼Œè™½ç„¶gcovæ˜¯è¦†ç›–ç‡å¾ˆå¥½çš„å·¥å…·ï¼Œä½†æ˜¯gcovçš„æ›´é‡è¦çš„åº”ç”¨æ˜¯æ€§èƒ½çš„è°ƒä¼˜ã€‚gcové€šè¿‡ç›‘è§†ç¨‹åºçš„æ‰§è¡Œï¼Œä»è€Œç¡®å®šæŸè¡Œä»£ç æœ‰æ²¡æœ‰æ‰§è¡Œï¼Œæ‰§è¡Œäº†å¤šå°‘æ¬¡ã€‚gcovçš„æŠ¥å‘Šæ˜¯åŸºäºæ–‡æœ¬çš„æ ¼å¼çš„ï¼Œçœ‹èµ·æ¥æ˜¯æ¯”è¾ƒéš¾çœ‹ç‚¹ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸ªå«lcovçš„å·¥å…·ï¼Œå°†gcovçš„æŠ¥å‘Šæ ¼å¼è½¬æ¢ä¸ºhtmlçš„ç›´è§‚å½¢å¼ï¼Œåé¢ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;gcovä½¿ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;     1:  #include &amp;lt;stdio.h&amp;gt;
     2:   
     3:  void bubbleSort( int list[], int size )
     4:  {
     5:      int i, j, temp, swap = 1;
     6:   
     7:      while (swap) {
     8:   
     9:          swap = 0;
    10:   
    11:          for ( i = (size-1) ; i &amp;gt;= 0 ; i-- ) {
    12:   
    13:              for ( j = 1 ; j &amp;lt;= i ; j++ ) {
    14:   
    15:                  if ( list[j-1] &amp;gt; list[j] ) {
    16:   
    17:                      temp = list[j-1];
    18:                      list[j-1] = list[j];
    19:                      list[j] = temp;
    20:                      swap = 1;
    21:   
    22:                  }
    23:   
    24:              }
    25:   
    26:          }
    27:   
    28:      }
    29:   
    30:   
    31:  }
    32:   
    33:  int main()
    34:  {
    35:      int theList[10]={10, 9, 8, 7, 6, 5, 4, 3, 2, 1};
    36:      int i;
    37:   
    38:      /* Invoke the bubble sort algorithm */
    39:      bubbleSort( theList, 10 );
    40:   
    41:      /* Print out the final list */
    42:      for (i = 0 ; i &amp;lt; 10 ; i++) { 
    43:          printf(&amp;quot;%d\n&amp;quot;, theList[i]);
    44:      }
    45:      if(i == 0){
    46:          printf(&amp;quot;i = 0\n&amp;quot;);
    47:      }else{
    48:          printf(&amp;quot;i != 0\n&amp;quot;);
    49:      }
    50:   
    51:  }
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¯‘ç¨‹åºæ˜¯å¢åŠ  -ftest-coverage -fprofile-arcs é€‰é¡¹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; [heidong@HEIDONGVM gcov]$ gcc -o bbsort bbsort.c -ftest-coverage -fprofile-arcs
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”Ÿæˆ.gcnoæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œç¨‹åºï¼Œå°†ç”Ÿæˆ.gcdaæ–‡ä»¶ï¼Œç”¨gcovç¨‹åºæ£€æŸ¥ç›¸åº”çš„æºä»£ç æ–‡ä»¶ï¼Œå°†ç”Ÿæˆç»“æœæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; [heidong@HEIDONGVM gcov]$ ./bbsort 
 1 
 2 
 3 
 4 
 5 
 6 
 7 
 8 
 9 
 10 
 i != 0 
 [heidong@HEIDONGVM gcov]$ gcov bbsort.c 
 Fileâ€˜bbsort.câ€™ 
 å·²æ‰§è¡Œçš„è¡Œæ•°ï¼š95.24% (å…± 21 è¡Œ) 
 bbsort.cï¼šæ­£åœ¨åˆ›å»ºâ€˜bbsort.c.gcov
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ£€æŸ¥ç›¸åº”çš„ç»“æœæ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; [heidong@HEIDONGVM gcov]$ cat bbsort.c.gcov 
         -:    0:Source:bbsort.c
         -:    0:Graph:bbsort.gcno
         -:    0:Data:bbsort.gcda
         -:    0:Runs:1
         -:    0:Programs:1
         -:    1:#include &amp;lt;stdio.h&amp;gt;
         -:    2:
         1:    3:void bubbleSort( int list[], int size )
         -:    4:{
         1:    5:    int i, j, temp, swap = 1;
         -:    6:
         4:    7:    while (swap) {
         -:    8:
         2:    9:        swap = 0;
         -:   10:
        22:   11:        for ( i = (size-1) ; i &amp;gt;= 0 ; i-- ) {
         -:   12:
       110:   13:            for ( j = 1 ; j &amp;lt;= i ; j++ ) {
         -:   14:
        90:   15:                if ( list[j-1] &amp;gt; list[j] ) {
         -:   16:
        45:   17:                    temp = list[j-1];
        45:   18:                    list[j-1] = list[j];
        45:   19:                    list[j] = temp;
        45:   20:                    swap = 1;
         -:   21:
         -:   22:                }
         -:   23:
         -:   24:            }
         -:   25:
         -:   26:        }
         -:   27:
         -:   28:    }
         -:   29:
         -:   30:
         1:   31:}
         -:   32:
         1:   33:int main()
         -:   34:{
         1:   35:    int theList[10]={10, 9, 8, 7, 6, 5, 4, 3, 2, 1};
         -:   36:    int i;
         -:   37:
         -:   38:    /* Invoke the bubble sort algorithm */
         1:   39:    bubbleSort( theList, 10 );
         -:   40:
         -:   41:    /* Print out the final list */
        11:   42:    for (i = 0 ; i &amp;lt; 10 ; i++) { 
        10:   43:        printf(&amp;quot;%d\n&amp;quot;, theList[i]);
         -:   44:    }
         1:   45:    if(i == 0){
     #####:   46:        printf(&amp;quot;i = 0\n&amp;quot;);
         -:   47:    }else{
         1:   48:        printf(&amp;quot;i != 0\n&amp;quot;);
         -:   49:    }
         -:   50:
         1:   51:}
         -:   52:
 [heidong@HEIDONGVM gcov]$
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æŸè¡Œæ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œå“ªäº›è¡Œæ²¡æœ‰æ‰§è¡Œè¿‡ï¼ˆ####æ ‡ç¤ºï¼‰ã€‚gcov è¿˜å¯ä»¥æ£€æŸ¥å…¶ä»–å¾ˆå¤šçš„ä¿¡æ¯ï¼Œå¦‚åˆ†æ”¯ï¼Œå‡½æ•°ç­‰ï¼Œè¯¦ç»†å‚è€ƒgcovçš„å¸®åŠ©æ–‡æ¡£ï¼Œå¹¶æµ‹è¯•ä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ–‡æœ¬æ ¼å¼ï¼Œç›¸ä¿¡å¾ˆå¤šäººçš„è§‰å¾—ä¸æ˜¯å¾ˆç›´è§‚ï¼Œäºæ˜¯ä¾¿æœ‰äº†lcovè¿™ä¸ªå·¥å…·ï¼Œå®ƒå¯ä»¥ç®—æ˜¯gcovçš„å‰ç«¯å·¥å…·ï¼Œè¿™æ ·ç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°ä»£ç è¦†ç›–æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;lcovä¸æ˜¯æ ‡å‡†çš„unix/linuxå·¥å…·ï¼Œéœ€è¦ä¸‹è½½ï¼Œåœ°å€æ˜¯ï¼šltp.sourceforge.net/coverage/lcov.php æ³¨æ„è¦FQæ‰å¯ä»¥è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œå®Œgcovçš„æ­¥éª¤åï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; [heidong@HEIDONGVM gcov]$ lcov --capture --directory ./  --output-file bbsort.info 
 Capturing coverage data from ./ 
 Found gcov version: 4.4.6 
 Scanning ./ for .gcda files ... 
 Found 1 data files in ./ 
 Processing bbsort.gcda 
 Finished .info-file creation
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆhtmlæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; [heidong@HEIDONGVM gcov]$ genhtml bbsort.info --output-directory ./lcov/ 
 Reading data file bbsort.info 
 Found 1 entries. 
 Found common filename prefix &amp;quot;/home/heidong/tmp&amp;quot; 
 Writing .css and .png files. 
 Generating output. 
 Processing file gcov/bbsort.c 
 Writing directory view page. 
 Overall coverage rate: 
   lines......: 95.2% (20 of 21 lines) 
   functions..: 100.0% (2 of 2 functions
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;çœ‹ä¸‹ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼š
&lt;img src=&#34;https://luoguochun.cn/img/gcov/gcov.jpg&#34; alt=&#34;html report&#34;&gt;&lt;br&gt;
å®Œæ¯•ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Linux pkg-config</title>
      <link>https://luoguochun.cn/post/2013-05-29-linux-pkg-config/</link>
      <pubDate>Wed, 29 May 2013 22:37:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2013-05-29-linux-pkg-config/</guid>
      <description>&lt;p&gt;pkg-configä¸»è¦çš„ä½œç”¨æ˜¯æä¾›ç¼–è¯‘å’Œè¿æ¥åˆ°è½¯ä»¶åº“çš„ä¿¡æ¯çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ï¼Œå…¸å‹çš„ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [heidong@HEIDONGVM bin]$ pkg-config --cflags --libs libevent 
    -I/usr/local/include  -L/usr/local/lib -levent
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†æ˜¾ç¤ºåŒ…å«å¤´æ–‡ä»¶å’Œè¿æ¥çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆpkg-configæ˜¯å¦‚ä½•è·å–å¾—è¿™äº›ä¿¡æ¯çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;pkg-config æ˜¯ä»xxx.pcçš„æ–‡ä»¶é‡Œé¢å–çš„è½¯ä»¶åŒ…çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œlibevent.pc&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [heidong@HEIDONGVM bin]$ cat /usr/local/lib/pkgconfig/libevent.pc 
    #libevent pkg-config source file
    
    prefix=/usr/local 
    exec_prefix=${prefix} 
    libdir=${exec_prefix}/lib 
    includedir=${prefix}/include
    
    Name: libevent 
    Description: libevent is an asynchronous notification event loop library 
    Version: 2.0.17-stable 
    Requires: 
    Conflicts: 
    Libs: -L${libdir} -levent 
    Libs.private: -lrt 
    Cflags: -I${includedir}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯è§ï¼Œpkg-configé‡Œé¢ä¸»è¦åŒ…å«äº†åŒ…å«å¤´æ–‡ä»¶ï¼Œè¿æ¥åº“çš„ä¿¡æ¯ã€‚åœ¨æœ¬ä¾‹å­ä¸­ï¼ŒRequireså°±ç©ºçš„ï¼Œå¦‚æœéç©ºï¼Œcfalgs, libså°†æ·»åŠ ç›¸åº”çš„ä¾èµ–é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆpkg-configæ˜¯ä»å“ªé‡Œæœç´¢è¿™äº›æ–‡ä»¶çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆpkg-configä¼šä»è‡ªå·±æ ‡å‡†çš„æœç´¢ç›®å½•ï¼ˆå¦‚/usr/lib/pkgconfig/ï¼‰å’ŒPKG_CONFIG_PATHç¯å¢ƒå˜é‡ç›®å½•å¯»æ‰¾ã€‚&lt;br&gt;
å¦‚æœå¯»æ‰¾ä¸åˆ°ï¼Œä¼šè¾“å‡ºè¿™æ ·çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [heidong@HEIDONGVM bin]$ pkg-config --libs qt 
    Package qt was not found in the pkg-config search path. 
    Perhaps you should add the directory containing `qt.pc&#39; 
    to the PKG_CONFIG_PATH environment variable 
    No package &#39;qt&#39; found
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯è§pkg-configå¯¹å‡è½»ç¼–ç¨‹äººå‘˜çš„å·¥ä½œè´Ÿè·æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Linux -- rpm</title>
      <link>https://luoguochun.cn/post/2012-09-18-linux-rpm/</link>
      <pubDate>Tue, 18 Sep 2012 23:48:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-09-18-linux-rpm/</guid>
      <description>&lt;p&gt;rpmæ˜¯redhatï¼ˆç³»åˆ—ï¼‰ç³»ç»Ÿè½¯ä»¶å®‰è£…ï¼Œç®¡ç†çš„å·¥å…·ã€‚ç›¸å¯¹äºé’ˆå¯¹ä»“åº“è€Œè¨€çš„yumï¼Œrpmæ˜¯é’ˆå¯¹å•ä¸ªè½¯ä»¶åŒ…çš„ã€‚é€šå¸¸æƒ…å†µä¸‹Linuxå‘å¸ƒè½¯ä»¶æ˜¯é€šè¿‡æºä»£ç æ–¹å¼ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å°±æ˜¯å¯¹æºç ./configure, make,make installã€‚é™¤äº†è¿™ç§æ–¹å¼å¤–ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯rpmåŒ…ï¼Œå®ƒåˆ™å¯æä¾›å®Œæ•´çš„å·²ç»ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ç¨‹åºæˆ–è€…å…¶å®ƒä¸œè¥¿ï¼ˆå¸®åŠ©æ–‡ä»¶ï¼Œæºç ç­‰ï¼‰ã€‚è¿™é‡Œä¸è¯´.debã€‚&lt;/p&gt;
&lt;p&gt;rpmçš„ä½¿ç”¨ä¸è¯´ï¼Œç›´æ¥çœ‹å¸®åŠ©ï¼Œå¸¸ç”¨çš„å°±æ˜¯-qa, -eï¼Œ-ivhç­‰å‡ ä¸ªé€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¯´è¯´rpmåŒ…çš„åˆ¶ä½œï¼ˆåœ¨åˆ¶ä½œè¿‡ç¨‹ä¸­å‘ç°å¹¶ä¸æ˜¯é‚£ä¹ˆé¡ºåˆ©ï¼Œè¿˜ä¸å¦‚ç”¨æºä»£ç æ–¹å¼å‘å¸ƒï¼‰ï¼Œåˆ¶ä½œæ˜¯ç”¨rmpbuildè¿™ä¸ªå‘½ä»¤å®Œæˆçš„ã€‚è¿™é‡Œä»…è¯´ä¸‹ç®€å•çš„åˆ¶ä½œä»¥ä¾›ä»¥åå‚è€ƒã€‚&lt;/p&gt;
&lt;p&gt;rpmåŒ…çš„ç»“æ„ä¸€èˆ¬ä¸º: name-version-release.architecture.rpm&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name-version-release&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å‘½åç‰ˆæœ¬å·ä¹‹ç±»çš„ï¼Œå¦‚MySQL-server-5.0.i386.rpm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;architecture&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;é€‚ç”¨çš„ç»“æ„ï¼Œå¦‚i386, i686, x86_64, noarch&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;RPMç³»ç»Ÿè¦æ±‚æœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚æœæ˜¯å®‰è£…ç³»ç»Ÿçš„æ—¶å€™å®‰è£…äº†rmpbuild, åˆ™åœ¨redhatç³»åˆ—æ˜¯åœ¨/usr/src/redhat, å¦‚æœè‡ªè¡Œå®‰è£…çš„è¯ï¼Œå¯èƒ½åœ¨ä½ çš„ä¸»ç›®å½•çš„rpbbuildçš„ç›®å½•ä¸‹é¢ï¼‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;BUILD&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rpmbuildåœ¨æ­¤ç›®å½•æ„å»ºè½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RPMS&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rmpbuildå­˜å‚¨ç”Ÿæˆçš„äºŒè¿›åˆ¶rpmæ–‡ä»¶ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SOURCES&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ‰€è¦æ„å»ºè½¯ä»¶çš„æºç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SPECS&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;SPECSæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SRPMS&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rmpbuildå­˜å‚¨ç”Ÿæˆçš„src rpmåŒ…çš„ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;rpmbuildæœ€é‡è¦çš„æ˜¯ä¹¦å†™SPECSæ–‡ä»¶ï¼Œå†™å¥½çš„specsæ–‡ä»¶ä¸¢åˆ°SPECSç›®å½•(ä¹Ÿå¯ä»¥ä¸ç”¨)ã€‚SPECSæ¯”è¾ƒçƒ¦çï¼Œä¸‹é¢åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„ï¼Œä½†ä¸å®Œå…¨ï¼ˆ#å¼€å¤´è¡¨ç¤ºæ³¨é‡Šï¼‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Summary&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…ç®€è¦çš„æè¿°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Name&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Version&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…å®šä¹‰çš„ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Release&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…å‘å¸ƒç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;License&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…è®¸å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Group&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…åˆ†ç±»ï¼ˆåœ¨GNOMEåº”ç”¨ç¨‹åºå¯çœ‹åˆ°ï¼‰å¦‚Applications/Media&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Source&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶åŒ…æºç ä¸‹è½½åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;URL&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æºç ç›¸å…³ç½‘ç«™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Distribution&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å‘è¡Œç‰ˆç³»åˆ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Packager&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ‰“åŒ…äººçš„ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Requires&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¦‚ mysql &amp;gt;= 3.30 æˆ–è€… mysql&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sources&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æºç taråŒ…ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ä¸ºé€šç”¨çš„:%{name}-%{version}.tar.gz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Buildroot&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rmpbuildçš„æš‚å­˜åŒºï¼Œå¯ä»¥è®¾ç½®ä¸ºé€šç”¨çš„:%{_tmppath}/%{name}-%{version}-root&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%description&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶è¯¦ç»†æè¿°ï¼Œå¯å¤šè¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%prep&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è½¯ä»¶ç¼–è¯‘ä¹‹å‰çš„å¤„ç†ï¼Œå¦‚è§£å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%setup&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ä¸çŸ¥é“ä»€ä¹ˆç”¨ï¼Œä¸è¿‡é€šå¸¸åœ¨%prepä¸‹é¢%setup -q&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%build&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¼€å§‹ç¼–è¯‘è½¯ä»¶ï¼Œå¦‚make&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%install&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¼€å§‹å®‰è£…è½¯ä»¶ï¼Œå¦‚make install&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%makeinstall&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è°ƒç”¨Makefielçš„make install&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%clean&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rmpbuildçš„cleanå‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%post&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;rmpbuildæ„å»ºå®Œæˆçš„å‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;%files&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è¦æ‰“åŒ…çš„æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¦‚æœç”¨VIMæ–°å»º.specæ–‡ä»¶ï¼Œåœ¨æ–°å»ºçš„æ—¶å€™ä¼šå¼¹å‡ºç›¸åº”çš„æ¨¡æ¿ç»™ä½ å¡«ï¼Œè¿™ä¸ªä¸é”™ã€‚&lt;/p&gt;
&lt;p&gt;rmpbuildçš„ç¼–è¯‘é€‰é¡¹å¤§è‡´æœ‰ä¸‹é¢å‡ ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-ba&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ„å»ºæ‰€æœ‰çš„ä¸œè¥¿ï¼ŒåŒ…å«äºŒè¿›åˆ¶å’Œæºç çš„RPM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bb&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ„å»ºäºŒè¿›åˆ¶çš„RPM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bc&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ„å»ºï¼ˆç¼–è¯‘ï¼‰ç¨‹åºï¼Œä½†ä¸ç”ŸæˆRPM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bp&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å‡†å¤‡æ„å»ºRPM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bi&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ„å»ºäºŒè¿›åˆ¶çš„RPMå¹¶å®‰è£…ä¹‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bl&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ£€æŸ¥RPMæ–‡ä»¶åˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-bs&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;æ„å»ºæºç çš„RPM&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸€äººç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    Name:           jmm
    Version:        1.0
    Release:        1
    Summary:        Process pool server
    
    Group:          Applications/Internet
    License:        LGPL 2.0
    URL:            www.google.com
    Source0:        jmm-1.0.tar.gz
    BuildRoot:      %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)
    
    #BuildRequires:
    #Requires:       libevent &amp;gt;= 2.0
    
    %description
    Process pool server base on libevent
    
    
    %prep
    %setup -q
    
    %build
    make
    
    %install
    mkdir -p %{buildroot}/usr/local/bin
    #make install DESTDIR=%{buildroot}
    install -m755 jmm %{buildroot}/usr/local/bin/jmm
    
    %clean
    rm -rf %{buildroot}
    
    
    %files
    /usr/local/bin/jmm
    #%defattr(-,root,root,-)
    #%doc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘çš„æœºå­æ˜¯x86_64çš„ï¼Œåœ¨æˆ‘æœºå­ä¸Šè¿è¡Œrmpbuil â€“ba jmm.specå°†åœ¨RPMSç›®å½•ç”Ÿæˆx86_64/jmm-1.0-1.x86_68.rpmï¼Œåœ¨SRPMSç›®å½•ç”Ÿæˆjmm-1.0-1.src.rpmã€‚&lt;br&gt;
è¦æ³¨æ„ä¸€ç‚¹çš„å°±æ˜¯%filesä¸‹é¢çš„æ–‡ä»¶æ˜¯è¦å†™buildrootä¸‹é¢çš„æ–‡ä»¶ã€‚&lt;br&gt;
æŸ¥çœ‹åˆšæ‰ç¼–è¯‘çš„æ–‡ä»¶ä¿¡æ¯ï¼ˆPSè¿™ä¸ªä¸œè¥¿æ˜¯è¦libevent2çš„æ‰€ä»¥ï¼Œå¦‚æœå®‰è£…çš„è¯ï¼Œæ˜¯ä¼šå¤±è´¥çš„ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [heidong@CLOUD x86_64]$ rpm -qpi jmm-1.0-1.x86_64.rpm    
    Name        : jmm                          Relocations: (not relocatable)
    Version     : 1.0                               Vendor: (none)
    Release     : 1                             Build Date: Thu Sep 13 07:07:07 2012
    Install Date: (not installed)               Build Host: CLOUD.NODE.0
    Group       : Applications/Internet         Source RPM: jmm-1.0-1.src.rpm
    Size        : 45357                            License: LGPL 2.0
    Signature   : (none)
    URL         : www.google.com
    Summary     : Process pool server
    Description :
    Process pool server base on libevent
    [heidong@CLOUD x86_64]$ rpm -qpl jmm-1.0-1.x86_64.rpm   
    /usr/local/bin/jmm
    [heidong@CLOUD x86_64]$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹æºRPMçš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    [heidong@CLOUD SRPMS]$ rpm -qpi jmm-1.0-1.src.rpm           
    Name        : jmm                          Relocations: (not relocatable)
    Version     : 1.0                               Vendor: (none)
    Release     : 1                             Build Date: Thu Sep 13 07:07:07 2012
    Install Date: (not installed)               Build Host: CLOUD.NODE.0
    Group       : Applications/Internet         Source RPM: (none)
    Size        : 17198                            License: LGPL 2.0
    Signature   : (none)
    URL         : www.google.com
    Summary     : Process pool server
    Description :
    Process pool server base on libevent
    [heidong@CLOUD SRPMS]$ rpm -qpl jmm-1.0-1.src.rpm   
    jmm-1.0.tar.gz
    jmm.spec
    [heidong@CLOUD SRPMS]$ 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…³äºæºRPMçš„å®‰è£…ï¼Œä¸ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸ä¸€æ ·ï¼ŒæºRPMæ˜¯è¦ç¼–è¯‘çš„ã€‚ä¸€èˆ¬æ˜¯åŒ…å«å‹ç¼©åŒ…å’ŒSPECæ–‡ä»¶ã€‚å®‰è£…åï¼Œæºç æ–‡ä»¶æ˜¯åœ¨SOURCEç›®å½•ï¼ŒSPECæ–‡ä»¶æ˜¯åœ¨SPECç›®å½•ã€‚è¦è¿›å¾—ç¼–è¯‘æ–¹å¯å¾—åˆ°äºŒè¿›åˆ¶RPMåŒ…ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Linux -- yum</title>
      <link>https://luoguochun.cn/post/2012-09-13-linux-yum/</link>
      <pubDate>Thu, 13 Sep 2012 20:10:10 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-09-13-linux-yum/</guid>
      <description>&lt;p&gt;Red Hat/CentOS/SuSEç­‰éƒ½æ˜¯é‡‡ç”¨RPMæˆ–è€…åŸºäºRPMçš„è½¯ä»¶åŒ…æ¥å®‰è£…çš„ã€‚è€Œyumåˆ™å¯ä»¥è®¤ä¸ºæ˜¯rpmçš„è½¯ä»¶ä»“åº“ã€‚å¤§è‡´çš„å‘½ä»¤å¦‚ä¸‹ï¼ˆå‰é¢åŠ *è¡¨ç¤ºæ¯”è¾ƒå¸¸ç”¨ï¼‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;check&lt;/th&gt;
&lt;th&gt;æ£€æŸ¥rpmdbæœ‰æ²¡é—®é¢˜çš„&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;check-update&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥è½¯ä»¶åŒ…æœ‰æ²¡å¯æ›´æ–°çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;clean&lt;/td&gt;
&lt;td&gt;åˆ é™¤ç¼“å­˜æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;deplist&lt;/td&gt;
&lt;td&gt;çœ‹è½¯ä»¶ä¾èµ–æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;distribution-synchronization&lt;/td&gt;
&lt;td&gt;åŒæ­¥åˆ°æœ€æ–°ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;downgrade&lt;/td&gt;
&lt;td&gt;æ¢å¤åˆ°ä¹‹å‰ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*erase&lt;/td&gt;
&lt;td&gt;ç¼·è½½è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;groupinfo&lt;/td&gt;
&lt;td&gt;ä¸€ç»„è½¯ä»¶ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;groupinstall&lt;/td&gt;
&lt;td&gt;ä¸€ç»„è½¯ä»¶å®‰è£…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;grouplist&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ä¸€ç»„è½¯ä»¶æ‰€åŒ…å«çš„å„è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;groupremove&lt;/td&gt;
&lt;td&gt;ç¼·è½½ä¸€ç»„è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*help&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;history&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºå†å²ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*info&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºè½¯ä»¶ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*install&lt;/td&gt;
&lt;td&gt;å®‰è£…è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*list&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºä»“åº“çš„è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;load-transaction&lt;/td&gt;
&lt;td&gt;ä»æ–‡ä»¶åŠ è½½äº‹åŠ¡ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;makecache&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆç¼“å­˜ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*provides&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ä»€ä¹ˆè½¯ä»¶åŒ…æä¾›è¿™æ ·çš„å‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reinstall&lt;/td&gt;
&lt;td&gt;é‡æ–°å®‰è£…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;repolist&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºé…ç½®çš„ä»“åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;resolvedep&lt;/td&gt;
&lt;td&gt;åˆ—å‡ºè§£å†³ä¾èµ–çš„è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*search&lt;/td&gt;
&lt;td&gt;æŸ¥æ‰¾è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;shell&lt;/td&gt;
&lt;td&gt;è¿è¡Œyum shell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*update&lt;/td&gt;
&lt;td&gt;æ›´æ–°è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;upgrade&lt;/td&gt;
&lt;td&gt;ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;version&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre&gt;&lt;code&gt;   yumçš„é…ç½®æ–‡ä»¶æ”¾/etc/yum.confã€‚å¯¹äºè‡ªå·±çš„æˆ–è€…ç¬¬ä¸‰æ–¹çš„ä»“åº“ï¼Œå¯ä»¥å°†é…ç½®å†™åˆ°è¯¥æ–‡ä»¶æˆ–è€…æ”¾åˆ°/etc/yum.repos.dçš„ç›®å½•é‡Œï¼Œå¹¶ä¸”æ–‡ä»¶ä»¥.repoä¸ºç»“å°¾ã€‚

  è‡ªå¸¦ä»“åº“çš„ç±»å‹ï¼š
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;[base]&lt;/th&gt;
&lt;th&gt;è¿™é‡Œæä¾›çš„å’ŒisoåŸºæœ¬ä¸Šä¸€è‡´çš„è½¯ä»¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;[updates]&lt;/td&gt;
&lt;td&gt;è¿™é‡Œæä¾›çš„å’ŒisoåŸºæœ¬ä¸Šä¸€è‡´çš„è½¯ä»¶æ›´æ–°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[extras]&lt;/td&gt;
&lt;td&gt;é¢å¤–çš„è½¯ä»¶ä»“åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[centosplus]&lt;/td&gt;
&lt;td&gt;å’Œ[centosplus]ç±»ä¼¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[contrib]&lt;/td&gt;
&lt;td&gt;ç¤¾åŒºè´¡çŒ®çš„è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[addons]&lt;/td&gt;
&lt;td&gt;è¦ä»RPMç¼–è¯‘çš„ä»“åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[testing]&lt;/td&gt;
&lt;td&gt;ä¸ç¨³å®šè½¯ä»¶çš„ä»“åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre&gt;&lt;code&gt;   æ¯ä¸ªä»“åº“ä¸‹é¢çš„é…ç½®ï¼š
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;åå­—&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;mirrorlist&lt;/td&gt;
&lt;td&gt;ä»é•œåƒåˆ—è¡¨ä¸­è¿”å›çš„URLä½œä¸ºä»“åº“åœ°åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;baseurl&lt;/td&gt;
&lt;td&gt;ä»“åº“URL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gpgcheck&lt;/td&gt;
&lt;td&gt;æ˜¯å¦æ£€æŸ¥GPG&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;enabled&lt;/td&gt;
&lt;td&gt;æ˜¯å¦å…è®¸&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gpgkey&lt;/td&gt;
&lt;td&gt;GPG KEYçš„URL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ˜å¤©ç©ä¸‹RPMã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åŸºäºlibeventè¿›ç¨‹æ± æœåŠ¡å™¨</title>
      <link>https://luoguochun.cn/post/2012-06-23-proccess-pool-server/</link>
      <pubDate>Sat, 23 Jun 2012 11:08:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-06-23-proccess-pool-server/</guid>
      <description>&lt;p&gt;æœ¬ç¨‹åºä»…æ˜¯ä¸ºäº†å­¦ä¹ libeventè€Œå†™çš„ï¼Œä½†å¯ä»¥å½“ä½œæ˜¯ç®€å•çš„ç¨‹åºæ¡†æ¶æ‰©å±•ä¸ºå®é™…çš„åº”ç”¨ã€‚ç¨‹åºæœ¬èº«æ²¡æœ‰ç»è¿‡å¹¿æ³›çš„åŠŸèƒ½æµ‹è¯•å’Œå‹åŠ›æµ‹è¯•ï¼Œä»…ä½œç®€å•çš„åŠŸèƒ½æµ‹è¯•ï¼Œå¦‚æœåœ¨å®é™…åº”ç”¨ä¸­äº§ç”Ÿä»»ä½•é—®é¢˜ä¸ä½œè€…æ— å…³ï¼Œä¹Ÿä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒã€‚ä½†æ¬¢è¿è®¨è®ºç›¸å…³æŠ€æœ¯é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¨‹åºè®¾è®¡æ€è·¯å¾ˆç®€å•ï¼Œä¸€ä¸ªæ§åˆ¶è¿›ç¨‹ï¼ŒMä¸ªä¸šåŠ¡è¿›ç¨‹ï¼ˆMå¯ä»¥é…ç½®ï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªä¸šåŠ¡è¿›ç¨‹åˆè´Ÿè´£Nä¸ªTCPè¿æ¥ï¼ˆNå¯ä»¥é…ç½®ï¼Œå› ä¸ºæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…ï¼Œåˆæ²¡æœ‰ç”¨äºçº¿ç¨‹ï¼Œæ‰€ä»¥ä»æœ¬è´¨æ¥è¯´ï¼Œè¿˜æ˜¯å±äºåŒæ­¥ä¼ è¾“æ•°æ®çš„ï¼‰ã€‚æ§åˆ¶è¿›ç¨‹è´Ÿè´£ç›‘å¬è¿æ¥ï¼Œå½“æ¥æ”¶åˆ°ä¸€ä¸ªTCPè¿æ¥çš„æ—¶å€™ï¼ŒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†å‘åˆ°ç©ºé—²çš„ä¸šåŠ¡è¿›ç¨‹ä¸­ã€‚æ¯ä¸ªä¸šåŠ¡è¿›ç¨‹å°±è´Ÿè´£å¤„ç†å„ä¸ªåˆ†é…åˆ°çš„è¿æ¥ï¼Œæ¥æ”¶åˆ°æ•°æ®ååˆåˆ†å‘åˆ°ä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—æ˜¯å¯ä»¥æ ¹æ®å®é™…çš„éœ€è¦æ‰©å±•çš„ï¼ˆæœ¬ç¨‹åºä¸­åˆ™æ˜¯ä¸€ä¸ªå›å°„æœåŠ¡å™¨çš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç¨‹åºä¸”å«ä¸€ä¸ªåå­—ï¼šjmmã€‚ä¸‹è½½ï¼š&lt;a href=&#34;https://github.com/buf1024/jmm/archive/jmm-1.0.0.zip&#34;&gt;jmm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‹ç¼©åŒ…é‡Œä¸€äº›ç‰¹åˆ«çš„æ–‡ä»¶ä»‹ç»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–‡ä»¶å&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Makefile&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Makefile æ–‡ä»¶ã€‚å¦‚æœæ˜¯æ‰©å±•åº”ç”¨ï¼Œåˆ™ä¿®æ”¹ç¬¬6è¡Œ &amp;lt;&amp;gt;JMM_MY_OBJ=myserver.o æ”¹ä¸ºè‡ªå·±çš„è¦ç¼–è¯‘çš„æ–‡ä»¶å³å¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;jmm.conf&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ä¸€ä¸ªç®€å•çš„é…ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;myserver.c&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ä¸šåŠ¡å®ç°æ¨¡å—ã€‚è¿™ä¸ªå°±æ˜¯ç®€å•çš„å›å°„è€Œå·²ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;jmm_cmmhdr.h&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¯¹å¤–æä¾›çš„æ‰©å±•ç¨‹åºçš„å¤´æ–‡ä»¶ï¼ŒåŒ…å«ä¸€äº›å¸¸é‡çš„å®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;jmm.h&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å¯¹å¤–æä¾›çš„æ‰©å±•ç¨‹åºçš„å¤´æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;clog.h &lt;!-- raw HTML omitted --&gt;clog.c&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç®€å•çš„æ—¥å¿—å¤„ç†æ¨¡å—ã€‚å¯ç‹¬ç«‹åº”ç”¨äºä»»ä½•åº”ç”¨ç¨‹åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ciniconfig.h &lt;!-- raw HTML omitted --&gt;ciniconfig.c&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç®€å•çš„è¯»å–INIé…ç½®æ–‡ä»¶çš„æ¨¡å—ã€‚å¯ç‹¬ç«‹åº”ç”¨äºä»»ä½•åº”ç”¨ç¨‹åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç¼–è¯‘è¯´æ˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…libevent. ä¸‹è½½åœ°å€ï¼š&lt;a href=&#34;www.libevent.org&#34;&gt;libevent.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å»ºç«‹æ–‡ä»¶å¤¹mkdir conf log bin&lt;/li&gt;
&lt;li&gt;æœ€åmakeå¯ä»¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¼šMakefileç›´æ¥çœ‹Makefile&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰©å±•è¯´æ˜ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    typedef struct jmm_hook 
    { 
    const char* (*prog_name)(); 
    const char* (*prog_version)(); 
    const char* (*prog_desc)();
    
    int (*prog_init)(char*); 
    int (*prog_service)(jmm_prog_in*, jmm_prog_out*); 
    int (*prog_uninit)();
    
    void* (*prog_malloc)(size_t); // sys/types.h 
    void (*prog_free)(void*);
    
    }jmm_hook;
    
    typedef void (*prog_init_hook)(jmm_hook* hook);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é™¤äº†åˆ†é…å†…å­˜çš„é‚£ä¸ªå¤–ï¼Œæä¾›å…¶å®ƒæ‰€æœ‰å‡½æ•°çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨REG_INIT_HOOK_FUN(myserver_init_hook)æ³¨å†Œå›è°ƒå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒmyserver.c&lt;/p&gt;
&lt;p&gt;çƒ¦èºï¼Œä¸å†™äº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sys/queue.h</title>
      <link>https://luoguochun.cn/post/2012-05-02-sys-queue-h/</link>
      <pubDate>Wed, 02 May 2012 21:08:14 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-05-02-sys-queue-h/</guid>
      <description>&lt;h3 id=&#34;æ¦‚è¿°&#34;&gt;æ¦‚è¿° &lt;a href=&#34;#%e6%a6%82%e8%bf%b0&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;sys/queue.hæ˜¯LINUX/UNIXç³»ç»Ÿä¸‹é¢çš„ä¸€ä¸ªæ ‡å‡†å¤´æ–‡ä»¶ï¼Œç”¨ä¸€ç³»åˆ—çš„æ•°æ®ç»“æ„å®šä¹‰äº†ä¸€é˜Ÿåˆ—ã€‚åŒ…æ‹¬singly-lined list, list, simple queue(Singly-linked Tail queue), tail queue, circle queueäº”ç§ã€‚&lt;/p&gt;
&lt;p&gt;å¼•ç”¨æ­¤å¤´æ–‡ä»¶å¯¹è¿™äº”ç§æ•°æ®ç»“æ„çš„æè¿°ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A singly-linked list is headed by a single forward pointer. The
elements are singly linked for minimum space and pointer manipulation
overhead at the expense of O(n) removal for arbitrary elements. New
elements can be added to the list after an existing element or at the
head of the list.  Elements being removed from the head of the list
should use the explicit macro for this purpose for optimum
efficiency. A singly-linked list may only be traversed in the forward
direction.  Singly-linked lists are ideal for applications with large
datasets and few or no removals or for implementing a LIFO queue.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A list is headed by a single forward pointer (or an array of forward
pointers for a hash table header). The elements are doubly linked
so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before
or after an existing element or at the head of the list. A list
may only be traversed in the forward direction.&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;A simple queue is headed by a pair of pointers, one the head of the
list and the other to the tail of the list. The elements are singly
linked to save space, so elements can only be removed from the
head of the list. New elements can be added to the list after
an existing element, at the head of the list, or at the end of the
list. A simple queue may only be traversed in the forward direction.&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;A tail queue is headed by a pair of pointers, one to the head of the
list and the other to the tail of the list. The elements are doubly
linked so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before or
after an existing element, at the head of the list, or at the end of
the list. A tail queue may be traversed in either direction.&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;A circle queue is headed by a pair of pointers, one to the head of the
list and the other to the tail of the list. The elements are doubly
linked so that an arbitrary element can be removed without a need to
traverse the list. New elements can be added to the list before or after
an existing element, at the head of the list, or at the end of the list.
A circle queue may be traversed in either direction, but has a more
complex end of list detection.&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå³æ˜¯å•é“¾è¡¨ï¼ŒåŒé“¾è¡¨ï¼Œå•é“¾é˜Ÿåˆ—ï¼ŒåŒå‘é˜Ÿåˆ—ï¼ˆå°¾é˜Ÿåˆ—ï¼‰å’ŒåŒå‘å¾ªç¯é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶è¿™æ˜¯LINUX/UNIXé‡Œé¢çš„æ–‡ä»¶ï¼Œä½†æ­¤æ–‡ä»¶æœ¬èº«æ²¡æœ‰ç”¨åˆ°LINUX/UNIXçš„ç³»ç»Ÿç‰¹æ€§ï¼Œå› è€Œå¯ä»¥è·¨å¹³å°ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å¯¹å„æ•°æ®ç»“æ„ç®€å•æè¿°ä¹‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å•é“¾è¡¨singly-linked-list&#34;&gt;å•é“¾è¡¨(singly-linked list) &lt;a href=&#34;#%e5%8d%95%e9%93%be%e8%a1%a8singly-linked-list&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;singly-linked listå°±æ˜¯ä¸€å•é“¾è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;singly-linked listç›¸å…³çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_HEAD(name, type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å®šä¹‰è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;name: è¡¨å¤´ç»“ç‚¹åã€‚&lt;!-- raw HTML omitted --&gt;type: ç»“ç‚¹ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_HEAD_INITIALIZER(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆå§‹åŒ–å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_ENTRY(type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å®šä¹‰é“¾è¡¨çš„é“¾åŸŸã€‚&lt;!-- raw HTML omitted --&gt;type: ç»“ç‚¹ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;singly-linked listå‡½æ•°ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_INIT(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆå§‹åŒ–å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_INSERT_AFTER(slistelm, elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å°†ç»“ç‚¹elmæ’å…¥åˆ°ç»“ç‚¹slistelmåé¢ã€‚ &lt;!-- raw HTML omitted --&gt;slistelmï¼šé“¾è¡¨ä¸­æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:è¦æ’å…¥çš„ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_INSERT_HEAD(head, elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å°†ç»“ç‚¹elmæ’å…¥åˆ°å¤´ç»“ç‚¹headåé¢ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;!-- raw HTML omitted --&gt;elm:è¦æ’å…¥çš„ç»“ç‚¹ã€‚&lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_REMOVE_HEAD(head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç§»é™¤å°†è¡¨å¤´ç»“ç‚¹ä¸‹é¢ä¸€ä¸ªç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_REMOVE(head, elm, type, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç§»é™¤å°†elmç»“ç‚¹ï¼Œelmç»“ç‚¹ä¸€å®šè¦æ˜¯é“¾è¡¨ä¸­ä¸€ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;type: ç»“ç‚¹ç±»å‹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_FOREACH(var, head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;éå†é“¾è¡¨ï¼Œç›¸å½“äºforå¾ªç¯ã€‚ &lt;!-- raw HTML omitted --&gt;var: ç»“ç‚¹ç±»å‹çš„å˜é‡åç§°ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;singly-linked list è®¿é—®æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_EMPTY(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_FIRST(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è®¿é—®é“¾è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SLIST_NEXT(elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è®¿é—®elmç»“ç‚¹åä¸€ä¸ªå…ƒç´ ã€‚ &lt;!-- raw HTML omitted --&gt;elm:æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    struct SListItem
    {
        int data;
        SLIST_ENTRY(SListItem) entry;
    };
    /*
     struct SListItem
     {
        int data;
        struct {
            struct SListItem* sle_next;
        } entry;
     }
     */
    void slist_demo()
    {
        struct SListItem* item = NULL;
        SLIST_HEAD(SListHead, SListItem) shead;
        /*
         struct SListHead {
             struct SListItem* slh_first;
         } shead;
         */
        SLIST_INIT(&amp;amp;shead);
    
        item = (struct SListItem*)malloc(sizeof(struct SListItem));
        item-&amp;gt;data = 1;
    
        SLIST_INSERT_HEAD(&amp;amp;shead, item, entry);
        /*
         item-&amp;gt;entry.sle_next = (&amp;amp;shead)-&amp;gt;slh_first;
         (&amp;amp;shead)-&amp;gt;slh_first = item;
         */
    
        item = (struct SListItem*)malloc(sizeof(struct SListItem));
        item-&amp;gt;data = 2;
    
        SLIST_INSERT_HEAD(&amp;amp;shead, item, entry);
        /*
         item-&amp;gt;entry.sle_next = (&amp;amp;shead)-&amp;gt;slh_first;
         (&amp;amp;shead)-&amp;gt;slh_first = item;
         */
    
        SLIST_FOREACH(item, &amp;amp;shead, entry){
            printf(&amp;quot;%d &amp;quot;, item-&amp;gt;data);
        }
        /*
         for(item = (&amp;amp;shead)-&amp;gt;slh_first; item; item = item-&amp;gt;entry.sle_next){
            ...
         }
         */
        printf(&amp;quot;\n&amp;quot;);
    
        while(!SLIST_EMPTY(&amp;amp;shead)){
            item = SLIST_FIRST(&amp;amp;shead);
            printf(&amp;quot;remove %d\n&amp;quot;, item-&amp;gt;data);
            SLIST_REMOVE(&amp;amp;shead, item, SListItem, entry);
            free(item);
        }
        /*
         while(!((&amp;amp;shead)-&amp;gt;slh_first == NULL)){
             item = (&amp;amp;shead)-&amp;gt;slh_first;
             ...
             (&amp;amp;shead)-&amp;gt;slh_first = (&amp;amp;shead)-&amp;gt;slh_first-&amp;gt;entry.sle_next;
             ...
         }
         */
    }
    /*ç»“æœ
    2 1
    remove 2
    remove 1
    */
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;åŒå‘é“¾è¡¨list&#34;&gt;åŒå‘é“¾è¡¨(list) &lt;a href=&#34;#%e5%8f%8c%e5%90%91%e9%93%be%e8%a1%a8list&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;listå°±æ˜¯åŒå‘é“¾è¡¨ï¼Œä¸è¿‡é“¾åŸŸæœ‰ç‚¹å¤æ€ªï¼ŒæŒ‡å‘å‰ä¸€ä¸ªç»“ç‚¹æ˜¯æŒ‡é’ˆçš„æŒ‡é’ˆã€‚&lt;br&gt;
list ç›¸å…³å®šä¹‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LIST_HEAD(name, type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å®šä¹‰è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;name: è¡¨å¤´ç»“ç‚¹åã€‚ &lt;!-- raw HTML omitted --&gt;type: ç»“ç‚¹ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_HEAD_INITIALIZER(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆå§‹åŒ–å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_ENTRY(type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å®šä¹‰é“¾è¡¨çš„é“¾åŸŸã€‚ &lt;!-- raw HTML omitted --&gt;type: ç»“ç‚¹ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;listå‡½æ•°&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LIST_INIT(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆå§‹åŒ–å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_INSERT_AFTER(listelm, elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å°†ç»“ç‚¹elmæ’å…¥åˆ°ç»“ç‚¹listelmåé¢ã€‚ &lt;!-- raw HTML omitted --&gt;listelmï¼šé“¾è¡¨ä¸­æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:è¦æ’å…¥çš„ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_INSERT_BEFORE(listelm, elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å°†ç»“ç‚¹elmæ’å…¥åˆ°ç»“ç‚¹listelmå‰é¢ã€‚ &lt;!-- raw HTML omitted --&gt;listelmï¼šé“¾è¡¨ä¸­æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:è¦æ’å…¥çš„ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_INSERT_HEAD(head, elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;å°†ç»“ç‚¹elmæ’å…¥åˆ°å¤´ç»“ç‚¹headåé¢ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:è¦æ’å…¥çš„ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_REMOVE(elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;ç§»é™¤å°†elmç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;elm:æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_FOREACH(var, head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;éå†é“¾è¡¨ï¼Œç›¸å½“äºforå¾ªç¯ã€‚ &lt;!-- raw HTML omitted --&gt;var: ç»“ç‚¹ç±»å‹çš„å˜é‡åç§°ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;listè®¿é—®æ–¹æ³•&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LIST_EMPTY(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_FIRST(head)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è®¿é—®é“¾è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ &lt;!-- raw HTML omitted --&gt;head: è¡¨å¤´ç»“ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LIST_NEXT(elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;è®¿é—®elmç»“ç‚¹åä¸€ä¸ªå…ƒç´ ã€‚ &lt;!-- raw HTML omitted --&gt;elm:æŸç»“ç‚¹ã€‚ &lt;!-- raw HTML omitted --&gt;field:é“¾è¡¨ä¸­é“¾åŸŸçš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;&lt;/em&gt;ï¼Œå› ä¸ºlistæ˜¯åŒå‘é“¾è¡¨ï¼Œä½†åœ¨è®¿é—®æ–¹æ³•é‡Œæ²¡æœ‰å†™å‡ºè®¿é—®å‰ä¸€ä¸ªå…ƒç´ çš„å®ã€‚å› è€Œå¯ä»¥è¿™æ ·å†™ä¸€ä¸ªï¼Œå‚æ•°å«ä¹‰å’ŒLIST_NEXTä¸€æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;   #define LIST_PRE(elm, field) \
   (((elm)-&amp;gt;field.le_pre) != &amp;amp;elm ? *((elm)-&amp;gt;field.le_pre) : NULL)  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç®€å•ä¾‹å­:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;   struct ListItem
   {
       int data;
       LIST_ENTRY(ListItem) entry;
   };
   /*
   struct ListItem
   {
       int data;
       struct{
           struct ListItem* le_next;
           struct ListItem** le_prev;
       } entry;
   };
   */
   void list_demo()
   {
       struct ListItem* item = NULL;
       
       LIST_HEAD(ListHead, ListItem) lhead;
       /*
       struct ListHead {
           struct ListItem* lh_first;
       } lhead;
       */
       LIST_INIT(&amp;amp;lhead);
       /*
       do{
            (&amp;amp;lhead)-&amp;gt;lh_first = NULL;
       }while(0);
       */
   
       item = (struct ListItem*)malloc(sizeof(struct ListItem));
       item-&amp;gt;data = 1;
   
       LIST_INSERT_HEAD(&amp;amp;lhead, item, entry);
       
       item = (struct ListItem*)malloc(sizeof(struct ListItem));
       item-&amp;gt;data = 2;
       
       LIST_INSERT_HEAD(&amp;amp;lhead, item, entry);
       /*
       do{
           if(((item)-&amp;gt;entry.le_next = (&amp;amp;lhead)-&amp;gt;lh_first) != NULL)
               (&amp;amp;lhead)-&amp;gt;lh_first-&amp;gt;entry.le_pre = &amp;amp;(elm)-&amp;gt;entry.le_next;
           (&amp;amp;lhead)-&amp;gt;lh_first = (item);
           (item)-&amp;gt;entry.le_prev = &amp;amp;(&amp;amp;lhead)-&amp;gt;lh_first;
       }while(0);
       */
       LIST_FOREACH(item, &amp;amp;lhead, entry){
           printf(&amp;quot;%d &amp;quot;, item-&amp;gt;data);
       }
       /*
       for ((item) = ((&amp;amp;lhead)-&amp;gt;lh_first);
           (item);
           (item) = ((item)-&amp;gt;entry.le_next)){
           ...
       }    
       */
       printf(&amp;quot;\n&amp;quot;);
   
       while(!LIST_EMPTY(&amp;amp;lhead)){
           item = LIST_FIRST(&amp;amp;lhead);
           printf(&amp;quot;remove %d\n&amp;quot;, item-&amp;gt;data);
           LIST_REMOVE(item, entry);
           free(item);
       }
       /*
       while(!((&amp;amp;lhead)-&amp;gt;lh_first == NULL)){
           item = ((&amp;amp;lhead)-&amp;gt;lh_first);
           ...
           do{
             if ((item)-&amp;gt;entry.le_next != NULL)                \
               (item)-&amp;gt;entry.le_next-&amp;gt;entry.le_prev =             \
                   (item)-&amp;gt;entry.le_prev;                \
             *(item)-&amp;gt;entry.le_prev = (item)-&amp;gt;entry.le_next;            \
           } while (0);
           ...
       }
       */
   }
   /*
   ç»“æœ
   2 1
   remove 2
   remove 1
   */
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç®€å•é˜Ÿåˆ—simple-queue&#34;&gt;ç®€å•é˜Ÿåˆ—(simple queue) &lt;a href=&#34;#%e7%ae%80%e5%8d%95%e9%98%9f%e5%88%97simple-queue&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¡¨å¯¹æœ‰ä¸¤ä¸ªé“¾åŸŸï¼Œåˆ†åˆ«æŒ‡å‘å¤´å’Œå°¾ã€‚&lt;br&gt;
simple queue å®šä¹‰ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_HEAD(name, type)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_HEAD_INITIALIZER(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_ENTRY(type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;simple queueå‡½æ•°ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_INIT(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_INSERT_HEAD(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_INSERT_TAIL(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_INSERT_AFTER(head, listelm, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_REMOVE_HEAD(head, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_REMOVE(head, elm, type, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_FOREACH(var, head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;simple queueæ–¹æ³•ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_EMPTY(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_FIRST(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SIMPLEQ_NEXT(elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•ä¾‹å­ï¼š&lt;br&gt;
ç”¨æ³•ä¸listç”¨æ³•ç±»ä¼¼ï¼Œä¸å†é‡å¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å•é“¾å°¾é˜Ÿåˆ—singled-linked-tail-queue&#34;&gt;å•é“¾å°¾é˜Ÿåˆ—(singled-linked tail queue) &lt;a href=&#34;#%e5%8d%95%e9%93%be%e5%b0%be%e9%98%9f%e5%88%97singled-linked-tail-queue&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªå’ŒSimple queueæ˜¯ä¸€æ ·çš„ï¼Œå‚è€ƒsimple queue&lt;br&gt;
singled-linked tail queueå®šä¹‰(å…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®)&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_HEAD(name, type)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_HEAD_INITIALIZER(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_ENTRY(type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;tail queue å‡½æ•°ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_INIT(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_INSERT_HEAD(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_INSERT_TAIL(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_INSERT_AFTER(head, listelm, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_REMOVE_HEAD(head, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_REMOVE(head, elm, type, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_FOREACH(var, head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;tail queueæ–¹æ³•ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_EMPTY(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_FIRST(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STAILQ_NEXT(elm, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•ä¾‹å­ï¼š&lt;br&gt;
ç”¨æ³•ä¸listç”¨æ³•ç±»ä¼¼ï¼Œä¸å†é‡å¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¾ªç¯é˜Ÿåˆ—circle-queue&#34;&gt;å¾ªç¯é˜Ÿåˆ—(circle queue) &lt;a href=&#34;#%e5%be%aa%e7%8e%af%e9%98%9f%e5%88%97circle-queue&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;å¾ªç¯é˜Ÿåˆ—ã€‚&lt;br&gt;
circle queueå®šä¹‰ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_HEAD(name, type)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_HEAD_INITIALIZER(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_ENTRY(type)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;circle queueå‡½æ•°ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_INIT(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_INSERT_AFTER(head, listelm, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_INSERT_BEFORE(head, listelm, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_INSERT_HEAD(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_INSERT_TAIL(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_REMOVE(head, elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_REPLACE(head, elm, elm2, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;circle queueè®¿é—®æ–¹æ³•ï¼ˆå…·ä½“è¯´æ˜ä¸å†å†™ï¼Œå¯ä»¥å‚è€ƒlistçš„ï¼Œæˆ–è€…å°±ç›´æ¥å±•å¼€å®ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®å®šä¹‰&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_FIRST(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_LAST(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_END(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_NEXT(elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_PREV(elm, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_EMPTY(head)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_FOREACH(var, head, field)&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CIRCLEQ_FOREACH_REVERSE(var, head, field)&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•ä¾‹å­ï¼š&lt;br&gt;
ç”¨æ³•ä¸listç”¨æ³•ç±»ä¼¼ï¼Œä¸å†é‡å¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°ç»“&#34;&gt;å°ç»“ &lt;a href=&#34;#%e5%b0%8f%e7%bb%93&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&amp;amp;emspè™½ç„¶è¿™æ˜¯linux/unixå®ç°çš„ç»è¿‡é•¿æ—¶é—´è€ƒéªŒçš„æˆç†Ÿçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯å¾ˆç†Ÿæ‚‰çš„è¯ï¼Œç¬¬ä¸€æ¬¡ç”¨èµ·æ¥è¿˜æ˜¯æ„Ÿè§‰æŒºä¸ä¹ æƒ¯çš„ã€‚ä½†æ˜¯å¥½åœ¨å„ä¸ªæ•°æ®ç»“æ„çš„å®šä¹‰å’Œæ–¹æ³•éƒ½éå¸¸ç±»ä¼¼ï¼Œæ¥å£æ¯”è¾ƒç»Ÿä¸€ï¼Œå¦‚æœç”¨å¤šçš„äº†ï¼Œç†Ÿæ‚‰äº†ï¼Œæ„Ÿè§‰å°±ä¸é”™äº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>libevent æ¦‚è¿°</title>
      <link>https://luoguochun.cn/post/2012-03-21-libevent-intro/</link>
      <pubDate>Wed, 21 Mar 2012 21:05:10 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-03-21-libevent-intro/</guid>
      <description>&lt;p&gt;å£°æ˜ï¼Œæœ¬æ–‡ç« ä¸œæ¬è¥¿æ‰¯æŠ„æ¥è¿‡çš„ï¼Œå¹¶éåŸåˆ›ï¼Œå†™ç»™è‡ªå·±å‚è€ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºlibeventçš„æè¿°ï¼Œæœ‰ä¸¤ä¸ªç™¾ç§‘çš„è¿æ¥å¯ä»¥å‚è€ƒï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://baike.baidu.com/view/1590523.htm&#34;&gt;libeventç™¾åº¦ç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zh.wikipedia.org/wiki/Libevent&#34;&gt;libeventç»´åŸºç™¾ç§‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç»´åŸºç™¾ç§‘æ—¶ï¼Œæœ‰å‡ ä¸ªæœ‰ç”¨çš„è¿æ¥å¯ä»¥å‚è€ƒï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.wangafu.net/~nickm/libevent-book/&#34;&gt;libevent 2.0å‚è€ƒä¹¦ç±ï¼ˆè‹±æ–‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å¦ä¸€ä¸ªç«äº‰åŠ›çš„äº‹ä»¶åº“ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://software.schmorp.de/pkg/libev.html&#34;&gt;libev(å¦ä¸€ä¸ªæœ‰ç«äº‰åŠ›çš„äº‹ä»¶åº“)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;libeventæ˜¯ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ç½‘ç»œåº“ï¼Œé€‚ç”¨äºwindowsã€linuxã€bsdç­‰å¤šç§å¹³å°ï¼Œå†…éƒ¨ä½¿ç”¨selectã€epollã€kqueueç­‰ç³»ç»Ÿè°ƒç”¨ç®¡ç†äº‹ä»¶æœºåˆ¶ã€‚libeventæ”¯æŒç”¨æˆ·ä½¿ç”¨ä¸‰ç§ç±»å‹çš„äº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯ç½‘ç»œIOã€å®šæ—¶å™¨ã€ä¿¡å·ä¸‰ç§ã€‚Libeventæä¾›äº†DNSï¼ŒHTTP Serverï¼ŒRPCç­‰ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ç›¸å…³ç»„ä»¶&#34;&gt;ç›¸å…³ç»„ä»¶ &lt;a href=&#34;#%e7%9b%b8%e5%85%b3%e7%bb%84%e4%bb%b6&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„ä»¶&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;evutil&lt;/td&gt;
&lt;td&gt;ä¸åŒå¹³å°ç½‘ç»œå®ç°çš„é€šç”¨åŠŸèƒ½å‡½æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;event å’Œevent_base&lt;/td&gt;
&lt;td&gt;libeventçš„æ ¸å¿ƒã€‚æä¾›ä¸å¹³å°æ— å…³çš„äº‹ä»¶é©±åŠ¨çš„éé˜»å¡IOåç«¯çš„APIã€‚å®ƒå¯ä»¥è®©ä½ çŸ¥é“socketä½•æ—¶å¯è¯»å¯å†™ï¼Œè¶…æ—¶å¤„ç†å’Œç³»ç»Ÿä¿¡å·æ¢æµ‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bufferevent&lt;/td&gt;
&lt;td&gt;æä¾›event_baseæ›´æ–¹ä¾¿çš„å°è£…å‡½æ•°ã€‚æä¾›ç¼“å†²æ”¯æŒã€‚buffereventåŒæ ·æä¾›å¤šç§IOåç«¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evbuffer&lt;/td&gt;
&lt;td&gt;buffereventçš„ç¼“å†²æœºåˆ¶åº•å±‚å®ç°ã€‚å¹¶æä¾›æ›´æ–¹ä¾¿å’Œé«˜æ•ˆçš„ç¼“å†²è®¿é—®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evhttp&lt;/td&gt;
&lt;td&gt;ç®€å•çš„HTTPå®¢æˆ·ç«¯æœåŠ¡ç«¯å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evdns&lt;/td&gt;
&lt;td&gt;ç®€å•çš„DNSå®¢æˆ·ç«¯æœåŠ¡ç«¯å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evrpc&lt;/td&gt;
&lt;td&gt;ç®€å•çš„RPCå®¢æˆ·ç«¯æœåŠ¡ç«¯å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;ç›¸å…³åº“&#34;&gt;ç›¸å…³åº“ &lt;a href=&#34;#%e7%9b%b8%e5%85%b3%e5%ba%93&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åº“&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;libevent_core&lt;/td&gt;
&lt;td&gt;æ ¸å¿ƒäº‹ä»¶å’Œç¼“å†²åŠŸèƒ½ã€‚åŒ…å«æ‰€æœ‰çš„event_base, evbuffer, bufferevent, å’Œå·¥å…·å‡½æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;libevent_extra&lt;/td&gt;
&lt;td&gt;åè®®ç›¸å…³çš„åŠŸèƒ½ï¼ŒåŒ…å«HTTP, DNS, å’ŒRPCã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;libevent&lt;/td&gt;
&lt;td&gt;åŒ…å«libevent_coreå’Œlibevent_extraã€‚ç”±äºå†å²çš„åŸå› è€Œå­˜åœ¨ã€‚æ–°åº”ç”¨ç¨‹åºä¸åº”è¯¥è¿æ¥è¿™ä¸ªåº“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;libevent_pthread&lt;/td&gt;
&lt;td&gt;ä¾èµ–äº‹pthreadçº¿ç¨‹åº“ï¼Œæä¾›çº¿ç¨‹å’Œé”å®ç°ã€‚å½“ä½ ä½¿ç”¨pthreadå¤šçº¿ç¨‹æ—¶ï¼Œæ‰è¿æ¥è¿™ä¸ªåº“ã€‚ï¼ˆåªåœ¨æŸäº›å¹³å°å­˜åœ¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;libevent_openssl&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºOpenSSLåº“çš„åŠ å¯†é€šä¿¡æ”¯æŒã€‚å½“ä½ ä½¿ç”¨åŠ å¯†é€šä¿¡æ—¶ï¼Œæ‰è¿æ¥è¿™ä¸ªåº“ã€‚ï¼ˆåªåœ¨æŸäº›å¹³å°å­˜åœ¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;ç›¸å…³å¤´æ–‡ä»¶&#34;&gt;ç›¸å…³å¤´æ–‡ä»¶ &lt;a href=&#34;#%e7%9b%b8%e5%85%b3%e5%a4%b4%e6%96%87%e4%bb%b6&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;    æ‰€æœ‰çš„å¤´æ–‡ä»¶å®‰è£…åœ¨event2ç›®å½•ä¸‹ã€‚å¤´æ–‡ä»¶å¤§ç±»åˆ«å¦‚ä¸‹è¡¨ï¼š
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;APIå¤´æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;è¿™ä¸ªæ˜¯libeventçš„å¯¹å¤–å¤´æ–‡ä»¶ï¼Œæ–‡ä»¶æ²¡æœ‰ä»»ä½•åè¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å…¼å®¹å¤´æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;å…¼å®¹å¤´æ–‡ä»¶åŒ…å«æŠ›å¼ƒçš„å‡½æ•°å®šä¹‰ï¼Œé™¤éæ˜¯ä¸ºäº†ç§»å€¼æ—§çš„ç¨‹åºï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨ã€‚æ–‡ä»¶ä»¥_compat.hç»“å°¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç»“æ„ä½“å¤´æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;libeventç»“æ„ä½“å®šä¹‰çš„å¤´æ–‡ä»¶ã€‚æ–‡ä»¶ä»¥_struct.hç»“å°¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre&gt;&lt;code&gt;    é™¤äº†ä¸Šè¿°æåˆ°çš„å¤´æ–‡ä»¶å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸ºäº†å…¼å®¹æ—§ç¨‹åºè€Œä½¿ç”¨çš„å¤´æ–‡ä»¶ã€‚å®ƒä»¬ä¸æ”¾åœ¨event2ç›®å½•ã€‚æ”¾åœ¨è¿™ä¸ªç›®å½•çš„ä¸Šä¸€å±‚ã€‚è¿™äº›æ–‡ä»¶å…¶å®æ˜¯æ–°æ–‡ä»¶çš„åŒ…è£…è€Œå·²ã€‚å¯¹åº”è¯¥å…³ç³»å¦‚ä¸‹è¡¨ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ—§å¤´æ–‡ä»¶&lt;/th&gt;
&lt;th&gt;è¢«æ›¿æ¢çš„å¤´æ–‡ä»¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;event.h&lt;/td&gt;
&lt;td&gt;event2/event*.h, event2/buffer*.h, event2/bufferedevent*.h, event2/tag*.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evdns.h&lt;/td&gt;
&lt;td&gt;event2/dns*.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evhttp.h&lt;/td&gt;
&lt;td&gt;event2/http*.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rvrpc&lt;/td&gt;
&lt;td&gt;event2/rpc*.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;evutil&lt;/td&gt;
&lt;td&gt;event2/util*.h&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;å…¶å®ƒ&#34;&gt;å…¶å®ƒ &lt;a href=&#34;#%e5%85%b6%e5%ae%83&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;    æœ¬æ–‡å¤§å¤šå‰½çªƒè‡ª[libevent-book](http://www.wangafu.net/~nickm/libevent-book/)ã€‚å…·ä½“è¯·è¯¦ç»†å‚è€ƒä¹‹ã€‚å¦å¤–å¾ˆå¤šæ‡’äººä¸å¤ªä¹ æƒ¯LINUXçš„ç¼–ç¨‹è°ƒè¯•ç¯å¢ƒï¼Œæ‰€ä»¥æ ¹æ®libeventæä¾›çš„Makefileå»ºäº†ä¸ªVC2008çš„è§£å†³æ–¹æ¡ˆï¼Œç›´æ¥è§£å‹å‡ºæ¥ä¸¢åˆ°libeventç›®å½•ï¼Œåˆ†åˆ«ç¼–è¯‘å„ä¸ªåº“ã€‚å¦ï¼Œåªä¸ºäº†è°ƒè¯•æDEBUGç‰ˆæœ¬çš„ï¼ŒRELEASEçš„åŠ¨éƒ½æ²¡åŠ¨ï¼Œsamepleå·¥ç¨‹åŒ…æ‹¬æ‰€æœ‰çš„ä¾‹å­äº†ï¼Œç›´æ¥ç¼–è¯‘æ˜¯ä¸é€šçš„ã€‚æ‰€ä»¥å¦‚æœä½ è¦åˆ†åˆ«æµ‹è¯•çš„è¯ï¼Œè¦ææ‰å…¶å®ƒçš„ã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯#if 0 #endifä¹‹ç±»çš„ã€‚[ä¸‹è½½VC2008è§£å†³æ–¹æ¡ˆ](http://download.imlgc.com/lib/libevent/vcbuild.zip)ã€‚&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>è¿·ä½ æ—¥å¿—ç±»Minilog</title>
      <link>https://luoguochun.cn/post/2012-02-18-minlog/</link>
      <pubDate>Sat, 18 Feb 2012 10:15:09 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-02-18-minlog/</guid>
      <description>&lt;h1 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹ &lt;a href=&#34;#%e7%ae%80%e4%bb%8b&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;æ—¥å¿—ï¼Œåœ¨ä¸€èˆ¬ç³»ç»Ÿé‡Œæ˜¯éå¸¸éå¸¸é‡è¦çš„ï¼Œå®ƒä¸ä»…è·Ÿè¸ªåˆ°ç¨‹åºçš„æ‰§è¡Œï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œå„æ–¹é¢åˆ†æçš„åŸºç¡€ã€‚å…¶é‡è¦æ€§åœ¨è¿™é‡Œä¸å†ä¸€ä¸€è¯´æ˜ï¼Œæœ‰å…´è¶£å¯è‡ªè¡ŒGOOGLEä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;æ—¥å¿—çš„å®ç°å¯ä»¥å¾ˆå¤æ‚ï¼ŒåŠŸèƒ½å¼ºå¤§çš„å¦‚javaçš„&lt;a href=&#34;http://logging.apache.org/log4j/&#34;&gt;log4j&lt;/a&gt;å’Œç§»å€¼åˆ°C++çš„&lt;a href=&#34;http://log4cpp.sourceforge.net/&#34;&gt;log4cpp&lt;/a&gt;ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å¾ˆç®€å•ï¼Œå°±æ˜¯ç®€å•çš„å‘æ§åˆ¶å°æ‰“å°å’Œå†™æ–‡ä»¶ã€‚Minilogå°±æ˜¯å±äºè¿™ç§ç®€å•çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è·¨å¹³å°ï¼Œå½“ç„¶æˆ‘åªæµ‹è¯•LINUXå’ŒWINDOWSï¼Œä¹°ä¸èµ·è‹¹æœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æä¾›éå¸¸ä¸°å¯Œçš„å®ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ²¡æµ‹è¯•è¿‡æ€§èƒ½ï¼Œä¸è¿‡ä¼°è®¡ä¸ä¼šå¾ˆå·®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è½½ï¼š&lt;a href=&#34;http://download.imlgc.com/code/c++/minilog/minilog.zip&#34;&gt;minilog.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;minilog.zipæ–‡ä»¶åˆ—è¡¨ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–‡ä»¶&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;minilog.h&lt;/td&gt;
&lt;td&gt;æ—¥å¿—ç±»çš„å¤´æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;minilog.cpp&lt;/td&gt;
&lt;td&gt;æ—¥å¿—ç±»çš„å®ç°æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;test.h&lt;/td&gt;
&lt;td&gt;æµ‹è¯•æ¡†æ¶ï¼Œå¯å‚é˜…ä¹‹å‰å†™çš„&lt;a href=&#34;http://imlgc.com/?p=20&#34;&gt;Very Very Simple C++ Testing Framework&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;minilogtest.cpp&lt;/td&gt;
&lt;td&gt;æµ‹è¯•æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;test.cpp&lt;/td&gt;
&lt;td&gt;æµ‹è¯•å¯åŠ¨å‡½æ•°ï¼Œå³mainå‡½æ•°æ‰€åœ¨æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;å®ç°å’Œä½¿ç”¨&#34;&gt;å®ç°å’Œä½¿ç”¨ &lt;a href=&#34;#%e5%ae%9e%e7%8e%b0%e5%92%8c%e4%bd%bf%e7%94%a8&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Minilogçš„å®ç°åªæœ‰ä¸€ä¸ªç±»ï¼Œä¸ºä¸€å•ä»¶ã€‚ä¸ºäº†é¿å…é¢‘ç¹çš„IOäº¤äº’ï¼Œæ—¥å¿—å…ˆè¿›è¡Œç¼“å­˜ï¼Œå½“ç¼“å­˜æ»¡æˆ–è€…åˆ·æ—¥å¿—æ—¶ï¼Œæ‰è¿›è¡ŒIOæ“ä½œã€‚æ—¥å¿—çº§åˆ«åˆ†åˆ«ä¸ºï¼šALL, DEBUG, INFO, WARNING, ERROR, FATAL, OFFã€‚ALLçº§åˆ«æœ€ä½ï¼ŒOFFçº§åˆ«æœ€é«˜ã€‚ç»ˆç«¯æ—¥å¿—çš„è¾“å‡ºä¸ç¼“å­˜ï¼Œä¸åŒçš„çº§åˆ«è¾“å‡ºæ¥åŒçš„é¢œè‰²ã€‚&lt;/p&gt;
&lt;p&gt;ä¾¿æ·çš„æ“ä½œå®ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LOG_DEBUG&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè°ƒè¯•æ—¥å¿—ï¼ŒDEBUGçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_INFO&lt;/td&gt;
&lt;td&gt;è¾“å‡ºæ¶ˆæ¯æ—¥å¿—ï¼ŒINFOçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_WARN&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè­¦å‘Šæ—¥å¿—ï¼ŒWARNINGçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_ERROR&lt;/td&gt;
&lt;td&gt;è¾“å‡ºé”™è¯¯æ—¥å¿—ï¼ŒERRORçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_FATAL&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè‡´å‘½æ—¥å¿—ï¼ŒFATALçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_FILE_LEVEL&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ–‡ä»¶æ—¥å¿—çº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_CONSOLE_LEVEL&lt;/td&gt;
&lt;td&gt;è®¾ç½®ç»ˆç«¯æ—¥å¿—çº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_LEVEL&lt;/td&gt;
&lt;td&gt;è®¾ç½®ç»ˆç«¯å’Œæ–‡ä»¶æ—¥å¿—çº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_PATH&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ—¥å¿—çš„è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_FILE_FIXED&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ—¥å¿—çš„æ–‡ä»¶åï¼Œä¸åŠ ä»»ä½•ä¿®é¥°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_FILE&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ—¥å¿—çš„æ–‡ä»¶åï¼ŒåŠ æ—¶é—´å’Œè¿›ç¨‹å·ä¿®é¥°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SET_LOG_BUF_SIZE&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ—¥å¿—ç¼“å†²å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_FLUSH&lt;/td&gt;
&lt;td&gt;åˆ·æ—¥å¿—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_RELEASE&lt;/td&gt;
&lt;td&gt;é‡Šæ”¾æ—¥å¿—ï¼Œäº‹å®ä»»ä½•äº‹æƒ…éƒ½ä¸åš&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOG_IS_READY&lt;/td&gt;
&lt;td&gt;æµ‹è¯•æ—¥å¿—æ˜¯å¦å‡†å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åŸå…ˆçš„å•ä»¶å®ç°æ˜¯åŠ¨æ€åˆ†é…å†…å­˜çš„ï¼Œäºæ˜¯æœ‰LOG_RELEASEè¿™æ˜¯å†™æ³•ï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œå½“ç¨‹åºé€€å‡ºåï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼é‡Šæ”¾ï¼Œæ˜¯ä¸ä¼šåˆ·æ—¥å¿—çš„ï¼Œäºæ˜¯é‡‡ç”¨ä¸‹é¢è¿™ç§æ–¹æ³•å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Minilog&amp;amp; Minilog::GetInst()
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/*    if (sm_pInst == 0)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sm_pInst = new Minilog;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    return *sm_pInst;*/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    static Minilog theLog;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    return theLog;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;void Minilog::ReleaseRC()
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/*    if (sm_pInst != 0)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;delete sm_pInst;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sm_pInst = 0;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }*/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå«MODULEçš„æ¨¡å—ï¼Œè¦è®°å½•è¿™ä¸ªæ¨¡å—çš„æ—¥å¿—ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#define MODULE &amp;#34;[module]&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#define X_INFO(...) LOG_INFO(MODULE __VA_ARGS__)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ä»¥ä¸‹çœç•¥
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Minilogæä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ç”¨å®å°±å¯ä»¥è¿›è¡Œæ—¥å¸¸çš„ä½¿ç”¨äº†ï¼Œä¸å»ºè®®ç›´æ¥ä½¿
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ç”¨ï¼Œå¦‚æœæƒ³äº†è§£å¦‚ä½•å®ç°ï¼Œè¯·å‚é˜…ä»£ç ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹ &lt;a href=&#34;#%e7%a4%ba%e4%be%8b&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;SET_LOG_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;SET_LOG_FILE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;//SET_LOG_LEVEL(&amp;#34;debug&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nf&#34;&gt;SET_LOG_FILE_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;SET_LOG_CONSOLE_LEVEL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;debug&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;207&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;207&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef _MSC_VER
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_WARN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;207&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;207&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_FATAL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;207&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG_FLUSH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œç»“æœï¼š
&lt;img src=&#34;https://luoguochun.cn/img/minlog/minlog.jpg&#34; alt=&#34;minlog.jpg&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;å…¶å®ƒ&#34;&gt;å…¶å®ƒ &lt;a href=&#34;#%e5%85%b6%e5%ae%83&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;å¦‚æœå¯èƒ½ï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¸æä¾›VCè§£å†³æ–¹æ¡ˆï¼Œå¦‚æœç”¨VCã€‚å½“ç„¶ä½ å…ˆè¦è®¾ç½®ä½ çš„VCç¯å¢ƒï¼ˆè¿è¡ŒVCå®‰è£…ç›®å½•ä¸‹vcvarsall.batè¿™ä¸ªæ–‡ä»¶å³å¯ï¼‰ï¼Œå‘½ä»¤è¡Œç¼–è¯‘æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;E:\minilog&amp;gt;cl /c /EHsc *.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ç”¨äº 80x86 çš„ Microsoft (R) 32 ä½ C/C++ ä¼˜åŒ–ç¼–è¯‘å™¨ 15.00.30729.01 ç‰ˆ
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ç‰ˆæƒæ‰€æœ‰(C) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;minilog.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;minilogtest.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;test.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;æ­£åœ¨ç”Ÿæˆä»£ç ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;E:\minilog&amp;gt;link /out:test.exe *.obj
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Microsoft (R) Incremental Linker Version 9.00.30729.01
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Copyright (C) Microsoft Corporation.  All rights reserved.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;E:\minilog&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“ç„¶ï¼Œä½ ç”¨å…¶å®ƒç¼–è¯‘å™¨çš„è¯ï¼Œä½ ä¼ªè£…ä¸€ä¸‹VCï¼Œå› ä¸ºVCä¼šå®šä¹‰_MSC_VERè¿™ä¸ªå®ï¼Œå…¶å®ç¼–è¯‘å™¨æ²¡æœ‰ï¼Œè¿™ä¸ªå®æ˜¯åˆ¤å®šæ˜¯å¦åœ¨WINDOWSçš„æ ‡å‡†ï¼Œå½“ç„¶å®é™…æ˜¯ä¸åˆç†çš„ï¼Œå¦‚æœéœ€è¦ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ï¼Œæ¯”å¦‚ç”¨mingw g++ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;E:\minilog&amp;gt;g++ -o test.exe *.cpp -D_MSC_VER
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>MyJson, JSON C&#43;&#43; çš„å¦ä¸€ç§å®ç°</title>
      <link>https://luoguochun.cn/post/2012-02-10-myjson-intro/</link>
      <pubDate>Fri, 10 Feb 2012 21:05:10 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2012-02-10-myjson-intro/</guid>
      <description>&lt;p&gt;JSONï¼ŒJavaScript Object Notation, æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒå’ŒXML, YAMLç­‰æ ¼å¼åŒ–çš„æ•°æ®æ ¼å¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼ˆäººæœºï¼‰é˜…è¯»å’Œäº¤æ¢çš„æ•°æ®æ ¼å¼ã€‚&lt;/p&gt;
&lt;p&gt;JSONï¼Œæ˜¯é”®å€¼çš„æ•°æ®ç»“æ„ï¼Œé”®æ˜¯ä¸»è¦æ˜¯æŒ‡å­—ç¬¦ä¸²ï¼Œé”®ä¸»è¦æ˜¯æŒ‡å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼ŒJSONå¯¹è±¡ï¼ŒJSONæ•°ç»„ï¼Œtrue, false, nullè¿™å‡ ç§ç±»å‹ã€‚è¦è¯¦ç»†äº†è§£è¿™ç§ç®€å•è€Œåˆå®ç”¨çš„æ•°æ®æ ¼å¼ï¼Œè¯·å‚é˜…ï¼Œ&lt;a href=&#34;http://www.json.org/&#34;&gt;è‹±æ–‡å®˜ç½‘&lt;/a&gt;ï¼Œ&lt;a href=&#34;http://www.json.org/json-zh.html&#34;&gt;ä¸­æ–‡å®˜ç½‘&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;JSONçš„å®ç°æœ‰å¾ˆå¤šï¼ŒåŸºæœ¬ä¸Šä¸–ç•Œä¸Šæ¯ç§è¯­è¨€éƒ½æœ‰å®ç°ï¼Œç”¨C++å®ç°çš„ä¹Ÿæœ‰ä¸å°‘ï¼Œå„æœ‰ç‰¹è‰²ã€‚å› ä¸ºå¹´å‰å¾ˆç©ºé—²ï¼Œäºæ˜¯ä¹Ÿéšæ‰‹å®ç°äº†ä¸€ä¸ªï¼Œä¸”å«myjsonï¼Œç‰¹ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›¸å¯¹æ¥è¯´å°ï¼Œå…¶å®æ¯”è¾ƒå•°å—¦&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨éå¸¸æ–¹ä¾¿å’Œç›´è§‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶ä¸å®Œå…¨å®ç°JSONï¼Œä½¿ç”¨&lt;a href=&#34;http://sourceforge.net/projects/jsoncpp/&#34;&gt;jsoncpp&lt;/a&gt;çš„æµ‹è¯•æ•°æ®å®Œå…¨æµ‹è¯•è¿‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨å®æ—¶äº¤äº’çš„ç³»ç»Ÿä¸­ï¼Œå¯èƒ½æ•ˆç‡ä¸é«˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€æ—¶å…´èµ·å†™çš„ï¼Œå¯èƒ½æ¯”è¾ƒç²—ç•¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â€¦â€¦&lt;/p&gt;
&lt;p&gt;ä¸‹è½½ï¼š&lt;a href=&#34;http://download.imlgc.com/code/c++/myjson/myjson.zip&#34;&gt;myjson.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;myjson.zip æ–‡ä»¶åˆ—è¡¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–‡ä»¶/ç›®å½•&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;json.h&lt;/td&gt;
&lt;td&gt;myjson çš„å¤´æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;json.cpp&lt;/td&gt;
&lt;td&gt;myjson çš„å®ç°æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;test.h&lt;/td&gt;
&lt;td&gt;ç®€å•çš„æµ‹è¯•æ¡†æ¶ï¼Œåœ¨&lt;a href=&#34;3/post/2012-02-09-simple-c++-test-framework/&#34;&gt;/post/2012-02-09-simple-c++-test-framework/&lt;/a&gt;æ–‡ç« ä¸­è¯´çš„çš„æ¡†æ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;test.cpp&lt;/td&gt;
&lt;td&gt;myjsonçš„æµ‹è¯•æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;testdata&lt;/td&gt;
&lt;td&gt;æµ‹è¯•æ•°æ®ç›®å½•ï¼Œjsoncppçš„æµ‹è¯•æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;å®ç°&#34;&gt;å®ç° &lt;a href=&#34;#%e5%ae%9e%e7%8e%b0&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;myjsonçš„ä¸»è¦ç±»çš„ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luoguochun.cn/img/myjson/myjson.png&#34; alt=&#34;image&#34; title=&#34;image&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­JsonValueItemæ˜¯ä¸€æ—¶æ‰‹ç—’å†™çš„ï¼Œä»…å……å½“æ¡¥æ¢ä½œç”¨ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä½¿ç”¨æ—¶ç”¨åˆ°çš„æ˜¯JsonArray, JsonValueï¼Œå’ŒJsonè¿™ä¸‰ä¸ªç±»ã€‚&lt;/p&gt;
&lt;p&gt;å„ä¸ªç±»çš„è¯´æ˜ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Json&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºä¸€ä¸ªJSONå¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JsonValue&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºJSONçš„å€¼ï¼Œå€¼åŒ…å«JSONå¯¹è±¡ï¼ŒJSONæ•°ç»„ï¼Œæ•°å€¼ï¼Œå­—ç¬¦ä¸²ï¼Œfalse, true, nullã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JsonArray&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºä¸€ä¸ªJSONæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ä¸ºJSONçš„å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JsonValueItem&lt;/td&gt;
&lt;td&gt;ç”¨äºç»„ç»‡JSONæ•°æ®ç»“æ„çš„ç±»ï¼Œå®é™…ä¸ä¼šä½¿ç”¨åˆ°ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ä»¥é”®ä½œä¸ºå…³é”®å­—ï¼Œç»„æˆä¸€æœ‰åºçš„é“¾è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸»è¦ç±»ä¸»è¦å‡½æ•°è¯´æ˜ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»&lt;/th&gt;
&lt;th&gt;å‡½æ•°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Json&lt;/td&gt;
&lt;td&gt;static int Parse(Json*&amp;amp; pJson, const char* pBuf);&lt;/td&gt;
&lt;td&gt;è§£æJSONæ•°æ®ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼špJson è¿”å›çš„JSONå¯¹è±¡&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼špBuf  è¦è§£æçš„æ•°æ®&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼š0æˆåŠŸï¼Œå…¶å®ƒå‚è€ƒé”™è¯¯ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;static int Load(Json*&amp;amp; pJson, const char* pFilePath);&lt;/td&gt;
&lt;td&gt;ä»æ–‡ä»¶è§£æJSONæ•°æ®ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼špJson è¿”å›çš„JSONå¯¹è±¡&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼špFilePathæ–‡ä»¶è·¯å¾„&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼š0æˆåŠŸï¼Œå…¶å®ƒå‚è€ƒé”™è¯¯ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;int Save(const char* pFilePath);&lt;/td&gt;
&lt;td&gt;å°†JSONå¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼špFilePathæ–‡ä»¶è·¯å¾„&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼š0æˆåŠŸï¼Œå…¶å®ƒå‚è€ƒé”™è¯¯ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue* Set(const char* szKey, JsonValue&amp;amp; sVal);&lt;/td&gt;
&lt;td&gt;è®¾ç½®JSONé”®å€¼ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šszKey å¥&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šsVal å€¼&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šJSONå€¼ï¼Œ0åˆ™å‡ºé”™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue* Get(const char* szKey) const;&lt;/td&gt;
&lt;td&gt;è·å–JSONå€¼ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šszKey å¥&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šJSONå€¼ï¼Œ0åˆ™å‡ºé”™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;void Dump(std::string&amp;amp; strDump) const;&lt;/td&gt;
&lt;td&gt;å°†JSONå¯¹è±¡ä»¥æœ€ç´§å¯†çš„æ–¹å¼å¯¼å‡ºã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šstrDumpè¿”å›çš„æ•°æ®&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šæ— &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;void DumpFormat(std::string&amp;amp; strDump, int nSpace = FORMAT_SPACE) const;&lt;/td&gt;
&lt;td&gt;å°†JSONå¯¹è±¡ä»¥æ ¼å¼åŒ–çš„æ–¹å¼å¯¼å‡ºã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šstrDumpè¿”å›çš„æ•°æ®&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šSpace ç©ºæ ¼æ•°&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šæ— &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue&amp;amp; operator [] (const char* szKey);/const JsonValue&amp;amp; operator [] (const char* szKey) const;&lt;/td&gt;
&lt;td&gt;JSONå¯¹è±¡[]æ“ä½œç¬¦ï¼Œæœ‰ç‚¹ç±»ä¼¼STLçš„MAPï¼Œå½“é”®ä¸å­˜åœ¨æ—¶ï¼Œæ’å…¥ä¸€ä¸ªã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šszKey å¥&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šJSONå€¼ï¼ˆå¯èƒ½æ— æ•ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JsonValue&lt;/td&gt;
&lt;td&gt;operator const char*();&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;operator char*();&lt;!-- raw HTML omitted --&gt;operator int();&lt;!-- raw HTML omitted --&gt;operator long long();&lt;!-- raw HTML omitted --&gt;operator float();&lt;!-- raw HTML omitted --&gt;operator double();&lt;!-- raw HTML omitted --&gt;operator Json();&lt;!-- raw HTML omitted --&gt;operator JsonArray();&lt;/td&gt;
&lt;td&gt;å„ç§è½¬æ¢æ“ä½œç¬¦ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue&amp;amp; operator = (bool bVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (const char* szVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (int nVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (long long llVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (float fVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (double fVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (const Json&amp;amp; sVal);&lt;!-- raw HTML omitted --&gt;JsonValue&amp;amp; operator = (const JsonArray&amp;amp; sArr);&lt;/td&gt;
&lt;td&gt;å„ç§è½¬æ¢èµ‹å€¼ç¬¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue&amp;amp; operator [] (const char* szKey);&lt;!-- raw HTML omitted --&gt;const JsonValue&amp;amp; operator [] (const char* szKey) const;&lt;/td&gt;
&lt;td&gt;å½“å€¼æ˜¯JSONå¯¹è±¡æ˜¯ï¼Œæ­¤æ“ä½œç¬¦æœ‰æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JsonArray&lt;/td&gt;
&lt;td&gt;JsonValue&amp;amp; Get(int nIndex) const;&lt;/td&gt;
&lt;td&gt;è·å–æŸä¸‹æ ‡çš„JSONå€¼ã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šä¸‹æ ‡&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼šJSONå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;JsonValue&amp;amp; operator[](int nIndex);/const JsonValue&amp;amp; operator[](int nIndex) const;&lt;/td&gt;
&lt;td&gt;åŒä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;int Add(JsonValue&amp;amp; sVal);&lt;/td&gt;
&lt;td&gt;å¢åŠ ä¸€JSONå€¼åˆ°æ•°ç»„é‡Œã€‚&lt;!-- raw HTML omitted --&gt;å‚æ•°ï¼šsVal&lt;!-- raw HTML omitted --&gt;è¿”å›ï¼š0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;int GetSize() const;&lt;/td&gt;
&lt;td&gt;è¿”å›æ•°å€¼çš„é•¿åº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹ &lt;a href=&#34;#%e7%a4%ba%e4%be%8b&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ç®€å•çš„æ¼”ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Json json;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    JsonValue jv = true;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    json[&amp;#34;a&amp;#34;] = jv;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    jv = json;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    json.Set(&amp;#34;c&amp;#34;, jv);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    jv = (char*)0;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    json.Set(&amp;#34;d&amp;#34;, jv);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    JsonArray sArr;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    sArr[0] = 100;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    sArr[1] = &amp;#34;abcdefg&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    sArr[2] = false;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    jv = sArr;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    json.Set(&amp;#34;e&amp;#34;, jv);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // ä¸Šè¿°ä»£ç äº§ç”Ÿä»¥ä¸‹JSONæ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;#34;a&amp;#34;:true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;#34;c&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &amp;#34;a&amp;#34;:true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   },
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &amp;#34;d&amp;#34;:null,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &amp;#34;e&amp;#34;:[
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     100,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &amp;#34;abcdefg&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     false
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;å…¶å®ƒ&#34;&gt;å…¶å®ƒ &lt;a href=&#34;#%e5%85%b6%e5%ae%83&#34; class=&#34;anchor&#34;&gt;ğŸ”—&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;ä¸€æ—¶å…´è¶£çš„ä¸œè¥¿ï¼Œæ²¡æœ‰ç»è¿‡å¤§è„‘çš„è®¾è®¡ï¼Œå¦‚æœç”¨äºå®æ—¶ç³»ç»Ÿè¿˜è¦åº”è¯¥è€ƒè™‘ä¸€ä¸‹å…¶æ€§èƒ½ï¼ŒNEWå¤ªå¤šäº†ã€‚ä½†æ˜¯ç”¨äºå®æ—¶ç³»ç»Ÿçš„åˆå§‹åŒ–å’Œæ¸…ç†ä¿å­˜ä¿¡æ¯è¿˜æ˜¯ä¸é”™çš„ã€‚æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯å®æ—¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿˜æ˜¯å¾ˆå¿«çš„å•¦ï¼ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹åœ¨æˆ‘éå¸¸çƒ‚çš„æ˜¯ç”µè„‘ä¸Šè¿˜æœ‰ä¸‹é¢çš„ç»“æœï¼ˆå®é™…ä¸Šç»Ÿè®¡çš„æ—¶é—´ä¸å‡†ç¡®çš„ï¼Œæ˜¯ç›¸å¯¹å¤§å¾ˆå¤šçš„ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[==========] Running 2 tests from 1 test cases
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[----------] 2 tests from Json
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[ RUN      ] Json.ConstructJson
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[       OK ] Json.ConstructJson (1 ms)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[ RUN      ] Json.ParseJson
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[       OK ] Json.ParseJson (7 ms)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[----------] 2 tests from Json (17 ms total)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[==========] 2 tests from 1 test case ran (26 ms total)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[  PASSED  ] 2 tests
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>gtest å°ç»“</title>
      <link>https://luoguochun.cn/post/2011-12-05-gtest-summary/</link>
      <pubDate>Mon, 05 Dec 2011 12:00:00 +0000</pubDate>
      
      <guid>https://luoguochun.cn/post/2011-12-05-gtest-summary/</guid>
      <description>&lt;p&gt;GTEST æ˜¯ç®€å•è€Œä¸”åˆéå¸¸å®ç”¨çš„æµ‹è¯•æ¡†æ¶ã€‚ä¸‹é¢å…³äºGTESTçš„ä¸€äº›ç®€å•æ€»ç»“ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¯‘&lt;br&gt;
åœ¨GNUç³»ç»Ÿä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; g++ -I${GTEST_DIR}/include -I${GTEST_DIR} -c ${GTEST_DIR}/src/gtest-all.cc        

 ar -rv libgtest.a gtest-all.o    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨WINDOWSä¸‹ï¼š&lt;br&gt;
GTESTåœ¨MSVCä¸‹é¢æä¾›äº†ç›¸åº”çš„å·¥ç¨‹æ–‡ä»¶ï¼Œç›´æ¥ç”¨VSç¼–è¯‘å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç®€å•ç”¨æ³•&lt;br&gt;
åœ¨GNUç³»ç»Ÿä¸‹ï¼Œç›´æ¥åŒ…å«GTESTçš„å¤´æ–‡ä»¶ï¼Œè¿æ¥åˆ°GTESTåº“ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; g++ -I${GTEST_DIR}/include path/to/your_test.cc libgtest.a â€“lpthread -o your_test        
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨WINDOWSä¸‹ç›´æ¥è¿æ¥åˆ°é™æ€åº“ã€‚&lt;br&gt;
3. SetUp &amp;amp; TearDown
GTESTæä¾›äº†ä»¥ä¸‹çº§åˆ«çš„SETUPå’ŒTEARDOWã€‚&lt;br&gt;
3.1 ç¨‹åºçº§åˆ«&lt;br&gt;
ç¨‹åºçº§åˆ«çš„æ˜¯æŒ‡ç¨‹åºåœ¨å¯åŠ¨çš„æ—¶å€™å’Œç»“æŸçš„æ—¶å€™åˆ†åˆ«SETUPå’ŒTEARDOWNä¸€æ¬¡ã€‚å…¶ä½œç”¨ä¸å…¨å±€å˜é‡ç±»ä¼¼ã€‚&lt;br&gt;
ç¬¬ä¸€æ­¥ï¼Œç»§æ‰¿ç±»ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    class Environment {

    public:

    // The d&#39;tor is virtual as we need to subclass Environment.

    virtual ~Environment() {}

    // Override this to define how to set up the environment.

    virtual void SetUp() {}

    // Override this to define how to tear down the environment.

    virtual void TearDown() {}

    private:

    // If you see an error about overriding the following function or

    // about it being private, you have mis-spelled SetUp() as Setup().

    struct Setup_should_be_spelled_SetUp {};

    virtual Setup_should_be_spelled_SetUp* Setup() { return NULL; }

    };
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‡å†™é‡Œé¢çš„SETUPå’ŒTEARDOWNæ–¹æ³•ã€‚&lt;br&gt;
ç¬¬äºŒæ­¥ï¼Œè°ƒç”¨Environment* AddGlobalTestEnvironment(Environment* env)ï¼Œæ³¨æ„è¿™ä¸ªè¦åœ¨RUN_ALL_TESTSå‰è°ƒç”¨ã€‚å¦‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    int main(int argc, char* argv[])
    {
        testing::AddGlobalTestEnvironment(new XXX Environment);
        testing::InitGoogleTest(&amp;amp;argc, argv);
        return RUN_ALL_TESTS();
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.2 Fixture çº§åˆ«&lt;br&gt;
Fixture çº§åˆ«æ˜¯æŒ‡ï¼Œå¯¹äºåœ¨è¿™FIXTUREé‡Œçš„æ‰€æœ‰TESTCASEï¼Œåªè°ƒç”¨ä¸€æ¬¡SETUPå’ŒTEARDOWNã€‚&lt;br&gt;
åœ¨ä½ çš„FIXTUREé‡Œï¼Œæ·»åŠ ä¸¤ä¸ªé™æ€çš„å‡½æ•°SetUpTestCaseå’ŒTearDownTestCase&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    class XXXTest : public ::testing::Test {
     protected:
      static void SetUpTestCase() {
      }
      static void TearDownTestCase() {
      }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.3 TestCase çº§åˆ«&lt;br&gt;
TestCase çº§åˆ«æ˜¯æŒ‡TESTCASEè°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ååˆ†åˆ«è°ƒç”¨çš„ã€‚&lt;br&gt;
åœ¨ä½ çš„TESTCASEé‡Œï¼Œé‡å†™è™šå‡½æ•°SetUpå’ŒTearDownå³å¯ã€‚å¦‚ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    class XXXTest : public ::testing::Test {
     protected:
      virtual void SetUp() { ... }
      virtual void TearDown() { ... }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Assertion&lt;br&gt;
GTESTæä¾›ä¸¤ç§ï¼Œä¸€ç§æ˜¯ASSERT_XXXå’ŒEXPECT_XXXã€‚å‰è€…è¡¨ç¤ºä¸ç»§ç»­æ‰§è¡ŒTESTCASEï¼Œåè€…è¡¨ç¤ºç»§ç»­æ‰§è¡Œã€‚&lt;br&gt;
æ¯”å¦‚ASSERT_EQ, ASSERT_STREQ,EXPECT_EQ,EXPECT_TRUEç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>
